<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Tweakzx</title>
        <link>https://tweakzx.github.io/</link>
        <description>Recent content on Tweakzx</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Sun, 04 Dec 2022 23:08:20 +0800</lastBuildDate><atom:link href="https://tweakzx.github.io/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>ã€ä»£ç åˆ†æã€‘Antmanå¯¹Tensorflowçš„ä¿®æ”¹</title>
        <link>https://tweakzx.github.io/p/%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90antman%E5%AF%B9tensorflow%E7%9A%84%E4%BF%AE%E6%94%B9/</link>
        <pubDate>Sun, 04 Dec 2022 23:08:20 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90antman%E5%AF%B9tensorflow%E7%9A%84%E4%BF%AE%E6%94%B9/</guid>
        <description>&lt;h2 id=&#34;antmanå¯¹tensorflowçš„ä»£ç ä¿®æ”¹&#34;&gt;Antmanå¯¹Tensorflowçš„ä»£ç ä¿®æ”¹&lt;/h2&gt;
&lt;p&gt;æ€»ä½“çš„å…³ç³»å›¾ï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªå®ç°ï¼Œ å†…å­˜æ–¹é¢çš„GPUResourceManagementä»¥åŠç®—åŠ›æ–¹é¢çš„GpuOpManagerã€‚&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;ï¼Œ align=center&gt;
  

graph TD
  A&gt;gpu_resource_manage_file]
  B[SessionRunRegistry]
  C[SessionRunAction] 
  D[Executor]
  E[GPUResouceManagement]
  F[GPU Statistic]
  G[GpuOpManager]
  H[GpuUsageAdjustment]
  I(dump gpu statistic)
  J[GPU Process State]
  K[GPUVMemAllocator]
  L[GPUAdjustableAllocator]

  A --&gt;|FileListener| E
  B --&gt;|Register| E
  E --&gt;|need_to_adjust_memory_| H
  H --&gt;|new| L
  H --&gt;|get| K
  C --&gt;|Derive| E
  C --&gt;|Derive| F
  B --&gt;|Register| F
  F --&gt;|need_to_dump_statistics_| I

  B --&gt;|Run| C

  J --&gt;|maybe_create_gpu_vmem_allocator|K
  D --&gt;|run thread| G
  E --&gt;|GetEstimatedIdleTime| G


&lt;/div&gt;
&lt;h2 id=&#34;gpuvmemallocator&#34;&gt;GPUVMemAllocator&lt;/h2&gt;
&lt;p&gt;GPUVMemAllocator å¯ä»¥åˆ†é…hostçš„memä½œä¸ºæ˜¾å­˜çš„å¤‡ç”¨ï¼Œä»¥å…å‡ºç°OOMé”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åˆ›å»ºallocator&#34;&gt;åˆ›å»ºallocator&lt;/h3&gt;
&lt;p&gt;maybe_create_gpu_vmem_allocator(&amp;hellip;)å¯ä»¥æ ¹æ®æƒ…å†µè¿”å›åˆé€‚çš„allocator&lt;/p&gt;
&lt;div class=&#34;mermaid&#34;ï¼Œ align=center&gt;
  
graph TD
	A([start]) --&gt;|gpu_allocator|B[maybe_create_gpu_vmem_allocator]--&gt;C{if !gpu_vmem} 
	C --&gt;|true| D([è¿”å›gpu_allocator])
	C --&gt;|false|Z(å‡†å¤‡ç”ŸæˆVMemAllocator)
	Z --&gt; E[new GpuHostAllocator]
	E --&gt;|sub_allocator| F[new BFCAllocator]
	Z --&gt;|gpu_allocator| G[new GPUVMemAllocator]
	F --&gt;|host_allocator|G
	G --&gt;|gpu_vmem_allocator|H([è¿”å›gpu_vmem_allocator])

&lt;/div&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;n&#34;&gt;Allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;maybe_create_gpu_vmem_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                           &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bus_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                           &lt;span class=&#34;n&#34;&gt;PlatformGpuId&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;platform_gpu_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                           &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tf_gpu_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                           &lt;span class=&#34;n&#34;&gt;se&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StreamExecutor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream_exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_vmem&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ReadBoolFromEnvVar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;TF_GPU_VMEM&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                     &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*enabled by default*/&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                     &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_vmem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;LOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;GetGPUAllocator: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_vmem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;SubAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sub_allocator&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GpuHostAllocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;GpuIdUtil&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ExecutorForPlatformGpuId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;platform_gpu_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ValueOrDie&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;bus_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{});&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;int64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cuda_host_mem_limit_in_mb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ReadInt64FromEnvVar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;TF_CUDA_HOST_MEM_LIMIT_IN_MB&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                               &lt;span class=&#34;mi&#34;&gt;1LL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/*64GB max by default*/&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                               &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cuda_host_mem_limit_in_mb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;LOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;GetGpuHostAllocator: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;int64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cuda_host_mem_limit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cuda_host_mem_limit_in_mb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1LL&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;Allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;host_allocator&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BFCAllocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sub_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cuda_host_mem_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                       &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/*allow_growth*/&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                       &lt;span class=&#34;n&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StrCat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;GPUHost_&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tf_gpu_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;_bfc&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;Allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_vmem_allocator&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUVMemAllocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                                       &lt;span class=&#34;n&#34;&gt;host_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                                       &lt;span class=&#34;n&#34;&gt;tf_gpu_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                                       &lt;span class=&#34;n&#34;&gt;stream_exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_vmem_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ†é…è™šæ‹Ÿå†…å­˜&#34;&gt;åˆ†é…è™šæ‹Ÿå†…å­˜&lt;/h3&gt;
&lt;p&gt;å…ˆå°è¯•åˆ†é…GPUå†…å­˜ï¼Œ åˆ†é…æˆåŠŸåˆ™è¿”å›ï¼Œ åˆ†é…å¤±è´¥åˆ™åˆ†é…CPUå†…å­˜ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUVMemAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AllocateRaw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alignment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;mutex_lock&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;AllocationAttributes&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_attr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Tell the device_allocator_ not to retry
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// since we can alloc host memory as backup
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;new_attr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;no_retry_on_failure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device_allocator_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AllocateRaw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alignment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_attr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;device_ptrs_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;host_allocator_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AllocateRaw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alignment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;VLOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;host_allocator_ allocates &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num_bytes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;1024.0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; MiB&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;sessionrunactionregistryä¸­é—´ä»¶æ¡†æ¶&#34;&gt;SessionRunActionRegistryï¼ˆä¸­é—´ä»¶æ¡†æ¶ï¼‰&lt;/h2&gt;
&lt;p&gt;æ·»åŠ äº†ä¸€ä¸ªSessionRunActionRegistryæ¡†æ¶ï¼Œ æ–¹ä¾¿åœ¨sessionå¼€å§‹ä¹‹å‰æˆ–è€…ç»“æŸä¹‹åæ·»åŠ æ‰§è¡ŒåŠ¨ä½œ&lt;/p&gt;
&lt;h3 id=&#34;ä¿®æ”¹direct_sessioncc-å’Œ-master_sessioncc&#34;&gt;ä¿®æ”¹direct_session.cc å’Œ master_session.cc&lt;/h3&gt;
&lt;p&gt;/ä¿®æ”¹äº†åŸå…ˆçš„sessionæ‰§è¡Œæµç¨‹ åœ¨sessionæ‰§è¡Œå‰ååˆ†åˆ«æ‰§è¡Œactions&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;
&lt;span class=&#34;c1&#34;&gt;// Running all pre session run action in grouping
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;SessionRunActionOptions&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;action_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;action_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device_mgr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device_mgr_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;action_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sess_ptr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;TF_RETURN_IF_ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SessionRunActionRegistry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Global&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RunGrouping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;SessionRunActionRegistry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PRE_SESSION_RUN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;action_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
    
 &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time_duration_usecs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;options_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;env&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NowMicros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;start_time_usecs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;metrics&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UpdateGraphExecTime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;time_duration_usecs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// Running all post session run action in grouping
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;session_end_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tensorflow&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Env&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NowMicros&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;action_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sess_duration_us&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time_duration_usecs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;action_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;graph_id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;reinterpret_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;executors_and_keys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;TF_RETURN_IF_ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SessionRunActionRegistry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Global&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RunGrouping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;SessionRunActionRegistry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;POST_SESSION_RUN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;action_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ³¨å†Œaction&#34;&gt;æ³¨å†Œaction&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SessionRunActionRegistry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Register&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;Grouping&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;grouping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;phase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SessionRunAction&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;VLOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Register session run action &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;groups_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;grouping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;phase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;emplace_back&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;


&lt;span class=&#34;c1&#34;&gt;// ä¸€äº›å®å‡½æ•°: æä¾›æ³¨å†Œä¸­é—´ä»¶çš„æ¥å£
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#define REGISTER_SESSION_RUN_ACTION(grouping, phase, action) \
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;  REGISTER_ACTION_UNIQ_HELPER(__COUNTER__, grouping, phase, action)
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#define REGISTER_ACTION_UNIQ_HELPER(ctr, grouping, phase, action) \
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;  REGISTER_ACTION_UNIQ(ctr, grouping, phase, action)
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#define REGISTER_ACTION_UNIQ(ctr, grouping, phase, action)             \
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;  static ::tensorflow::session_run_action_registration::               \
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;      SessionRunActionRegistration register_session_run_action_##ctr(  \
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;          grouping, phase, new action(),                               \
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;          #action)
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// namespace tensorflow
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// TENSORFLOW_CORE_COMMON_RUNTIME_SESSION_RUN_ACTION_REGISTRY_H_
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;c1&#34;&gt;//å®šä¹‰äº†ä¸€ä¸ªRunAction()çš„æ¥å£ï¼Œ Action å¿…é¡»å®ç°è¿™ä¸ªæ¥å£
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;SessionRunAction&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;virtual&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SessionRunAction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;virtual&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;RunAction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SessionRunActionOptions&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;set_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

 &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// The name of the action, which is the same as the inherited
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// class name.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;gpu-memory-limit-adjustment&#34;&gt;GPU memory limit adjustment&lt;/h2&gt;
&lt;p&gt;å®ç°åŠ¨æ€èµ„æºåˆ†é…ï¼Œ è‡ªåŠ¨è°ƒæ•´ç°å­˜é™åˆ¶ï¼Œ å½“å‘ç° Host å†…å­˜è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šæé«˜æ˜¾å­˜çš„é™åˆ¶é˜ˆå€¼ï¼Œè¿™æ ·æ‰€æœ‰çš„ Tensor éƒ½å¯ä»¥ç”³è¯·åœ¨æ˜¾å¡ä¸Šã€‚è¿™æ ·åªä¼šå½±å“ä¸€ä¸ª mini batch çš„æ€§èƒ½ï¼Œåé¢çš„ mini batch è·‘å‰å‘åå‘è®¡ç®—çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ Tensor éƒ½ä¼šè¢«ç”³è¯·åœ¨æ˜¾å­˜ä¸Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¿®æ”¹äº†tensorflow-åŸæœ¬çš„-bfc_allocatorh&#34;&gt;ä¿®æ”¹äº†tensorflow åŸæœ¬çš„ BFC_Allocator.h&lt;/h3&gt;
&lt;p&gt;å¢åŠ äº†friend class GPUAdjustableAllocator;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;// Declare the GPUAdjustableAllocator to be friend of the BFCAllocator,
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// therefore it can adjust the memory limit by modifying the private
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// member variables of BFCAllocator.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;friend&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;GPUAdjustableAllocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å¢åŠ äº†æ‰©ç¼©æ˜¾å­˜åˆ†é…çš„å‡½æ•°&#34;&gt;å¢åŠ äº†æ‰©ç¼©æ˜¾å­˜åˆ†é…çš„å‡½æ•°&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;GPUAdjustableAllocator&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;final&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// Adjust the memory_limit_ to allow memory grow/shrink at runtime
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// Returns adjusted memory_limit_. If the return value is less than
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// the new_memory_limit, the adjustment failed.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AdjustMemoryLimit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_memory_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                           &lt;span class=&#34;n&#34;&gt;BFCAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// Get the memory pool size and in used memory size of the bfc_allocator.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;GetMemPoolStats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BFCAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                      &lt;span class=&#34;kt&#34;&gt;int64_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceMemPoolSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int64_t&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceMemStable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

 &lt;span class=&#34;k&#34;&gt;private&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// Free the memory regions that are not in use
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FreeEmptyMemory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target_memory_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                         &lt;span class=&#34;n&#34;&gt;BFCAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;EXCLUSIVE_LOCKS_REQUIRED&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUAdjustableAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AdjustMemoryLimit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_memory_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;BFCAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;mutex_lock&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new_memory_limit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;total_region_allocated_bytes_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// 1) new_memory_limit &amp;gt;= memory_limit_ : grow memory size
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 2) memory_limit_ &amp;gt; new_memory_limit &amp;gt;= total_region_allocated_bytes_:
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//    shrink, but don&amp;#39;t need to free memory
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// In both cases, no action needed by changing the memory limit
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory_limit_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_memory_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bytes_limit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_memory_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// total_region_allocated_bytes_ &amp;gt; new_memory_limit:
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// shrink, need to free memory
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;free_res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FreeEmptyMemory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;new_memory_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;free_res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_memory_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory_limit_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_memory_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bytes_limit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_memory_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory_limit_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;free_res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bytes_limit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;free_res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bfc_allocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memory_limit_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;file-listener&#34;&gt;File Listener&lt;/h2&gt;
&lt;p&gt;ç›‘æ§é…ç½®æ–‡ä»¶æ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼Œ å¦‚æœå‘ç”Ÿæ”¹å˜åˆ™è§¦å‘å“åº”çš„handler,ä»¥åŠä¸€ä¸ªå›è°ƒå‡½æ•°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FileListener&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RegisterFileListener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                        &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;handler_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                                        &lt;span class=&#34;n&#34;&gt;callback&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;callback_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;LOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;INFO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Register a file listener named &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;handler_name&lt;/span&gt;
             &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; on file &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;FileInfo&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;new_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CallbackFunc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_handlers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;InfoAndHandlers&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_handlers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;CallbackFunc&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;new_callback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handler_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;callback_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;mutex_lock&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;res&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;listeners_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;emplace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_handlers_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;emplace_back&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new_callback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file_monitor_thread_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Note we should start only one monitor thread
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;StartMonitorThread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;gpu-resource-managementä¸­é—´ä»¶&#34;&gt;GPU resource managementï¼ˆä¸­é—´ä»¶ï¼‰&lt;/h2&gt;
&lt;p&gt;ç»§æ‰¿äº†SessionRunAction, æ˜¯ä¸€ä¸ªèµ„æºç®¡ç†ä¸­é—´ä»¶ï¼Œå®šä¹‰å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;GPUResourceManagement&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SessionRunAction&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
 &lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// Note that we will enable TF_FORCE_GPU_ALLOW_GROWTH and TF_GPU_VMEM
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// automatically if the GPUResourceManagement feature is enabled.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;GPUResourceManagement&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPUResourceManagement&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;override&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;	
  &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;    
  &lt;span class=&#34;c1&#34;&gt;//ğŸš¨é…ç½®æ–‡ä»¶æ›´æ–°åï¼Œ è§£ææ–°çš„é…ç½®å¹¶å­˜æ”¾äºæ­¤
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// For recording the parsed new gpu resource limit.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;//ğŸš¨ GPU èµ„æºé™åˆ¶
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unordered_map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUResourceLimitInfo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;gpu_resource_management_info_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// For recording the parsed new gpu performance limitation
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// (if the value is 0, then it means to suspend this job).
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// ğŸš¨ GPU æ€§èƒ½é™åˆ¶ï¼Œ å¦‚æœå€¼ä¸º0ï¼Œ æ„å‘³ç€æŒ‚èµ·è¿™ä¸ªjob
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;atomic&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_perf_control_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// For recording the total time of all inserted time slot.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;total_time_slot_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// For recording the estimated total idle time.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;estimated_total_idle_time_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// For recording the total number of queued GPU op running in
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// the specified executor.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;//  ğŸš¨è®°å½•æ¯ä¸€ä¸ªExecutorè¦æ‰§è¡Œçš„OPæ•°ç›®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unordered_map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;executor_queued_op_num_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// Determine if we need to adjust the GPU usage limit.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// ğŸš¨è¡¨ç¤ºæ˜¯å¦éœ€è¦æ›´æ”¹é…ç½®
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;atomic&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;need_to_adjust_memory_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// For performing the adjustment.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// ä¿®æ”¹é…ç½®çš„ç±»çš„å®ä¾‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;GPUUsageAdjustment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_usage_adjustment_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FILE_LISTENER_NAME&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;GPUResourceManage&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;gpuresourcemanagement&#34;&gt;GPUResourceManagement()&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;n&#34;&gt;GPUResourceManagement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPUResourceManagement&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;need_to_adjust_memory_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;gpu_perf_control_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;gpu_usage_adjustment_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUUsageAdjustment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;//ä»ç¯å¢ƒå˜é‡ä¸­è¯»å–gpué…ç½®æ–‡ä»¶çš„è·¯å¾„
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;ReadStringFromEnvVar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;GPU_CONFIG_FILE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_resource_manage_file_path_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_resource_manage_file_path_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;enable_gpu_resource_manage_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;enable_gpu_resource_manage_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Note that we will enable TF_FORCE_GPU_ALLOW_GROWTH and TF_GPU_VMEM
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// automatically if the GPUResourceManagement feature is enabled.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;setenv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;TF_FORCE_GPU_ALLOW_GROWTH&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;setenv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;TF_GPU_VMEM&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;c1&#34;&gt;// Register a handler that will be triggered when the file named
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;FileListener&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GlobalFileListener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RegisterFileListener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;gpu_resource_manage_file_path_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FILE_LISTENER_NAME&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//FILE_LISTENER_NAME: &amp;#34;GPUResourceManage&amp;#34;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;p&#34;&gt;[](&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;c1&#34;&gt;// The callback func which is invoked when file changed.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;c1&#34;&gt;// ä¼ å…¥ä¸€ä¸ªjsonæ–‡ä»¶ï¼ŒåŒ…å«ManageInfo   
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;c1&#34;&gt;// å½“æ–‡ä»¶æ›´æ”¹æ—¶ï¼Œ è·å–ç›¸åº”çš„åœ¨sessionç»“æŸåè°ƒç”¨é¡ºåºä¸º2çš„actionä¸­åä¸ºGPUResourceManagementçš„action
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;c1&#34;&gt;// actionè§£ææ–°çš„é…ç½®ä¿¡æ¯
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;c1&#34;&gt;// ç­‰åˆ°session è§¦å‘RunAction()ï¼Œ æ›´æ–°é™åˆ¶
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;SessionRunAction&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;act&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;SessionRunActionRegistry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Global&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetAction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                  &lt;span class=&#34;n&#34;&gt;SessionRunActionRegistry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;POST_SESSION_RUN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                  &lt;span class=&#34;s&#34;&gt;&amp;#34;GPUResourceManagement&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
          &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;act&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cout&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Cannot get the instance of GPUResourceManagement &lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
          &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;act&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;GPUResourceManagement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;dynamic_cast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GPUResourceManagement&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;act&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ParseManageInfoFromJson&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ³¨å†Œä¸­é—´ä»¶&#34;&gt;æ³¨å†Œä¸­é—´ä»¶&lt;/h3&gt;
&lt;p&gt;æ„å‘³ç€session ç»“æŸå‰åè¦æ‰§è¡ŒRunActionï¼ˆ&amp;hellip;ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#if GOOGLE_CUDA
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// We register the GPUResourceManagement as a POST_SESSION_RUN action
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// during the initialization phase of the program.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;REGISTER_SESSION_RUN_ACTION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SessionRunActionRegistry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;POST_SESSION_RUN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                            &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUResourceManagement&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

&lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// GOOGLE_CUDA 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®ç°å‡½æ•°runaction&#34;&gt;å®ç°å‡½æ•°RunActionï¼ˆ&amp;hellip;ï¼‰&lt;/h3&gt;
&lt;p&gt;å¦‚æœéœ€è¦è¿›è¡Œæ˜¾å­˜è°ƒæ•´ï¼Œ åˆ™è°ƒç”¨GPUUsageAdjustmentè°ƒæ•´èµ„æº&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUResourceManagement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RunAction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SessionRunActionOptions&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;need_to_adjust_memory_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_perf_control_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// TODO(shiru): do we need to unregister the
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// GPUResourceManagement if the environment variable
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// GPU_CONFIG_FILE is set to null?
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;need_to_adjust_memory_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;mutex_lock&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;manage_mu_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Start to adjust the resource limit as required.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;it&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_resource_management_info_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;gpu_usage_adjustment_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AdjustMemLimit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;it&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//GPUæ€»çº¿id
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;it&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem_limit_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device_mgr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;	  &lt;span class=&#34;c1&#34;&gt;//æ–°çš„æ˜¾å­˜é™åˆ¶ï¼Œ è®¾å¤‡ç®¡ç†å™¨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device_set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;						  &lt;span class=&#34;c1&#34;&gt;//è®¾å¤‡é›†åˆ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;need_to_adjust_memory_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    
 &lt;span class=&#34;c1&#34;&gt;// æš‚åœä¸€æ®µæ—¶é—´ æˆ–è€… æŒ‚èµ·è¿™ä¸ªjob
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;DoSleepOrSuspend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sess_duration_us&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;gpuusageadjustmentcc&#34;&gt;GPUUsageAdjustment.cc&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUUsageAdjustment&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AdjustMemLimit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_pci_bus_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_mem_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unique_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tensorflow&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DeviceMgr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device_mgr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unique_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DeviceSet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device_set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;mutex_lock&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;adj_mu_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;//ä¸€ä¸ªè®°å½•å¯¹åº”gpuä½¿ç”¨æƒ…å†µçš„map
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cur_info&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cur_usage_info_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;find&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_pci_bus_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur_info&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cur_usage_info_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//å¦‚æœæ²¡æœ‰ç›¸åº”çš„ä½¿ç”¨ä¿¡æ¯ï¼Œ åˆ™ç«‹åˆ»è·å–ä½¿ç”¨ä¿¡æ¯
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;GPUBFCAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;allo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetGPUAllocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device_mgr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;device_set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_pci_bus_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;allo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;LOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to get the allocator of gpu_pci_bus_id: &amp;#34;&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_pci_bus_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;GPUUsageInfo&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;usage_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;usage_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_allocator_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;allo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;usage_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur_limit_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem_limit_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ULONG_MAX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Get the VGPU_MEMORY_LIMIT
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;absl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;optional&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AllocatorStats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device_stats&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;allo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetStats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;usage_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur_limit_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;initial_mem_limit_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; 
      &lt;span class=&#34;n&#34;&gt;device_stats&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device_stats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;bytes_limit&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ULONG_MAX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cur_usage_info_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;emplace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_pci_bus_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;usage_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cur_info&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;//å¦‚æœè¶…å‡ºè™šæ‹ŸGPUçš„ä½¿ç”¨é™åˆ¶ï¼Œ åˆ™ä½¿ç”¨ä¸Šé™
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new_mem_limit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cur_info&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur_limit_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;initial_mem_limit_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// The new mem size limit exceeds VGPU_MEMORY_LIMIT
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;new_mem_limit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cur_info&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur_limit_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;initial_mem_limit_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;LOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;WARNING&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;The new mem size limit exceeds VGPU_MEMORY_LIMIT, &amp;#34;&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;therefore, adjust the new mem size limit to : &amp;#34;&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_mem_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;//å¦‚æœåœ¨é™åˆ¶èŒƒå›´å†…ï¼Œå¹¶ä¸”éœ€è¦è°ƒæ•´ï¼Œ ä¸”è°ƒæ•´åçš„å€¼ä¸ä¸º0ï¼Œ 
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;//è°ƒç”¨GPUAdjustableAllocatorï¼Œ æ›´æ”¹å†…å­˜é™åˆ¶ï¼Œ å¹¶ä¸”æ›´æ–°ä½¿ç”¨ä¿¡æ¯
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur_info&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur_limit_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem_limit_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_mem_limit&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_mem_limit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Adjust the memory limit of this GPU
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;LOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;INFO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Start to manage the mem size limit to &amp;#34;&lt;/span&gt;
              &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_mem_limit&lt;/span&gt;
              &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; of device gpu_pci_bus_id: &amp;#34;&lt;/span&gt;
              &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_pci_bus_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;GPUAdjustableAllocator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adj&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUAdjustableAllocator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cur_mem_limit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;adj&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AdjustMemoryLimit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new_mem_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;cur_info&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_allocator_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cur_info&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur_limit_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mem_limit_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cur_mem_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cur_mem_limit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_mem_limit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;LOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to manage the mem size limit to &amp;#34;&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_mem_limit&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; of device gpu_pci_bus_id: &amp;#34;&lt;/span&gt;
                 &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_pci_bus_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// TODO(shiru): need to check is gpu_allocator_ has been changed!
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;gpu-statistics-ä¸­é—´ä»¶&#34;&gt;Gpu Statistics ï¼ˆä¸­é—´ä»¶ï¼‰&lt;/h2&gt;
&lt;p&gt;åœ¨sessionè¿è¡Œç»“æŸåæ‰§è¡Œï¼Œæ‰§è¡Œé¡ºåºä¸º1ï¼Œ åˆ¤æ–­æ˜¯å¦éœ€è¦å¯¼å‡ºGPUç»Ÿè®¡æ•°æ®&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUStatistics&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RunAction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SessionRunActionOptions&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;need_to_dump_statistics_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;huge_change&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RecordSessionRunDuration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;graph_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sess_duration_us&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ShouldCheckGPUStatistics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;huge_change&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// Global lock.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;mutex_lock&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;check_mu_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dur_flag&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CheckSessionRunDuration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;graph_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sess_duration_us&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stat_flag&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CheckGPUVMemAllocatorStatistics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device_mgr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device_set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dur_flag&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stat_flag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;dumpGPUStatistics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;gpu_statistics_last_write_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUStatistics&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dumpGPUStatistics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Value&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dump_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Value&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_info_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;allocator_status_lists_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Value&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;deviceMemUsedMax&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deviceMemUsedMax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;deviceMemUsedMin&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deviceMemUsedMin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;deviceMemPoolSize&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deviceMemPoolSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;deviceMemStable&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deviceMemStable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hostMemUsedMax&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hostMemUsedMax&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hostMemUsedMin&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hostMemUsedMin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hostMemPoolSize&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hostMemPoolSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;swapReason&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;swapReason&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;deviceMemUsedNvidia&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;gpu_info_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_pci_bus_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;dump_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;gpuUsageInfo&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_info_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Value&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sess_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_duration&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sess_run_durations_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;du&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;duration_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;time_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rec&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;second&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recording_time_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;sess_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;graph_&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UInt64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;du&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;du&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_duration&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rec&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;max_record_interval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;max_duration&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;du&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;dump_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;miniBatchDuration&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UInt64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;dump_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Durations&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sess_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StreamWriterBuilder&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream_writer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unique_ptr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StreamWriter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stream_writer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newStreamWriter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ofstream&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;statistics_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;statistics_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_statistics_file_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dump_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;statistics_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;statistics_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;// LOG(INFO) &amp;lt;&amp;lt; &amp;#34;gpu_statistics_file updated.&amp;#34;;
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨å†Œä¸­é—´ä»¶&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#if GOOGLE_CUDA
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// We register the GPUStatistics as a POST_SESSION_RUN action
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// during the initialization phase of the program.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;REGISTER_SESSION_RUN_ACTION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SessionRunActionRegistry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;POST_SESSION_RUN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                            &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GPUStatistics&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#endif  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// GOOGLE_CUDA
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;gpuopmanager&#34;&gt;GpuOpManager&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;GpuOpManager continuously profiles the GPU operators execution time and
simply distributes idle time slots before launching the GPU operators.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨GPUResourceManagement.cc ä¸­å®ç°äº†set()å’Œget() å¯¹åº”executorè¦æ‰§è¡ŒOPæ•°çš„æ¥å£ï¼Œ&lt;/p&gt;
&lt;p&gt;åœ¨Executorä¸­ä»¥ä¸€ä¸ªçº¿ç¨‹çš„å½¢å¼è¿è¡Œï¼Œ åœ¨ExecutorState::ExecutorStateä¸­æ–°å¢äº†ä¸€ä¸ªthreadæˆå‘˜å˜é‡&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹Executor.cc&lt;/p&gt;
&lt;h3 id=&#34;æ„é€ å‡½æ•°é‡Œåˆå§‹åŒ–gpu_op_manger_thread&#34;&gt;æ„é€ å‡½æ•°é‡Œï¼Œåˆå§‹åŒ–gpu_op_manger_thread&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt; &lt;span class=&#34;c1&#34;&gt;// è·å–GPUResourceManagement
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;GPUResourceManagement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetGPUResourceManagement&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;enable_op_management&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetEstimatedIdleTime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;enable_op_management&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_op_manager_thread_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;gpu_op_manager_thread_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ExecutorState&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AsyncGPUOpManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;managerè´Ÿè´£æ’å…¥æ—¶é—´æ§½ï¼Œ ä¹Ÿå°±æ˜¯è®¡ç®—å¥½sleepçš„æ—¶é—´ï¼Œ é‡Šæ”¾èµ„æº&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// The manager thread which is in charge of inserting the time slot
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// before launching each queued async GPU op.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ExecutorState&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AsyncGPUOpManager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sleep_time_us&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;need_to_insert_idle_time_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;GPUResourceManagement&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetGPUResourceManagement&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;terminate_op_magager_thread_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;need_to_insert_idle_time_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetEstimatedIdleTime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;std&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queued_call_func&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
     
    &lt;span class=&#34;c1&#34;&gt;// 1ï¼‰ä»é˜Ÿåˆ—ä¸­è·å–ç¬¬ä¸€ä¸ªè¦æ‰§è¡Œçš„Op  
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;async_gpu_op_queue_lock_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;async_gpu_op_queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;queued_call_func&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;async_gpu_op_queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;front&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;async_gpu_op_queue_lock_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queued_call_func&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//2ï¼‰è°ƒç”¨è¿™ä¸ªOp
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;queued_call_func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;async_gpu_op_queue_lock_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;//3ï¼‰ä»é˜Ÿåˆ—ä¸­åˆ é™¤è¿™ä¸ªop
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;async_gpu_op_queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;async_gpu_op_queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;erase&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;async_gpu_op_queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// æ•°ç›®å‡ä¸€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;n&#34;&gt;num_queued_op&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fetch_sub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;async_gpu_op_queue_lock_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

      &lt;span class=&#34;c1&#34;&gt;// Estimate idle time é¢„æµ‹ç©ºé—²æ—¶é—´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;idle_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetEstimatedIdleTime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queued_op_num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetExecutorQueuedOpNum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;impl_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;idle_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queued_op_num&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idle_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queued_op_num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// ç­‰å¾…ä¸€ä¸ªopçš„ idle_time
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;usleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;idle_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;c1&#34;&gt;// è®¾ç½®å‰©ä½™æ—¶é—´
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;remain_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetEstimatedIdleTime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;remain_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;remain_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;idle_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;remain_time&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;idle_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;rm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetEstimatedIdleTime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;remain_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;usleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;default_check_interval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;process-å¤„ç†è¿‡ç¨‹&#34;&gt;Process å¤„ç†è¿‡ç¨‹&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Process():
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;      
          
        &lt;span class=&#34;n&#34;&gt;Device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel_device&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;impl_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

        &lt;span class=&#34;c1&#34;&gt;// Only enqueue this op if it is an async GPU op.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;c1&#34;&gt;// 1 å¦‚æœæ˜¯ä¸€ä¸ªå¼‚æ­¥Opï¼Œ åˆ™åŠ å…¥åˆ°å¼‚æ­¥OPé˜Ÿåˆ—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;need_to_insert_idle_time_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kernel_device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;find&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;GPU&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;npos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;c1&#34;&gt;// Enqueue this GPU op therefore we can insert a time slot before launching this op.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;c1&#34;&gt;// åœ¨å¯åŠ¨è¿™ä¸ªopä¹‹å‰æˆ‘ä»¬å¯ä»¥æ’å…¥ä¸€ä¸ªæ—¶é—´æ§½
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;sess_op_num&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

          &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GraphView&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gview_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;impl_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gview_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
          &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NodeItem&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;item_t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gview_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;AsyncState&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AsyncState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item_t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;first_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

          &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;async_gpu_kernel&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;op_kernel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;AsyncOpKernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AsAsync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;DCHECK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;done&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;Device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;impl_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;NodeExecStatsInterface&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// Shorthand
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;              &lt;span class=&#34;n&#34;&gt;Entry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;first_input&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;     &lt;span class=&#34;c1&#34;&gt;// Shorthand
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;nodestats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetOpEnd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;EntryVector&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;outputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ProcessOutputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;outputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;nodestats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetMemory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vlog_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;VLOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Async kernel done: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
                        &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; step &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;step_id_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;
                        &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SummarizeNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                        &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_dead&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; is dead&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                        &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; device: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
              &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

              &lt;span class=&#34;c1&#34;&gt;// Clears inputs.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;              &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num_inputs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num_inputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num_inputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first_input&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClearVal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
              &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;FrameState&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input_frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;int64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input_iter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;MaybeMarkCompleted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input_iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;TaggedNodeSeq&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ready&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;PropagateOutputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;outputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ready&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
              &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;outputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;impl_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device_record_tensor_accesses_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;c1&#34;&gt;// Get the list of all tensors accessed during the execution
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;n&#34;&gt;TensorReferenceVector&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;accessed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;retrieve_accessed_tensors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accessed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;nodestats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetReferencedTensors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;accessed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
                &lt;span class=&#34;c1&#34;&gt;// callee takes ownership of the vector
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConsumeListOfAccessedTensors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op_device_context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;
                                                    &lt;span class=&#34;n&#34;&gt;accessed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
              &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
                  &lt;span class=&#34;n&#34;&gt;NodeDone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ready&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;completed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ScheduleFinish&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
              
            &lt;span class=&#34;n&#34;&gt;nodestats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetOpStart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;profiler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TraceMe&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                  &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StrCat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                        &lt;span class=&#34;n&#34;&gt;op_kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;op_kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;
                        &lt;span class=&#34;s&#34;&gt;&amp;#34;#id=&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;step_container_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;step_container_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;step_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                        &lt;span class=&#34;s&#34;&gt;&amp;#34;,device=&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;,async=true#&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
                  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
                  &lt;span class=&#34;n&#34;&gt;profiler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetTFTraceMeLevel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op_kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IsExpensive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()));&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ComputeAsync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;async&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;

          &lt;span class=&#34;c1&#34;&gt;// Enqueue this asyn GPU op.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;async_gpu_op_queue_lock_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;async_gpu_op_queue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;emplace_back&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;async_gpu_kernel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//æ·»åŠ kernelåˆ°opé˜Ÿåˆ—
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;num_queued_op&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fetch_add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//åŠ ä¸€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;async_gpu_op_queue_lock_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            
          &lt;span class=&#34;c1&#34;&gt;//2 å¦‚æœä¸æ˜¯å¼‚æ­¥çš„OP åˆ™ä¸åŠ å…¥
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;c1&#34;&gt;// Do not enqueue this op.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;          &lt;span class=&#34;n&#34;&gt;AsyncOpKernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AsAsync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;DCHECK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;async&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;AsyncState&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
              &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AsyncState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;first_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

          &lt;span class=&#34;k&#34;&gt;auto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;done&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;Device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;impl_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;NodeExecStatsInterface&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// Shorthand
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;n&#34;&gt;Entry&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;first_input&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first_input&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;       &lt;span class=&#34;c1&#34;&gt;// Shorthand
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;nodestats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetOpEnd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;EntryVector&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;outputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ProcessOutputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;outputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;nodestats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetMemory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vlog_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;VLOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Async kernel done: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
                      &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; step &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;step_id_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;
                      &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SummarizeNode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                      &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_dead&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; is dead&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                      &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; device: &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

            &lt;span class=&#34;c1&#34;&gt;// Clears inputs.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num_inputs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num_inputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num_inputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
              &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;first_input&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ClearVal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;FrameState&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input_frame&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;int64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input_iter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;MaybeMarkCompleted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;input_frame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;input_iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;TaggedNodeSeq&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ready&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;PropagateOutputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tagged_node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;outputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ready&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;outputs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clear&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;impl_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;device_record_tensor_accesses_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
              &lt;span class=&#34;c1&#34;&gt;// Get the list of all tensors accessed during the execution
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;              &lt;span class=&#34;n&#34;&gt;TensorReferenceVector&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;accessed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;retrieve_accessed_tensors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accessed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
              &lt;span class=&#34;n&#34;&gt;nodestats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetReferencedTensors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;accessed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
              &lt;span class=&#34;c1&#34;&gt;// callee takes ownership of the vector
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;              &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConsumeListOfAccessedTensors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op_device_context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;
                                                  &lt;span class=&#34;n&#34;&gt;accessed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;completed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;NodeDone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ready&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;completed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ScheduleFinish&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;nodestats&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SetOpStart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stats&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;profiler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TraceMe&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;activity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StrCat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
                      &lt;span class=&#34;n&#34;&gt;op_kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;op_kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;type_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;
                      &lt;span class=&#34;s&#34;&gt;&amp;#34;#id=&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;step_container_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;step_container_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;step_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
                      &lt;span class=&#34;s&#34;&gt;&amp;#34;,device=&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;,async=true#&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
                &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;profiler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetTFTraceMeLevel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op_kernel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IsExpensive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()));&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ComputeAsync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;async&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç»“æŸå‡½æ•°&#34;&gt;ç»“æŸå‡½æ•°&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cc&#34; data-lang=&#34;cc&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Finish():
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_op_manager_thread_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;terminate_op_magager_thread_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gpu_op_manager_thread_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;joinable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;gpu_op_manager_thread_&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gpu_op_manager_thread_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;terminate_op_magager_thread_&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;div class=&#34;mermaid&#34;ï¼Œ align=center&gt;
  

graph TD
  A&gt;gpu_resource_manage_file]
  B[SessionRunRegistry]
  C[SessionRunAction] 
  D[Executor]
  E[GPUResouceManagement]
  F[GPU Statistic]
  G[GpuOpManager]
  H[GpuUsageAdjustment]
  I(dump gpu statistic)
  J[GPU Process State]
  K[GPUVMemAllocator]
  L[GPUAdjustableAllocator]

  A --&gt;|FileListener| E
  B --&gt;|Register| E
  E --&gt;|need_to_adjust_memory_| H
  H --&gt;|new| L
  H --&gt;|get| K
  C --&gt;|Derive| E
  C --&gt;|Derive| F
  B --&gt;|Register| F
  F --&gt;|need_to_dump_statistics_| I

  B --&gt;|Run| C

  J --&gt;|maybe_create_gpu_vmem_allocator|K
  D --&gt;|run thread| G
  E --&gt;|GetEstimatedIdleTime| G


&lt;/div&gt;
</description>
        </item>
        <item>
        <title>ã€è®ºæ–‡ç¬”è®°ã€‘EasyScaleè®ºæ–‡é˜…è¯»ç¬”è®°</title>
        <link>https://tweakzx.github.io/p/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0easyscale%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Wed, 09 Nov 2022 15:09:23 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0easyscale%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;img src="https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211091510408.png" alt="Featured image of post ã€è®ºæ–‡ç¬”è®°ã€‘EasyScaleè®ºæ–‡é˜…è¯»ç¬”è®°" /&gt;&lt;h1 id=&#34;easyscale-è®ºæ–‡é˜…è¯»ç¬”è®°&#34;&gt;EasyScale è®ºæ–‡é˜…è¯»ç¬”è®°&lt;/h1&gt;
&lt;h2 id=&#34;abstract&#34;&gt;Abstract&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†å¸ƒå¼åŒæ­¥GPUè®­ç»ƒé€šå¸¸è¢«ç”¨äºæ·±åº¦å­¦ä¹ ã€‚
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å›ºå®šGPUçš„èµ„æºçº¦æŸ
&lt;ul&gt;
&lt;li&gt;ä½¿å¾—å¤§è§„æ¨¡çš„æ·±åº¦å­¦ä¹ è®­ç»ƒå·¥ä½œå—åˆ°å½±å“&lt;/li&gt;
&lt;li&gt;é™ä½äº†é›†ç¾¤çš„åˆ©ç”¨ç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;çº³å…¥èµ„æºå¼¹æ€§
&lt;ul&gt;
&lt;li&gt;å¾€å¾€ä¼šå¼•å…¥æ¨¡å‹ç²¾åº¦çš„éç¡®å®šæ€§&amp;lt;&amp;mdash;&amp;ndash;ç¼ºä¹éš”ç¦»èƒ½åŠ›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœ¬æ–‡ä»‹ç»EasyScaleï¼Œ
&lt;ul&gt;
&lt;li&gt;è¿™æ˜¯ä¸€ä¸ªå¼¹æ€§æ¡†æ¶
&lt;ul&gt;
&lt;li&gt;å¯ä»¥åœ¨å¼‚æ„GPUä¸Šæ‰©å±•åˆ†å¸ƒå¼è®­ç»ƒ&lt;/li&gt;
&lt;li&gt;åŒæ—¶äº§ç”Ÿç¡®å®šæ€§çš„æ·±åº¦å­¦ä¹ æ¨¡å‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®ç°äº†å¼¹æ€§çš„ç²¾åº¦ä¸€è‡´çš„æ¨¡å‹è®­ç»ƒã€‚
&lt;ul&gt;
&lt;li&gt;EasyScaleä¸¥æ ¼éµå¾ªæ•°æ®å¹¶è¡Œè®­ç»ƒæµç¨‹&lt;/li&gt;
&lt;li&gt;ä»”ç»†è¿½è¸ªä¸ç²¾åº¦ç›¸å…³çš„å› ç´ &lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆåˆ©ç”¨æ·±åº¦å­¦ä¹ ç‰¹æ€§è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸ºäº†ä½¿å¼‚æ„GPUçš„è®¡ç®—èƒ½åŠ›è¾¾åˆ°é¥±å’Œ
&lt;ul&gt;
&lt;li&gt;EasyScaleæ ¹æ®æˆ‘ä»¬çš„ä½œä¸šå†…å’Œä½œä¸šé—´è°ƒåº¦ç­–ç•¥åŠ¨æ€åœ°åˆ†é…å·¥äºº&lt;/li&gt;
&lt;li&gt;æœ€å¤§é™åº¦åœ°å‡å°‘GPUçš„ç©ºé—²æ—¶é—´&lt;/li&gt;
&lt;li&gt;å¹¶ç›¸åº”åœ°æé«˜ç»¼åˆä½œä¸šçš„ååé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®éªŒ
&lt;ul&gt;
&lt;li&gt;éƒ¨ç½²åœ¨CompanyAçš„ä¸€ä¸ªåœ¨çº¿æœåŠ¡é›†ç¾¤ä¸­&lt;/li&gt;
&lt;li&gt;EasyScaleä¸ºå¼¹æ€§æ·±åº¦å­¦ä¹ è®­ç»ƒä½œä¸šæä¾›åŠ¨åŠ›ï¼Œä½¿å…¶é€‚æ—¶åœ°åˆ©ç”¨ç©ºé—²çš„GPU&lt;/li&gt;
&lt;li&gt;åœ¨ä¸è¿åSLAçš„æƒ…å†µä¸‹å°†é›†ç¾¤çš„æ•´ä½“åˆ©ç”¨ç‡æé«˜äº†62.1%&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¼¹æ€§æ·±åº¦å­¦ä¹ æ¡†æ¶å¾ˆå°‘åœ¨è¡Œä¸šä¸­ä½¿ç”¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ ¹æœ¬éšœç¢ï¼šåœ¨ä½¿ç”¨ä¸åŒèµ„æºè¿›è¡Œè®­ç»ƒæ—¶æ¨¡å‹å‡†ç¡®æ€§ä¸ä¸€è‡´&lt;/li&gt;
&lt;li&gt;èµ„æºå¼¹æ€§å¯¹è®­ç»ƒç¨‹åºå’Œæ¨¡å‹æ”¶æ•›éƒ½å¼•å…¥äº†éç¡®å®šæ€§ã€‚
&lt;ul&gt;
&lt;li&gt;é€šè¿‡è°ƒæ•´ç‰¹å®šåŸºå‡†ä¸­çš„è¶…å‚æ•°ï¼ˆå¦‚å­¦ä¹ ç‡æˆ–æ‰¹é‡å¤§å°ï¼‰æ”¶æ•›åˆ°ç±»ä¼¼çš„ç²¾åº¦ä¸èƒ½è¯´æœç”¨æˆ·ï¼Œå› ä¸ºé¢„æœŸçš„è®¡ç®—æµç¨‹å·²ç»éšæ€§æ”¹å˜ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æ”¹å˜æ•°æ®é›†æˆ–æ¨¡å‹ç»“æ„æ—¶ï¼Œå¯¹æ¨¡å‹å‡†ç¡®æ€§çš„éç¡®å®šæ€§çš„æ‹…å¿§ä»ç„¶æ²¡æœ‰å¾—åˆ°è§£å†³ï¼Œè¿™ä½¿å¾—æ·±åº¦å­¦ä¹ ä»ä¸šè€…åœ¨æ‹¥æŠ±èµ„æºå¼¹æ€§æ—¶çŠ¹è±«ä¸å†³&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;EasyScaleï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€ä¸ªåœ¨åŒæ„å’Œå¼‚æ„ GPU çš„èµ„æºå¼¹æ€§ä¸Šå®ç°ä¸€è‡´æ¨¡å‹ç²¾åº¦çš„è®­ç»ƒæ¡†æ¶
&lt;ul&gt;
&lt;li&gt;æé«˜äº†æ•´ä½“é›†ç¾¤æ•ˆç‡&amp;lt;&amp;mdash;-é€šè¿‡å°½æœ€å¤§åŠªåŠ›åˆ©ç”¨ç©ºé—² GPU æ¥è¿›è¡Œå¼¹æ€§æ¨¡å‹è®­ç»ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å°†æ·±åº¦å­¦ä¹ æ¨¡å‹è®­ç»ƒè§†ä¸ºç§‘å­¦å®éªŒï¼Œå°†ç¡®å®šæ€§å’Œå¯é‡å¤æ€§ä½œä¸ºç¬¬ä¸€æµçš„ç›®æ ‡&lt;/li&gt;
&lt;li&gt;EasyScaleæ¢è®¨äº†å°†åˆ†å¸ƒå¼æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸ç¡¬ä»¶èµ„æºè§£è€¦çš„å¯èƒ½æ€§
&lt;ul&gt;
&lt;li&gt;æ— è®ºåˆ†é…çš„GPUæ•°é‡å’Œç±»å‹å¦‚ä½•ï¼Œéƒ½èƒ½äº§ç”Ÿä½æ•°ä¸€è‡´çš„æ¨¡å‹&lt;/li&gt;
&lt;li&gt;è¿™æ˜¯é€šè¿‡ä¸€ä¸ªåä¸ºEasyScaleThreadçš„æŠ½è±¡æ¥å®ç°çš„
&lt;ul&gt;
&lt;li&gt;å®ƒå°è£…äº†ä»æ•°æ®åŠ è½½ã€é‡‡æ ·ã€è®¡ç®—åˆ°é€šä¿¡çš„æ‰€æœ‰é˜¶æ®µ&lt;/li&gt;
&lt;li&gt;å¹¶ä½¿å®ƒä»¬ä¸åœ¨å›ºå®šçš„GPUä¸­æ‰§è¡Œçš„å®Œå…¨ä¸€æ ·&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;EasyScaleåˆ©ç”¨æ·±åº¦å­¦ä¹ çš„ç‰¹ç‚¹
&lt;ul&gt;
&lt;li&gt;å®ç°äº†å¿«é€Ÿçš„ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/li&gt;
&lt;li&gt;è§£å†³äº†è®­ç»ƒå·¥ä½œè€…çŠ¶æ€çš„æ½œåœ¨éç¡®å®šæ€§&lt;/li&gt;
&lt;li&gt;å¹¶åœ¨èµ„æºé‡æ–°é…ç½®æ—¶æœ‰æ•ˆåœ°æ‰§è¡Œè¿½è¸ªå’Œæ£€æŸ¥ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;EasyScaleå¼•å…¥äº†ä¸€ä¸ªå·¥ä½œå†…ç­–ç•¥&amp;mdash;-&amp;gt;ä»¥è´Ÿè½½å¹³è¡¡çš„æ–¹å¼åœ¨å¼‚æ„GPUä¸Šå®‰æ’è®­ç»ƒå·¥äºº&lt;/li&gt;
&lt;li&gt;è¿›ä¸€æ­¥ä¼˜åŒ–äº†å·¥ä½œé—´çš„èµ„æºåˆ†é…&amp;mdash;-&amp;gt;ä»¥æœ€å¤§é™åº¦åœ°æé«˜æ€»çš„ååé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è´¡çŒ®å¦‚ä¸‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬è°ƒæŸ¥äº†ç°æœ‰çš„å¼¹æ€§æ·±åº¦å­¦ä¹ æ¡†æ¶å’Œå¼‚æ„ç¯å¢ƒä¸­çš„éç¡®å®šæ€§è¡Œä¸ºï¼Œå¹¶å¯¹æ•£å¸ƒåœ¨æ•´ä¸ªDLTè½¯ä»¶å †æ ˆä¸­çš„ä½æ•°å·®å¼‚è¿›è¡Œäº†æº¯æºã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬ä»‹ç»ç”¨äºå¼¹æ€§åˆ†å¸ƒå¼æ¨¡å‹è®­ç»ƒçš„EasyScaleï¼Œå®ƒä»¥ç¡®å®šæ€§çš„æ–¹å¼å®ç°äº†ä¸€è‡´çš„å‡†ç¡®æ€§ã€‚EasyScaleåˆ©ç”¨EasyScaleThreadæ¥ä¿æŒä¸PyTorch DDPç›¸åŒçš„å¼¹æ€§è®­ç»ƒè¡Œä¸ºï¼Œå¹¶ä»¥å¯å¿½ç•¥ä¸è®¡çš„å¼€é”€æœ‰æ•ˆåœ°è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬å¼•å…¥äº†æ–°çš„ä½œä¸šå†…å’Œä½œä¸šé—´è°ƒåº¦ç­–ç•¥ï¼Œä»¥æé«˜å•ä¸ªEasyScaleä½œä¸šçš„ååé‡å’Œèšåˆé›†ç¾¤çš„ååé‡ï¼Œä»è€Œçµæ´»æœ‰æ•ˆåœ°åˆ©ç”¨å¼‚æ„çš„GPUã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬åœ¨ç”Ÿäº§é›†ç¾¤ä¸­å…¨é¢éƒ¨ç½²äº†EasyScaleï¼Œå°†å¼¹æ€§è®­ç»ƒä½œä¸šä¸åœ¨çº¿æ¨¡å‹æœåŠ¡æ”¾åœ¨ä¸€èµ·ï¼Œåœ¨æ»¡è¶³æ¨¡å‹æœåŠ¡SLAçš„çº¦æŸä¸‹ï¼Œæ˜¾è‘—æé«˜äº†é›†ç¾¤åˆ©ç”¨ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;motivation&#34;&gt;Motivation&lt;/h2&gt;
&lt;h3 id=&#34;å¼¹æ€§è®­ç»ƒå¸¦æ¥çš„ä¸ç¡®å®šæ€§&#34;&gt;å¼¹æ€§è®­ç»ƒå¸¦æ¥çš„ä¸ç¡®å®šæ€§&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸ä¸€è‡´çš„æ¨¡å‹ç²¾åº¦&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211100931703.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211100931703.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221110093121968&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221110093121968&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨å¼¹æ€§æ¡†æ¶è¿›è¡Œæ¨¡å‹è®­ç»ƒçš„å¤šæ¬¡è¿è¡Œï¼Œæœªèƒ½åœ¨ä½¿ç”¨ä¸åŒæ•°é‡çš„èµ„æºæ—¶äº§ç”Ÿä¸€è‡´çš„æ¨¡å‹ç²¾åº¦ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å›¾2è¯´æ˜äº†ResNet18åœ¨CIFAR10ä¸Šçš„éªŒè¯ç²¾åº¦
&lt;ul&gt;
&lt;li&gt;å®éªŒæ¡ä»¶
&lt;ul&gt;
&lt;li&gt;è¿™æ˜¯ä¸€ä¸ªç”¨ä¸åŒæ•°é‡çš„V100 GPUè®­ç»ƒçš„å¼¹æ€§æ¨¡å‹&lt;/li&gt;
&lt;li&gt;è¶…å‚æ•°å’Œéšæœºç§å­ä¸é»˜è®¤å€¼ç›¸åŒï¼Œåªä½¿ç”¨ä¸åŒåˆ†é…çš„GPU&lt;/li&gt;
&lt;li&gt;TorchElasticï¼ˆTEï¼‰è¢«é…ç½®ä¸ºè°ƒæ•´å­¦ä¹ ç‡çš„çº¿æ€§ç¼©æ”¾è§„åˆ™&lt;/li&gt;
&lt;li&gt;Polluxå¯ä»¥è‡ªåŠ¨å†³å®šç›¸åº”çš„å­¦ä¹ ç‡å’Œæ‰¹æ¬¡å¤§å°&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®éªŒç»“è®º
&lt;ul&gt;
&lt;li&gt;ä¸å›ºå®šGPUä¸Šçš„åˆ†å¸ƒå¼æ¨¡å‹è®­ç»ƒç›¸æ¯”ï¼Œèµ„æºå¼¹æ€§å¸¦æ¥äº†ä¸åŒçš„è®­ç»ƒè¡Œä¸ºã€‚&lt;/li&gt;
&lt;li&gt;Polluxåœ¨äº§ç”Ÿæ¨¡å‹è´¨é‡æ–¹é¢å¼•å…¥äº†ç›¸å¯¹è¾ƒå°çš„å·®å¼‚ï¼Œç„¶è€Œï¼Œè¿™ç§å·®å¼‚ä»ç„¶æ˜¯ä¸å¯å¿½è§†çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å›¾3ä¸­æŠ¥å‘Šäº†æ€»ä½“å’Œæ¯ç±»çš„ç»§ç»­è®­ç»ƒåˆ°100ä¸ªepochå‡†ç¡®ç‡
&lt;ul&gt;
&lt;li&gt;ç»“æœ
&lt;ul&gt;
&lt;li&gt;æ€»ä½“å‡†ç¡®ç‡çš„å·®å¼‚ä»ç„¶å¾ˆæ˜æ˜¾ï¼šTorchElasticå’ŒPolluxåˆ†åˆ«ä¸º0.6%å’Œ2.8%ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ç±»å‡†ç¡®ç‡çš„å·®å¼‚ç”šè‡³æ›´å¤§ï¼šè¾¾åˆ°7.4%å’Œ17.3%&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç»“è®º
&lt;ul&gt;
&lt;li&gt;è¿™è¡¨æ˜å¼¹æ€§è®­ç»ƒçš„æ¨¡å‹ä¸ä½¿ç”¨å›ºå®šGPUçš„æ¨¡å‹ç›¸æ¯”ï¼Œåå·®ä¸åŒã€‚&lt;/li&gt;
&lt;li&gt;å…¶ä»–æŒ‡æ ‡ä»æœªæŠ«éœ²ï¼Œæ¨¡å‹è´¨é‡å·®è·çš„ä¸Šé™ä»ç„¶æœªçŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¾ˆéš¾ç†è§£è¶…å‚å¸¦æ¥çš„å½±å“&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211100931919.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211100931919.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221110093137841&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221110093137841&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç ”ç©¶äººå‘˜å¾ˆéš¾æ¨ç†å‡ºgammaå¦‚ä½•å½±å“è®­ç»ƒæŸå¤±æ›²çº¿&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å›¾4æ˜¾ç¤ºäº†ResNet50åœ¨CIFAR10ä¸Šçš„å®éªŒ
&lt;ul&gt;
&lt;li&gt;å®éªŒè®¾ç½®
&lt;ul&gt;
&lt;li&gt;æ¯”è¾ƒå¯¹è±¡
&lt;ul&gt;
&lt;li&gt;å›ºå®š4ä¸ªGPUä¸Šçš„DDPè®­ç»ƒ&lt;/li&gt;
&lt;li&gt;1/2/4ä¸ªGPUä¸Šçš„ä½¿ç”¨Polluxçš„å¼¹æ€§æ¨¡å‹è®­ç»ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é™¤äº†å­¦ä¹ ç‡è°ƒåº¦å™¨çš„ä¸€ä¸ªè¶…å‚æ•°gammaå¤–ï¼Œå…¶ä»–é…ç½®éƒ½æ˜¯ä¸€è‡´çš„
&lt;ul&gt;
&lt;li&gt;gammaå†³å®šäº†æœ¬å®éªŒä¸­20ä¸ªepochsåçš„å­¦ä¹ ç‡é™ä½æ¯”ä¾‹&lt;/li&gt;
&lt;li&gt;DDPå®éªŒä»¥ç›¸åŒçš„è®¾ç½®è¿è¡Œäº†ä¸‰æ¬¡4-GPUè®­ç»ƒï¼Œä½†gammaå€¼åˆ†åˆ«ä¸º0.1ã€0.3å’Œ0.5&lt;/li&gt;
&lt;li&gt;Polluxä¹Ÿè¿è¡ŒåŒæ ·çš„å®éªŒï¼Œ1ä¸ªGPUçš„gammaä¸º0.1ï¼Œ2ä¸ªGPUçš„gammaä¸º0.3ï¼Œè€Œ4ä¸ªGPUçš„gammaä¸º0.5&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®éªŒç»“è®º
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨DDPï¼Œå¯ä»¥æ¸…æ¥šåœ°æ¨æ–­å‡ºè¶…å‚æ•°gammaæ˜¯å¦‚ä½•å½±å“æ¨¡å‹è®­ç»ƒè¿‡ç¨‹çš„ã€‚
&lt;ul&gt;
&lt;li&gt;è®­ç»ƒæŸå¤±åœ¨å‰20ä¸ª epochsçš„ä¸‰æ¬¡è¿è¡Œä¸­ä¿æŒä¸€è‡´&lt;/li&gt;
&lt;li&gt;ä¹‹åï¼Œè¾ƒå°çš„gammaå¯¼è‡´è¾ƒå°çš„è®­ç»ƒæŸå¤±&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨Polluxï¼Œç ”ç©¶äººå‘˜å¾ˆéš¾æ¨ç†å‡ºgammaå¦‚ä½•å½±å“è®­ç»ƒæŸå¤±æ›²çº¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ€»ç»“&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DL æ¨¡å‹ç°åœ¨æ˜¯ç®—æ³•ï¼Œæ¡†æ¶å’Œè®¡ç®—èµ„æºç»„åˆçš„ç»“æœ&lt;/strong&gt;ï¼Œè¿™æ˜¯é™åˆ¶ DLT ä½œä¸šä½¿ç”¨å¼¹æ€§èµ„æºçš„æ ¹æœ¬åŸå› &lt;/li&gt;
&lt;li&gt;ç°æœ‰çš„å¼¹æ€§ &lt;strong&gt;DL æ¡†æ¶ç¼ºä¹å°†èµ„æºä¸æ¨¡å‹è¶…å‚æ•°è§£è€¦çš„èƒ½åŠ›&lt;/strong&gt;&amp;mdash;-&amp;gt;æ— æ³•æä¾›ä¸å¼¹æ€§è®­ç»ƒä¸€è‡´çš„æ¨¡å‹ç²¾åº¦&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬éœ€è¦æ”¯æŒå¼¹æ€§è®­ç»ƒï¼ŒåŒæ—¶ä¿æŒä¸€è‡´çš„æ¨¡å‹ç²¾åº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;design&#34;&gt;Design&lt;/h2&gt;
&lt;h3 id=&#34;overview&#34;&gt;Overview&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¼¹æ€§è®­ç»ƒåº”è¯¥ç”Ÿæˆä¸ä½¿ç”¨å›ºå®šæ•°é‡çš„GPUè¿›è¡Œçš„DDPè®­ç»ƒç›¸åŒçš„æ¨¡å‹å‚æ•°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®ç°å¼¹æ€§å‡†ç¡®åº¦ä¸€è‡´çš„æ¨¡å‹è®­ç»ƒçš„å…³é”®æŒ‘æˆ˜æ˜¯æ‰¾åˆ°ä¸€ç§å®ç”¨çš„æ–¹æ³•ï¼Œå°†ä¸€ä¸ªGPUæœ‰æ•ˆåœ°åˆ†äº«ç»™å¤šä¸ªworker&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;easyscalethread&#34;&gt;EasyScaleThread&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;EasyScaleThreadï¼š æ•æ‰æ·±åº¦å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹å¹¶å°†å…¶ä¸ç¡¬ä»¶èµ„æºè§£è€¦&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªGPUéƒ½ç”±ä¸€ä¸ªEasyScale PyTorch workerå¯åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;åŸå§‹è®­ç»ƒworkerçš„æ‰§è¡Œè¢«è§†ä¸ºESTçš„æ‰§è¡Œï¼Œå®ƒå¯ä»¥åŠ¨æ€åœ°åˆ†é…ç»™PyTorch workerè¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸€ä¸ªworkerä¸­ï¼Œå¤šä¸ªEasyScaleThreadsè½®æµå ç”¨GPUè¿›è¡Œè®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨
&lt;ul&gt;
&lt;li&gt;é€šè¿‡ä½¿ç”¨ç™½ç›’æ–¹æ³•ï¼ŒEasyScaleé€šè¿‡ç”¨æˆ·æ³¨é‡Šå°†æ¨¡å‹è®­ç»ƒçš„å…³é”®æ­¥éª¤æŒ‚é’©ï¼Œæ•°æ®åŠ è½½ã€åå‘ä¼ æ’­å’Œæ¨¡å‹æ›´æ–°ï¼Œå› æ­¤åœ¨&lt;strong&gt;mini-batchè¾¹ç•Œ&lt;/strong&gt;è¿›è¡Œç²¾åº¦ä¸€è‡´çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·å®šä¹‰çš„æ¨¡å‹è®­ç»ƒè¯­ä¹‰ï¼ŒåŒ…æ‹¬æ¨¡å‹ç»“æ„ã€æ•°æ®å¢é‡ã€æ‰¹æ¬¡å¤§å°ã€ä¼˜åŒ–ç­‰ï¼Œéƒ½ç…§å¸¸ä¿ç•™ã€‚&lt;/li&gt;
&lt;li&gt;è‡³äºç¼–ç¨‹ï¼Œç”¨æˆ·è€ƒè™‘æ€»çš„é€»è¾‘è®­ç»ƒå·¥ä½œè€…çš„æ•°é‡æ¥å†³å®šè¶…å‚æ•°ï¼ˆå¦‚å…¨å±€æ‰¹å¤„ç†é‡å’Œå­¦ä¹ ç‡ï¼‰ï¼Œè¿™ä¸ä»–ä»¬ä½¿ç”¨å›ºå®šGPUçš„ç»éªŒç›¸åŒï¼Œä½†è‡ªåŠ¨å—ç›ŠäºEasyScaleæä¾›çš„å¼¹æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;mini-batchçš„æ‰§è¡Œï¼š
&lt;ul&gt;
&lt;li&gt;è¾“å…¥æ•°æ®è¢«åˆ†å‰²åˆ°æ‰€æœ‰çš„EasyScaleThreadsä¸­&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªGPUä¸Šæ¯æ¬¡æ‰§è¡Œä¸€ä¸ªESTæ—¶ï¼Œ å…¶ä»–ESTè¢«å†»ç»“&lt;/li&gt;
&lt;li&gt;åœ¨æ‰€æœ‰EasyScaleThreadså®Œæˆåï¼Œmini-batchå°±å®Œæˆäº†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å½“ä¸¤ä¸ªEasyScaleThreadsåˆ‡æ¢æ—¶
&lt;ul&gt;
&lt;li&gt;EasyScaleThreadçš„è®­ç»ƒçŠ¶æ€éœ€è¦è¢«ä¿å­˜åˆ°GPUä¹‹å¤–ï¼Œå› æ­¤è¦ç¡®ä¿æœ‰è¶³å¤Ÿçš„GPUå†…å­˜ç»™ä¸‹ä¸€ä¸ªEasyScaleThreadï¼Œè¿™å¯èƒ½æ˜¯æ˜‚è´µçš„ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨GPUä¸Šä¸ºæ¯ä¸ªminibatchæœ‰æ•ˆåˆ‡æ¢EasyScaleThreadsçš„å…³é”®æ˜¯&lt;strong&gt;å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢æ‰€éœ€çš„çŠ¶æ€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è€ŒEasyScaleé€‰æ‹©åœ¨&lt;strong&gt;å®Œæˆå‰å‘åå‘è®¡ç®—å&lt;/strong&gt;åˆ‡æ¢EasyScaleThreadsï¼Œæœ€å¤§é™åº¦åœ°å‡å°‘GPUCPUå†…å­˜æ‹·è´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ–¹å¼æœ€å°åŒ–çŠ¶æ€çš„å¤§å°ï¼š
&lt;ul&gt;
&lt;li&gt;iï¼‰å®šä½å½±å“æœ€ç»ˆç²¾åº¦çš„éç¡®å®šæ€§æ¥æºï¼Œæœ€å°åŒ–éœ€è¦è®°å½•çš„å¿…è¦çŠ¶æ€&lt;/li&gt;
&lt;li&gt;iiï¼‰åˆ©ç”¨DLçš„æ•°æ®å¹¶è¡Œè¡Œä¸ºï¼Œæœ€å°åŒ–æ•°æ®äº¤æ¢çš„&lt;strong&gt;å·¥ä½œé›†&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;EasyScaleThreadçš„GPUå†…å­˜ä¸­çš„å·¥ä½œé›†
&lt;ul&gt;
&lt;li&gt;å¯ä»¥åˆ†ä¸ºæ—¶é—´å¼ é‡å’Œæ¿€æ´»ã€æ¨¡å‹å‚æ•°å’Œä¼˜åŒ–çŠ¶æ€ä»¥åŠæ¢¯åº¦ï¼Œ&lt;/li&gt;
&lt;li&gt;å¤„ç†
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œå¯¹äºæ—¶é—´å¼ é‡å’Œæ¿€æ´»ï¼Œå®ƒä»¬åœ¨å‰å‘æ­¥éª¤ä¸­åˆ›å»ºï¼Œåœ¨å®Œæˆæ¢¯åº¦ç”Ÿæˆååœ¨åå‘æ­¥éª¤ä¸­é”€æ¯ã€‚
&lt;ul&gt;
&lt;li&gt;å› æ­¤ï¼Œå®ƒä»¬ä¼šåœ¨å°æ‰¹å¤„ç†ç»“æŸæ—¶è‡ªåŠ¨é‡Šæ”¾å‡ºæ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œå…³äºæ¨¡å‹å‚æ•°å’Œä¼˜åŒ–å™¨çŠ¶æ€ï¼Œæ¯ä¸ªæ•°æ®å¹¶è¡Œå·¥ä½œè€…åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­éƒ½ä¼šä¿ç•™ä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå°æ‰¹å¤„ç†ç»“æŸæ—¶è¿›è¡Œæ›´æ–°ã€‚
&lt;ul&gt;
&lt;li&gt;å› æ­¤ï¼Œåœ¨EasyScaleä¸­ï¼Œå½“åˆ‡æ¢EasyScaleThreadsæ—¶ï¼Œå®ƒä»¬å¯ä»¥è¢«é‡å¤ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œæ¢¯åº¦æ˜¯æ ¹æ®EasyScaleThreadsçš„ä¸åŒæ•°æ®è¾“å…¥è®¡ç®—çš„ï¼Œå› æ­¤ä¸èƒ½é‡å¤ä½¿ç”¨ã€‚ç„¶è€Œï¼Œæ¢¯åº¦é€šå¸¸å¾ˆå°ï¼Œå¹¶ä¸”åªåœ¨minibatchç»“æŸæ—¶çš„åˆ†å¸ƒå¼æ¢¯åº¦åŒæ­¥ä¸­ä½¿ç”¨ã€‚
&lt;ul&gt;
&lt;li&gt;å› æ­¤ï¼Œåœ¨EasyScaleä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶å°†æ¢¯åº¦è¿ç§»åˆ°ä¸»æœºDRAMä¸­ï¼Œå¹¶ä¸ä¸‹ä¸€ä¸ªEasyScaleThreadçš„è®¡ç®—é‡å ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬äº¤æ›¿æ‰§è¡ŒEasyScaleThreadsï¼Œç›´åˆ°æ‰€æœ‰è®¡ç®—å®Œæˆã€‚ä¹‹åï¼Œåˆ†å¸ƒå¼åŒæ­¥è¢«è§¦å‘ï¼Œæ¨¡å‹æ›´æ–°è¢«è¿›è¡Œä¸€æ¬¡ä»¥å®Œæˆå°æ‰¹é‡çš„è®¡ç®—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é‡é…ç½®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“èµ„æºé‡æ–°é…ç½®è¢«è§¦å‘æ—¶ï¼ŒEasyScaleé‡‡ç”¨&lt;strong&gt;æŒ‰éœ€æ£€æŸ¥ç‚¹&lt;/strong&gt;çš„æ–¹å¼æ¥æŒç»­ä¿æŒæœ€å°å’Œå¿…è¦çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥ç‚¹åŒ…å«äº†
&lt;ul&gt;
&lt;li&gt;æ‰€æœ‰EasyScaleThreadsçš„ä¸Šä¸‹æ–‡&lt;/li&gt;
&lt;li&gt;é¢å¤–çš„çŠ¶æ€ï¼ˆåŒ…æ‹¬è®­ç»ƒè¿›åº¦å’Œå…¶ä»–å®ç°ç²¾åº¦ä¸€è‡´æ€§çš„çŠ¶æ€ï¼‰&lt;/li&gt;
&lt;li&gt;æ·±åº¦å­¦ä¹ å‚æ•°ï¼ˆä¾‹å¦‚ï¼Œæ¨¡å‹ã€ä¼˜åŒ–å™¨å’Œå­¦ä¹ ç‡è°ƒåº¦å™¨ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸EasyScaleThreadä¸Šä¸‹æ–‡ä¸åŒçš„æ˜¯
&lt;ul&gt;
&lt;li&gt;é¢å¤–çš„çŠ¶æ€å’Œå‚æ•°åªéœ€è¦ä¸€ä¸ªå‰¯æœ¬ï¼Œå› ä¸ºå®ƒä»¬åœ¨mini-batchç»“æŸæ—¶å¯¹æ‰€æœ‰EasyScaleThreadéƒ½æ˜¯ä¸€æ ·çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¯·æ³¨æ„ï¼Œåœ¨é‡æ–°å¯åŠ¨æ¨¡å‹è®­ç»ƒåï¼Œæ¯ä¸ªGPUçš„EasyScaleè¿è¡Œæ—¶
&lt;ul&gt;
&lt;li&gt;ä¼šåŠ è½½é¢å¤–çš„çŠ¶æ€å’Œæ¨¡å‹å‚æ•°çš„å‰¯æœ¬&lt;/li&gt;
&lt;li&gt;ä»¥åŠé‡æ–°åˆ†å¸ƒçš„EasyScaleThreadsçš„ç›¸åº”ä¸Šä¸‹æ–‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¼˜åŒ–&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºäº†overlapæ•°æ®åŠ è½½å’ŒGPUè®­ç»ƒ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;data loaderåœ¨ç‹¬ç«‹çš„å¤„ç†å™¨ä¸­æ‰§è¡Œï¼ˆå³PyTorchä¸­çš„åŠ è½½å™¨å·¥ä½œè€…è¿›ç¨‹ï¼‰ï¼Œå¼‚æ­¥åŠ è½½è®­ç»ƒæ ·æœ¬å¹¶æ‰§è¡Œæ•°æ®å¢å¼ºï¼ˆä¾‹å¦‚ï¼Œè£å‰ªæˆ–æ—‹è½¬å›¾åƒï¼‰ä»¥å»ºç«‹è®­ç»ƒæ‰¹æ¬¡ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨EasyScaleä¸­ï¼Œæˆ‘ä»¬ä¼˜åŒ–äº†æ‰€æœ‰EasyScaleThreadsä¹‹é—´å…±äº«data loaderï¼Œå› ä¸ºæ¯æ¬¡åªæœ‰ä¸€ä¸ªEasyScaleThreadåœ¨GPUä¸Šè¿›è¡Œè®­ç»ƒã€‚&lt;/li&gt;
&lt;li&gt;å°½ç®¡å…±äº«äº†å¤šä¸ªEasyScaleThreadsï¼Œä½†æ•°æ®æ¶ˆè€—ç‡ä¸ä¸“ç”¨GPUä¸­çš„æ•°æ®æ¶ˆè€—ç‡ç›¸ä¼¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºäº†å®ç°data loaderçš„å…±äº«&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;EasyScaleé‡‡ç”¨äº†ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®é‡‡æ ·å™¨ï¼Œè¯¥é‡‡æ ·å™¨å…±åŒè€ƒè™‘äº†EasyScaleThreadsçš„å…¨å±€indexå’Œæ—¶åˆ†æ¨¡å¼ï¼Œåœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç”Ÿæˆæ•°æ®index&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç„¶åï¼Œè¿™äº›æ•°æ®ç´¢å¼•è¢«æ•°æ®å·¥ä½œè€…æœ‰åºåœ°å¤„ç†&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211102118235.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211102118235.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221110211808582&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221110211808582&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å›¾7æ˜¾ç¤ºäº†å°†ä¸‰ä¸ªæ•°æ®å·¥ä½œè€…å…±äº«ç»™ä¸¤ä¸ªEasyScaleThreadsçš„æƒ…å†µï¼Œå…¶ä¸­EasyScaleThreadçš„æ€»æ•°é‡ä¸ºå››ä¸ªï¼ˆå³å›¾6ä¸­çš„2-GPUè®­ç»ƒï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;EST0å’ŒEST1çš„è®­ç»ƒæ‰¹æ¬¡ä¸ºï¼šå°æ‰¹0çš„b0å’Œb1ï¼Œå°æ‰¹1çš„b4å’Œb5ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸“ç”¨GPUä¸­ä¸ºEasyScaleThread iå¤„ç†æ•°æ®æŒ‡æ•°çš„æ•°æ®å·¥ä½œè€…jçš„çŠ¶æ€è¢«è¡¨ç¤ºä¸ºRi-j&lt;/li&gt;
&lt;li&gt;ä¸ºäº†å¹³è¡¡è´Ÿè½½ï¼ŒEasyScaleä¸­çš„æ•°æ®å·¥ä½œè€…è½®æµä»é˜Ÿåˆ—ç¼“å†²åŒºä¸­è·å–ç»™å®šæ•°æ®æŒ‡æ•°çš„ç›¸åº”çŠ¶æ€ï¼ˆå³Ri-jï¼‰è¿›è¡Œé¢„å¤„ç†ï¼Œå®Œæˆåå°†çŠ¶æ€æäº¤å›é˜Ÿåˆ—ç¼“å†²åŒºä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ³¨æ„ï¼Œç”±äºdata loaderçš„å¼‚æ­¥æ‰§è¡Œ&amp;ndash;&amp;gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;data loaderçš„è¿›ç¨‹é€šå¸¸åœ¨è®­ç»ƒè¿›åº¦ä¹‹å‰&amp;mdash;&amp;gt;&lt;/li&gt;
&lt;li&gt;ä¸ºäº†è·Ÿè¸ªå’Œä¿æŒå¼¹æ€§çš„ä¸€è‡´çŠ¶æ€ï¼Œå¼•å…¥äº†ä¸€ä¸ªæ’é˜Ÿç¼“å†²åŒºæ¥è®°å½•æœªè¢«æ¶ˆè€—çš„å°æ‰¹çš„å¿…è¦çŠ¶æ€&amp;mdash;&amp;gt;&lt;/li&gt;
&lt;li&gt;workerçš„çŠ¶æ€æ ¹æ®è®­ç»ƒè¿›åº¦ä»é˜Ÿåˆ—ç¼“å†²åŒºä¸­å»æ’é˜Ÿï¼Œç„¶ååœ¨æ£€æŸ¥ç‚¹ä¸­è¢«è§†ä¸ºé¢å¤–çŠ¶æ€çš„ä¸€éƒ¨åˆ†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¸ç¡®å®šæ€§çš„æº¯æºä¸è§£å†³&#34;&gt;ä¸ç¡®å®šæ€§çš„æº¯æºä¸è§£å†³&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è‡ªä¸Šè€Œä¸‹çš„æ–¹æ³•æ¥æ¯”è¾ƒEasyScaleå’ŒDDPï¼Œ æˆ‘ä»¬å‘ç°éç¡®å®šæ€§çš„æ ¹æœ¬åŸå› åˆ†æ•£åœ¨è®­ç»ƒç®¡é“çš„å‡ ä¹æ•´ä¸ªè½¯ä»¶æ ˆä¸­ï¼Œä»è®­ç»ƒæ¡†æ¶åˆ°é€šä¿¡ï¼Œå†åˆ°GPUå†…æ ¸ã€‚
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œåœ¨è®­ç»ƒæ¡†æ¶å±‚é¢
&lt;ul&gt;
&lt;li&gt;æ¡†æ¶æœ‰ä¸€äº›çŠ¶æ€éœ€è¦åœ¨æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­ä¿æŒä¸€è‡´ï¼Œä»¥ä¿è¯ç¡®å®šæ€§&lt;/li&gt;
&lt;li&gt;å°½ç®¡æ·±åº¦å­¦ä¹ è®­ç»ƒåœ¨DAGå›¾ä¸­ç»„ç»‡è¿ç®—ç¬¦ï¼ˆä¾‹å¦‚å·ç§¯ã€æ‰¹é‡å½’ä¸€åŒ–ï¼‰ï¼Œä½†ä¸€äº›è¿ç®—ç¬¦éšå«åœ°ä¾èµ–ä¸€äº›çŠ¶æ€ï¼Œè€Œä¸æ˜¯å…¶å‰è¾ˆçš„è¾“å‡ºã€‚ä¾‹å¦‚
&lt;ul&gt;
&lt;li&gt;Dropoutä¾èµ–äºGPUä¸­çš„éšæœºæ•°å‘ç”Ÿå™¨ï¼ˆRNGï¼‰çŠ¶æ€ï¼›&lt;/li&gt;
&lt;li&gt;BatchNormé€šè¿‡è€ƒè™‘å·¥ä½œè€…çš„ç­‰çº§æ¥è·Ÿè¸ªå…¶è¿è¡ŒçŠ¶æ€ï¼›&lt;/li&gt;
&lt;li&gt;æ•°æ®åŠ è½½å™¨å’Œæ•°æ®å¢å¼ºçš„è½¬åŒ–å™¨ä¾èµ–äºPythonã€NumPyå’ŒPyTorchçš„éšæœºçŠ¶æ€ï¼Œç­‰ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒï¼Œåœ¨é€šä¿¡å±‚é¢
&lt;ul&gt;
&lt;li&gt;é€šè¿‡å…¨è¿˜åŸçš„æ¢¯åº¦åŒæ­¥åœ¨èµ„æºå¼¹æ€§ä¸‹æ˜¯ä¸ç¡®å®šçš„&lt;/li&gt;
&lt;li&gt;åœ¨åŒæ­¥è¿‡ç¨‹ä¸­ï¼Œæ¢¯åº¦è¢«èšé›†åˆ°é€šä¿¡æ¡¶ä¸­ï¼Œä»¥ä¼˜åŒ–é€šä¿¡æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;æ¢¯åº¦åˆ°æ¡¶çš„æ˜ å°„æœ€åˆç”±DAGå›¾çš„é™æ€åè½¬æ‹“æ‰‘é¡ºåºå†³å®šã€‚&lt;/li&gt;
&lt;li&gt;å®ƒåœ¨ç¬¬ä¸€ä¸ªå°æ‰¹å¤„ç†ç»“æŸæ—¶æ ¹æ®æ”¶åˆ°çš„æ¢¯åº¦å¼ é‡çš„é¡ºåºè¿›è¡Œé‡æ„ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶è€Œï¼Œåœ¨å¼¹æ€§è®­ç»ƒæœŸé—´ï¼Œå·¥ä½œè€…é‡æ–°å¯åŠ¨å°†é‡å»ºé€šä¿¡æ¸ é“ï¼Œè¿™å¯èƒ½ä¼šå½±å“ç¬¬ä¸€ä¸ªæ¢å¤çš„å°æ‰¹çš„æ¢¯åº¦èšåˆé¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºç¯å½¢Allreduceçš„å®ç°ï¼Œè¿™æœ€ç»ˆä¼šå¼•å…¥éç¡®å®šæ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œåœ¨GPUå†…æ ¸å±‚é¢
&lt;ul&gt;
&lt;li&gt;ä¸ºåŒä¸€è¿ç®—å™¨é€‰æ‹©ä¸åŒçš„å†…æ ¸ä¹Ÿä¼šå¯¼è‡´ç»“æœçš„ç»†å¾®å·®åˆ«&lt;/li&gt;
&lt;li&gt;å¯¼è‡´ä¸åŒå†…æ ¸é€‰æ‹©çš„åŸå› æœ‰ä¸¤ä¸ªã€‚
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆæ˜¯æ¡†æ¶ã€ç¼–è¯‘å™¨æˆ–ä¾›åº”å•†åº“ä¸­çš„ä¸€äº›åŸºäºå‰–æçš„ä¼˜åŒ–ï¼Œåœ¨å°æ‰¹é‡ä¸­åº”ç”¨ä¸åŒçš„å†…æ ¸å®ç°ï¼Œä»¥æ”¶é›†æ€§èƒ½ç»Ÿè®¡æ•°æ®ï¼Œæ‰¾åˆ°æœ€ä½³åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;å¦ä¸€ä¸ªæ˜¯å†…æ ¸çš„å®ç°å¯ä»¥ä¸ç¡¬ä»¶ç›¸å…³ã€‚ä¾‹å¦‚ï¼Œä¸€äº›å†…æ ¸å®ç°æ˜¯åŸºäºæµå¤„ç†å™¨å•å…ƒçš„æ•°é‡ã€ç¡¬ä»¶ç‰¹å®šçš„ä½ä½ç»„ä»¶ç­‰ï¼Œå› æ­¤ä¸èƒ½åº”ç”¨äºæ‰€æœ‰ç±»å‹çš„GPUã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¡®å®šæ€§çš„ç­‰çº§ä¸åº”å¯¹æ–¹æ¡ˆ
&lt;ul&gt;
&lt;li&gt;EasyScaleå®šä¹‰äº†ä¸åŒçº§åˆ«çš„å¼¹æ€§è®­ç»ƒçš„ç¡®å®šæ€§ï¼Œä¸ºç”¨æˆ·æä¾›æ˜ç¡®çš„ä¸€è‡´æ€§ä¿è¯ï¼Œå¹¶è®¾è®¡äº†ç›¸åº”çš„å¤„ç†æ–¹æ³•æ¥å®ç°å®ƒä»¬ã€‚&lt;/li&gt;
&lt;li&gt;D0ï¼šå›ºå®šDoPçš„ç¡®å®šæ€§
&lt;ul&gt;
&lt;li&gt;&amp;ndash;ç”¨å›ºå®šçš„GPUèµ„æºè¿›è¡Œå¤šæ¬¡è®­ç»ƒåº”è¯¥äº§ç”Ÿç›¸åŒçš„æ¨¡å‹&lt;/li&gt;
&lt;li&gt;å®ç°D0éœ€è¦è®­ç»ƒæ¡†æ¶åŠå…¶æ‰€é€‰å†…æ ¸çš„ä¸€è‡´è¡Œä¸ºã€‚
&lt;ul&gt;
&lt;li&gt;å¯¹äºæ¡†æ¶ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒå¼€å§‹æ—¶&lt;strong&gt;å›ºå®šRNGçš„éšæœºç§å­&lt;/strong&gt;ï¼Œå¹¶åœ¨æ•°æ®åŠ è½½å·¥ä½œè€…çŠ¶æ€ä¸­è®°å½•RNGçš„çŠ¶æ€ï¼Œåœ¨ä¸Šä¸‹æ–‡ä¸­è®°å½•EasyScaleThreadsçš„çŠ¶æ€ï¼Œä»¥ä¾¿EasyScaleThreadsè‡ªåŠ¨ä¿æŒçŠ¶æ€ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬è¿˜&lt;strong&gt;ç¦ç”¨äº†æœ€é€‚åˆçš„ç®—æ³•é€‰æ‹©&lt;/strong&gt;ï¼Œå¹¶é€‰æ‹©äº†ç¡®å®šæ€§çš„ç®—æ³•ï¼ˆä¾‹å¦‚ï¼Œæ²¡æœ‰åŸå­æŒ‡ä»¤ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;D1ï¼šå¼¹æ€§ç¡®å®šæ€§
&lt;ul&gt;
&lt;li&gt;&amp;ndash;åœ¨æ£€æŸ¥ç‚¹é‡å¯çš„æƒ…å†µä¸‹ï¼Œç”¨æ•°é‡ä¸æ–­å˜åŒ–çš„åŒè´¨GPUè¿›è¡Œå¤šæ¬¡è®­ç»ƒï¼Œåº”è¯¥äº§ç”Ÿç›¸åŒçš„æ¨¡å‹&lt;/li&gt;
&lt;li&gt;åœ¨D0ä¹‹å¤–ï¼ŒD1éœ€è¦è§£å†³é€šä¿¡å±‚é¢çš„éç¡®å®šæ€§ã€‚
&lt;ul&gt;
&lt;li&gt;ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªEasyScaleThreadåˆ†é…äº†ä¸€ä¸ªå›ºå®šçš„è™šæ‹Ÿé€šä¿¡ç­‰çº§ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬è¿˜å°†å½¢æˆæ¢¯åº¦æ¡¶çš„ç´¢å¼•è®°å½•åˆ°æ£€æŸ¥ç‚¹ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;é‡æ–°å¯åŠ¨åï¼Œåœ¨è®­ç»ƒä¹‹å‰ï¼Œé¦–å…ˆç”¨è®°å½•çš„æŒ‡æ•°é‡å»ºæ¡¶ã€‚&lt;/li&gt;
&lt;li&gt;åé¢çš„é€šä¿¡é€šé“é‡å»ºè¢«ç¦æ­¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;D2ï¼šå¼‚è´¨æ€§ç¡®å®šæ€§
&lt;ul&gt;
&lt;li&gt;&amp;ndash;ç”¨ä¸åŒç±»å‹çš„GPUè¿›è¡Œçš„å¤šæ¬¡è®­ç»ƒåº”è¯¥äº§ç”Ÿç›¸åŒçš„æ¨¡å‹ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†å®ç°D2ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸ç¡¬ä»¶æ— å…³çš„GPUå†…æ ¸ã€‚å…·ä½“æ¥è¯´ï¼Œ
&lt;ul&gt;
&lt;li&gt;1ï¼‰æˆ‘ä»¬ä¿®æ”¹å†…æ ¸å®ç°ï¼ˆä¾‹å¦‚PyTorchä¸­çš„reduceã€dropoutï¼‰ï¼Œé™åˆ¶SMå’Œçº¿ç¨‹çš„æ•°é‡ï¼›&lt;/li&gt;
&lt;li&gt;2ï¼‰æˆ‘ä»¬é€šè¿‡å‘é«˜å±‚è°ƒç”¨ä¼ é€’algo_idï¼Œå¼ºåˆ¶é€‰æ‹©ç›¸åŒçš„ä½å±‚å®ç°ï¼ˆä¾‹å¦‚cuDNNä¸­çš„convolutionï¼Œä»¥åŠcuBLASä¸­çš„gemmã€gemvï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¦‚ä½•ç¡®å®šç¡®å®šæ€§ç­‰çº§
&lt;ul&gt;
&lt;li&gt;åœ¨EasyScaleä¸­ï¼ŒD0å’ŒD1æ˜¯&lt;strong&gt;é»˜è®¤å¯ç”¨&lt;/strong&gt;çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„å®ç°å¯¹å®ç°å®ƒä»¬çš„å¼€é”€å¯ä»¥å¿½ç•¥ä¸è®¡&lt;/li&gt;
&lt;li&gt;å®ç°D2å¯¹äºæŸäº›ç±»å‹çš„æ¨¡å‹ï¼ˆå¦‚CVæ¨¡å‹ï¼‰å¯èƒ½ä¼šæœ‰è¾ƒé«˜çš„å¼€é”€ï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½å¯¹æŸäº›GPUç±»å‹ä½¿ç”¨ä¸€äº›ä¾›åº”å•†ä¼˜åŒ–çš„å†…æ ¸ï¼ˆå¦‚å·ç§¯ï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;EasyScaleå¯ä»¥é€æ˜åœ°åˆ†æä¸€ä¸ªæ¨¡å‹ï¼ˆé€šè¿‡æ‰«æPyTorch nn.Modulesï¼‰ï¼Œå¹¶è¯†åˆ«å®ƒæ˜¯å¦ä¾èµ–äºéœ€è¦ç¡¬ä»¶ç‰¹å®šå†…æ ¸ä¼˜åŒ–çš„è¿ç®—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°±å¯ç”¨D2ï¼Œå…è®¸å®ƒä½¿ç”¨å¼‚æ„çš„GPUï¼Œå¦åˆ™å°±é™åˆ¶å®ƒä½¿ç”¨åŒæ„çš„GPUã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è°ƒåº¦åŸåˆ™&#34;&gt;è°ƒåº¦åŸåˆ™&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·åœ¨æäº¤EasyScaleä½œä¸šæ—¶
&lt;ul&gt;
&lt;li&gt;å¯ä»¥æŒ‡å®šä¸€ä¸ªmaxPï¼šå³è¦å¯åŠ¨çš„æœ€å¤§å·¥ä½œè€…æ•°é‡ï¼Œè¿™ä¹Ÿæ˜¯ä½œä¸šæ‰§è¡Œè¿‡ç¨‹ä¸­EasyScaleThreadsçš„æ•°é‡&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·è¿˜å¯ä»¥æŒ‡å®šä¸€ä¸ªminPï¼ˆ&amp;gt;=0ï¼‰ï¼Œè¡¨ç¤ºæ‰€éœ€çš„ä¿è¯GPU&lt;/li&gt;
&lt;li&gt;è®¾ç½®minP == maxPæ„å‘³ç€ä½œä¸šå°†å›åˆ°ä½¿ç”¨ä¸DDPç›¸åŒçš„å›ºå®šDoP&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å°ç»“ï¼šESTiæŠ½è±¡ -&amp;gt; ç¡®å®šæ€§å¤„ç† -&amp;gt; è°ƒåº¦EST
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;EasyScaleThreadsï¼ˆESTï¼‰çš„æŠ½è±¡&lt;/strong&gt;å°†DLè®­ç»ƒå’Œåº•å±‚GPUèµ„æºè§£è€¦ï¼Œå› æ­¤ä¸DDPå…¼å®¹çš„è®­ç»ƒä½œä¸šå¯ä»¥æŒç»­åœ°åœ¨åŒè´¨GPUçš„å¼¹æ€§æ•°é‡ä¸Šè¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡®å®šæ€§å¤„ç†&lt;/strong&gt;å®ç°äº†å¼¹æ€§è®­ç»ƒä¸‹çš„ç²¾åº¦ä¸€è‡´æ€§ï¼Œå³ä½¿æ˜¯åœ¨å¼‚æ„GPUä¸Š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨&lt;strong&gt;å¼‚æ„GPUä¸Šè°ƒåº¦EST&lt;/strong&gt;çš„å…³é”®æŒ‘æˆ˜åœ¨äºè®¡ç®—èƒ½åŠ›çš„å¼‚è´¨æ€§å’ŒGPUå†…å­˜çš„å¼‚è´¨æ€§ã€‚
&lt;ul&gt;
&lt;li&gt;Polluxå’ŒVirtualFlow
&lt;ul&gt;
&lt;li&gt;é‡‡ç”¨ä¸ºæ¯ä¸€ç§GPUå•ç‹¬æ‰©å±•æ‰¹æ¬¡å¤§å°çš„æ–¹æ³•&lt;/li&gt;
&lt;li&gt;å¯¹äºEasyScaleæ¥è¯´æ˜¯å®Œå…¨ä¸å¯æ¥å—çš„ï¼Œå› ä¸ºå®ƒæ”¹å˜äº†å›ºæœ‰çš„è®­ç»ƒè¶…å‚æ•°ï¼Œä»è€Œç ´åäº†ç²¾åº¦çš„ä¸€è‡´æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ESTæ¶ˆè€—å›ºå®šè®¡ç®—èƒ½åŠ›ä¸å›ºå®šå†…å­˜æ¶ˆè€—
&lt;ul&gt;
&lt;li&gt;åœ¨ESTæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªESTæ¶ˆè€—&lt;strong&gt;å›ºå®šçš„è®¡ç®—èƒ½åŠ›&lt;/strong&gt;ï¼Œå…¶ä¸­GPUçš„å¾®æ¶æ„ç‰¹å¾ï¼ˆå³SMæ•°é‡å’Œç¼“å­˜å¤§å°ï¼‰å†³å®šäº†ç†è®ºèƒ½åŠ›ã€‚å…·æœ‰è¾ƒé«˜è®¡ç®—èƒ½åŠ›çš„GPUå¯ä»¥åœ¨ä¸€å®šæ—¶é—´å†…æ‰§è¡Œæ›´å¤šçš„EST&lt;/li&gt;
&lt;li&gt;è€Œæ¯ä¸ªESTéƒ½æœ‰&lt;strong&gt;å›ºå®šå¤§å°çš„GPUå†…å­˜&lt;/strong&gt;ä½¿ç”¨å³°å€¼ã€‚æ­¤å¤–ï¼Œç”±äºåŒä¸€GPUæ‰§è¡Œå™¨ä¸­çš„ESTçš„å†…å­˜æ˜¯å®Œå…¨é‡å¤ä½¿ç”¨/å…±äº«çš„ï¼Œæ‰§è¡Œå™¨çš„å†…å­˜ç”¨é‡å¯ä»¥ä»£è¡¨ESTçš„å†…å­˜ç”¨é‡&lt;/li&gt;
&lt;li&gt;ä¸ºç®€æ´èµ·è§ï¼Œæˆ‘ä»¬å°†å›ºå®šçš„è®¡ç®—èƒ½åŠ›å’Œå†…å­˜ç”¨é‡åˆ†åˆ«å®šä¹‰ä¸ºè®¡ç®—å•å…ƒï¼ˆCUï¼‰å’Œå†…å­˜å•å…ƒï¼ˆMUï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¤æ‚çš„åˆ†æè§„åˆ’ï¼šé¿å…å› ä¸ºä¸¥é‡çš„è´Ÿè½½ä¸å¹³è¡¡è€Œé€ æˆé‡å¤§çš„æ€§èƒ½æµªè´¹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¼‚æ„æ„ŸçŸ¥çš„estè§„åˆ’&#34;&gt;å¼‚æ„æ„ŸçŸ¥çš„ESTè§„åˆ’&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Planning CUs&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†é…ç­–ç•¥
&lt;ul&gt;
&lt;li&gt;å½“åˆ†é…çš„GPUæ˜¯åŒè´¨çš„ï¼Œå¹¶ä¸”æ•°é‡æ˜¯maxPçš„ä¸€ä¸ªå› ç´ æ—¶ï¼Œåœ¨è¿™äº›GPUä¸Š&lt;strong&gt;å‡åŒ€åœ°åˆ†é…CU&lt;/strong&gt;ï¼Œå› ä¸ºæ‰€æœ‰CUéƒ½æœ‰ç›¸åŒçš„è®¡ç®—æ—¶é—´&lt;/li&gt;
&lt;li&gt;åœ¨å¼‚æ„GPUçš„æƒ…å†µä¸‹ï¼Œéœ€è¦&lt;strong&gt;æ ¹æ®GPUçš„è®¡ç®—èƒ½åŠ›æ¥åˆ†é…&lt;/strong&gt;CUä»¥è¾¾åˆ°å¹³è¡¡ï¼Œå¹¶æœ€å¤šæ¶ˆé™¤ç©ºé—²å‘¨æœŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªæ–°çš„æŒ‡æ ‡ï¼Œå«åšæµªè´¹ï¼Œ
&lt;ul&gt;
&lt;li&gt;å³ç”±äºCUçš„æ•´æ•°å€å’ŒGPUçš„å®é™…è¿ç»­èƒ½åŠ›ä¸åŒ¹é…è€Œæµªè´¹çš„è®¡ç®—èƒ½åŠ›ï¼Œæˆ–è€…è¯´æ˜¯è´Ÿè½½ä¸å¹³è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;æµªè´¹ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼š
&lt;ul&gt;
&lt;li&gt;âˆ‚å¼‚æ„GPUä¹‹é—´çš„è´Ÿè½½ä¸å¹³è¡¡ï¼Œæ˜¯ç”±äºç”¨CUçš„æ•´æ•°å€ä¸å‡†ç¡®åœ°é€¼è¿‘è¿ç»­çš„å®é™…è®¡ç®—èƒ½åŠ›é€ æˆçš„ï¼›&lt;/li&gt;
&lt;li&gt;âˆ‘åŒæ„GPUä¹‹é—´çš„è´Ÿè½½ä¸å¹³è¡¡ï¼Œæ˜¯ç”±äºæ²¡æœ‰è¶³å¤Ÿçš„CUåˆ†é…æ¥å……åˆ†åˆ©ç”¨æ‰€æœ‰çš„GPUï¼Œå› ä¸ºCUçš„æ€»é‡è¢«maxPæ‰€é™åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªåˆ†ææ¨¡å‹æ¥é‡åŒ–æµªè´¹ã€‚
&lt;ul&gt;
&lt;li&gt;ç¬¦å·è¡¨ç¤º
&lt;ul&gt;
&lt;li&gt;å¯ç”¨çš„GPUæ•°é‡è¡¨ç¤ºä¸ºNiï¼Œå…¶ä¸­ä¸‹æ ‡iä»£è¡¨GPUç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;ä¸å·¥ä½œè´Ÿè½½ç›¸å…³çš„è®¡ç®—èƒ½åŠ›Ciè¢«ä¼°è®¡ä¸ºæ¯ç§’çš„å°æ‰¹å¤„ç†æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;åˆ†é…ç»™GPUç±»å‹içš„CUçš„æœ€å¤§æ•°ç›®è¢«è¡¨ç¤ºä¸ºAiã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211122032034.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211122032034.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221112203217230&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221112203217230&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;ä¸ºäº†ç¡®ä¿æ‰€æœ‰EasyScaleThreadsè¢«æ‰§è¡Œï¼Œå¼‚æ„GPUä¸Šçš„æœ€å¤§CUæ€»æ•°ï¼ˆCU_capacityï¼‰åº”è¯¥å¤§äºæˆ–ç­‰äºmaxPï¼ˆå…¬å¼1aï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è¿‡è½½ç³»æ•°foverloadä»£è¡¨æ‰€è¯·æ±‚çš„å¼‚æ„GPUçš„æœ€å¤§è¿‡è½½ï¼Œå…¶ä¸­è¿‡è½½è¢«å®šä¹‰ä¸ºæ¯ä¸ªè®¡ç®—èƒ½åŠ›çš„CUï¼ˆç­‰å¼1bï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€ä¸ªGPUç±»å‹æ‰¿æ‹…äº†å¤ªå¤šçš„CUï¼Œå®ƒå°±ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œå¹¶ç”±äºSync-SGDè€Œæ‹–æ…¢å…¶ä»–GPUçš„é€Ÿåº¦ã€‚å› æ­¤ï¼Œæµªè´¹è¢«è¡¨è¿°ä¸ºï¼šâˆ‚Ciå’ŒAiä¹‹é—´çš„å·®è·æŒ‰foverloadç¼©æ”¾ï¼Œâˆ‘è¶…é¢é…ç½®çš„CU_capacityæŒ‰foverloadç¼©æ”¾ï¼ˆå…¬å¼1cï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†è¿›ä¸€æ­¥åŒºåˆ†å½“å‰Niã€Ciå’ŒAiä¸‹çš„CUåˆ†é…æ•ˆç‡ï¼Œå¾—å‡ºäº†å½’ä¸€åŒ–çš„æµªè´¹ç™¾åˆ†æ¯”ï¼ˆå…¬å¼1dï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è¿˜å¾—å‡ºäº†ä¼°è®¡æ€§èƒ½ï¼ˆç­‰å¼1eï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Planning MUs&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¼‚æ„GPUä¹‹é—´çš„å†…å­˜å®¹é‡ä¹Ÿå­˜åœ¨å¼‚è´¨æ€§&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†MUåˆ†é…ç»™æ¯ä¸ªGPUçš„å•ä¸ªæ‰§è¡Œå™¨å¯ä»¥æœ€å¤§é™åº¦åœ°å‡å°‘æ•´ä½“å†…å­˜å ç”¨ï¼Œå› ä¸ºEasyScaleThreadså¼•å…¥çš„å†…å­˜å¼€é”€å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚&lt;/li&gt;
&lt;li&gt;è€Œä¸”å®ƒä»¬çš„MUå¯ä»¥å®Œå…¨é‡å¤ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œæ‰€æœ‰çš„GPUéƒ½æ˜¾ç¤ºå‡ºä¸MUç›¸åŒçš„å³°å€¼å†…å­˜ä½¿ç”¨é‡ï¼Œå¯¼è‡´å…·æœ‰è¾ƒå¤§å†…å­˜å®¹é‡çš„GPUå‡ºç°é—²ç½®å†…å­˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ª&lt;strong&gt;å¤šæ‰§è¡Œå™¨&lt;/strong&gt;çš„è®¾è®¡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å®ƒå…è®¸åœ¨GPUä¸Šåˆ†é…&lt;strong&gt;ä¸€ä¸ªä»¥ä¸Š&lt;/strong&gt;çš„æ‰§è¡Œå™¨ï¼Œè¿™æ ·å°±å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªESTã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…·æœ‰è¾ƒå¤§å†…å­˜çš„GPUå¯ä»¥&lt;strong&gt;æƒè¡¡&lt;/strong&gt;æ‰§è¡Œå™¨æ•°é‡å’Œæ¯ä¸ªæ‰§è¡Œå™¨çš„ESTæ•°é‡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒæ—¶ä¿æŒ   ï¼ˆ#æ‰§è¡Œå™¨   Ã—   #ESTï¼‰  ä¸å˜&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œåœ¨åˆ†é…äº†ä¸¤ä¸ªESTçš„æƒ…å†µä¸‹ï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼š
&lt;ul&gt;
&lt;li&gt;aï¼‰&amp;lt;1æ‰§è¡Œå™¨Ã—2EST&amp;gt;&lt;/li&gt;
&lt;li&gt;bï¼‰&amp;lt;2æ‰§è¡Œå™¨Ã—1EST&amp;gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®ƒæ‹“å®½äº†é«˜æ•ˆåœºæ™¯ï¼Œå³è¿è¡Œæ›´å¤šçš„æ‰§è¡Œå™¨ä¸ä¼šè¶…è¿‡GPUèµ„æºï¼ˆSMæ ¸ã€å†…å­˜ï¼‰ï¼Œå³ä½¿è€ƒè™‘åˆ°å¹²æ‰°ï¼Œä»ç„¶æœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¨èæ¨¡å‹ï¼ˆå¦‚Wide&amp;amp;Deepï¼‰çš„è®­ç»ƒé€šå¸¸æ˜¾ç¤ºå‡ºå¯¹GPUè®¡ç®—èƒ½åŠ›çš„åˆ©ç”¨ä¸è¶³ï¼Œé€šå¸¸ä½äº50%ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ†é…å¤šä¸ªæ‰§è¡Œå™¨å¯ä»¥åˆ©ç”¨å‰©ä½™çš„è®¡ç®—èƒ½åŠ›ï¼Œè€Œä¸”æ‰§è¡Œå™¨ä¹‹é—´ä¸ä¼šäº§ç”Ÿä¸åˆ©å½±å“ï¼Œä»è€Œæé«˜ç»¼åˆååé‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ä»¬è¿˜å¯¹ï¼ˆç­‰å¼1ï¼‰è¿›è¡Œäº†è°ƒæ•´ï¼Œä»¥å¯¹å¤šä¸ªæ‰§è¡Œå™¨çš„æµªè´¹è¿›è¡Œå»ºæ¨¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸å·¥ä½œè´Ÿè½½ç›¸å…³çš„è®¡ç®—èƒ½åŠ›Ciè¢«MCi = m Ã— Ci Ã— Iiæ‰€å–ä»£ï¼Œè¡¨ç¤ºmä¸ªæ‰§è¡Œå™¨çš„æ•´ä½“èƒ½åŠ›ï¼Œå…¶ä¸­åŒ…æ‹¬å¹²æ‰°Iiã€‚&lt;/li&gt;
&lt;li&gt;åˆ†é…ç»™GPU Aiçš„CUæ•°é‡ç”±MAi = m Ã— Aiå–ä»£ï¼Œä»£è¡¨mä¸ªæ‰§è¡Œå™¨çš„æ€»CUæ•°é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;eeayscale-è°ƒåº¦å™¨&#34;&gt;EeayScale è°ƒåº¦å™¨&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚å›¾9æ‰€ç¤ºï¼ŒEasyScaleé‡‡ç”¨äº†ä¸€ä¸ªåˆ†å±‚è°ƒåº¦æ¶æ„ã€‚
&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªä½œä¸šéƒ½åŒ…å«ä¸€ä¸ª&lt;strong&gt;ä½œä¸šå†…çš„è°ƒåº¦å™¨ï¼Œåä¸ºAIMaster&lt;/strong&gt;ï¼Œå®ƒè´Ÿè´£ï¼š
&lt;ul&gt;
&lt;li&gt;aï¼‰åœ¨åŒè´¨å’Œå¼‚è´¨GPUä¹‹é—´åˆ†é…EasyScaleThreadsï¼Œå°½é‡å‡å°‘æµªè´¹ï¼Œä½¿èµ„æºåˆ©ç”¨ç‡æœ€å¤§åŒ–ï¼›&lt;/li&gt;
&lt;li&gt;bï¼‰é€šè¿‡ä¼°è®¡æ½œåœ¨çš„é€Ÿåº¦æå‡ï¼Œæå‡ºæ‰€éœ€çš„èµ„æºè¿›è¡Œæ‰©å±•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ­¤å¤–ï¼Œä¸€ä¸ª&lt;strong&gt;é›†ç¾¤è°ƒåº¦å™¨&lt;/strong&gt;ä»¥å…¨å±€æ¨¡å¼è¡Œäº‹ï¼Œåè°ƒä½œä¸šä¹‹é—´çš„èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211102146741.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211102146741.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221110214614664&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221110214614664&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Intra-Job scheduler
&lt;ul&gt;
&lt;li&gt;åŸºæœ¬èŒè´£ï¼šåœ¨ç»™å®šçš„GPUä¸‹ç”ŸæˆEST&lt;strong&gt;åˆ†é…é…ç½®&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œåœ¨å½“å‰å¯ç”¨çš„GPUä¸‹ï¼Œå®ƒé€‰æ‹©ä¼°è®¡ååé‡æœ€é«˜çš„é…ç½®ï¼Œå¹¶ç›¸åº”åˆ†é…ESTã€‚&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œå®ƒè¯•å›¾ç”¨ä¸€ä¸ªå¢é‡çš„GPUæ¥æ‰©å±•ï¼Œä»è€Œäº§ç”Ÿæ–°çš„é…ç½®ï¼Œå¹¶é€‰æ‹©top-Kçš„é…ç½®ä½œä¸ºæäº¤ç»™é›†ç¾¤è°ƒåº¦å™¨çš„å»ºè®®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é…ç½®ç»„æˆä¸çº¦æŸ
&lt;ul&gt;
&lt;li&gt;ç”±&amp;lt;nums, executors, threads, waste, perf&amp;gt;ç»„æˆ
&lt;ul&gt;
&lt;li&gt;nums, executors, threadsæ˜¯å…·æœ‰ç›¸åŒé•¿åº¦çš„GPUç±»å‹çš„æ•°ç»„ï¼Œåˆ†åˆ«ä»£è¡¨GPUæ•°é‡ã€æ‰§è¡Œå™¨æ•°é‡å’Œæ¯ä¸ªæ‰§è¡Œå™¨çš„ESTæ•°é‡&lt;/li&gt;
&lt;li&gt;wasteå’Œperfä»£è¡¨è¯¥é…ç½®é€šè¿‡åˆ†ææ¨¡å‹ä¼°è®¡çš„æµªè´¹å’Œæ€§èƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿™äº›é…ç½®åº”è¯¥æ»¡è¶³é›†ç¾¤æ€»èµ„æºã€minPã€maxPå’Œå½’ä¸€åŒ–æµªè´¹çš„é˜ˆå€¼ï¼ˆå®é™…ä¸º30%ï¼‰çš„çº¦æŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¯»æ‰¾å¯ç”¨é…ç½®
&lt;ul&gt;
&lt;li&gt;ä¸åŒçš„å·¥ä½œè´Ÿè½½ä½¿ç”¨ä¸åŒGPUçš„ååé‡æœ‰å·®å¼‚ï¼Œä½†åœ¨æ²¡æœ‰å®é™…æ‰§è¡Œçš„æƒ…å†µä¸‹å¾ˆéš¾é¢„æµ‹&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼ŒAIMasteræ¨¡å—ä½¿ç”¨ä½œä¸šçš„&lt;strong&gt;è¿è¡Œæ—¶æ‰§è¡Œ&lt;/strong&gt;ç»Ÿè®¡æ•°æ®æ¥äº†è§£&lt;strong&gt;å·¥ä½œè´Ÿè½½å·®å¼‚&lt;/strong&gt;ï¼Œå¹¶ç¡®å®šæ¯ä¸ªGPUç±»å‹içš„å·¥ä½œè´Ÿè½½ç›¸å…³&lt;strong&gt;è®¡ç®—èƒ½åŠ›Ci&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é‰´äºæ¯ä¸ªGPUç±»å‹içš„å‰–æè®¡ç®—èƒ½åŠ›Ciï¼Œæˆ‘ä»¬è®¡ç®—å®ƒä»¬çš„æ•´æ•°è¿‘ä¼¼å€¼ï¼ˆä¾‹å¦‚ï¼Œceil(tÃ—Ci), floor(tÃ—Ci)ï¼‰ï¼Œå‡è®¾æ¯ä¸ªèƒ½åŠ›æ‰¿æ‹…kä¸ªESTï¼Œå¹¶å½¢æˆå®ƒä»¬çš„ç»„åˆ&lt;/li&gt;
&lt;li&gt;ç„¶åæˆ‘ä»¬éå†è¿™äº›ç»„åˆï¼Œæ‰¾åˆ°å¯ç”¨çš„é…ç½®ã€‚å¯¹äºå…·æœ‰ç›¸åŒ&amp;lt;æ•°ã€æ‰§è¡Œå™¨ã€çº¿ç¨‹&amp;gt;çš„é…ç½®ï¼Œé€‰æ‹©å…·æœ‰æœ€å°æµªè´¹çš„é…ç½®ï¼Œå…¶ä»–é…ç½®åˆ™è¢«è¿‡æ»¤æ‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é…ç½®å›é€€
&lt;ul&gt;
&lt;li&gt;å¯¹æµªè´¹çš„ä¼°è®¡æœ‰æ—¶å¯èƒ½æ˜¯ä¸æ­£ç¡®çš„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ›´å·®çš„è®­ç»ƒæ€§èƒ½&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦åœ¨é‡æ–°é…ç½®åè§‚å¯Ÿåˆ°æ€§èƒ½ä¸‹é™ï¼Œæˆ‘ä»¬å°±ä¼šé€€å›åˆ°ä½¿ç”¨ä»¥å‰çš„èµ„æºå¹¶é‡Šæ”¾æ–°åˆ†é…çš„èµ„æº&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Inter-job cluster scheduler
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å®ƒé€šè¿‡è€ƒè™‘&lt;strong&gt;èµ„æºå¯ç”¨æ€§&lt;/strong&gt;å’Œ&lt;strong&gt;ææ¡ˆçš„ä¼˜å…ˆçº§&lt;/strong&gt;æ¥å“åº”AIMasterææ¡ˆã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºäº†æé«˜é›†ç¾¤çš„æ•´ä½“åˆ©ç”¨ç‡å’Œèšåˆä½œä¸šçš„ååé‡&lt;/li&gt;
&lt;li&gt;å®ƒé‡‡ç”¨äº†ä¸€ç§å¯å‘å¼ç®—æ³•ï¼Œå€¾å‘äºæ¥å—&lt;strong&gt;æ¯ä¸ªGPUå…·æœ‰è¾ƒé«˜é€Ÿåº¦&lt;/strong&gt;çš„å»ºè®®ï¼Œå¦‚ç®—æ³•1æ‰€ç¤ºã€‚
&lt;ul&gt;
&lt;li&gt;ä½œä¸šé—´è°ƒåº¦å™¨æŒ‰ç…§æŠ¥å‘Šçš„&lt;strong&gt;å¹³å‡åŠ é€Ÿæ¯”&lt;/strong&gt;å¯¹å»ºè®®è¿›è¡Œé™åºæ’åºã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œå®ƒå¯¹è¿™äº›å»ºè®®è¿›è¡Œå¾ªç¯ï¼Œå¼€å§‹æ¥å—æœ€é«˜çš„å»ºè®®ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå¤šä¸ªå»ºè®®å¼•å…¥äº†ç›¸åŒçš„å¹³å‡GPUåŠ é€Ÿï¼Œæˆ‘ä»¬çš„è°ƒåº¦å™¨ä¼š&lt;strong&gt;ä¼˜å…ˆè€ƒè™‘æ‹¥æœ‰æ›´å¤šGPU&lt;/strong&gt;çš„å»ºè®®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211122105011.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211122105011.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221112210504940&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221112210504940&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é›†ç¾¤è°ƒåº¦å™¨å…è®¸å¼¹æ€§ä½œä¸šæœ€å¥½åœ°&lt;strong&gt;åˆ©ç”¨ç©ºé—²èµ„æº&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿™äº›èµ„æºé€šå¸¸å±äºå…¶ä»–äººï¼Œä½†æš‚æ—¶æ˜¯é—²ç½®çš„ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶è€Œï¼Œå¦‚æœè¿™äº›GPUéœ€è¦è¿”å›ï¼Œå¯èƒ½ä¼šè§¦å‘æŠ¢å ã€‚
&lt;ul&gt;
&lt;li&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé›†ç¾¤è°ƒåº¦å™¨å°†å°è¯•æŠŠä¸æŠ¢å çš„GPUç›¸åŒçš„GPUåˆ†é…ç»™å¼¹æ€§ä½œä¸šã€‚&lt;/li&gt;
&lt;li&gt;å½“åˆ†é…è¶…æ—¶æ—¶ï¼ŒEasyScaleä½œä¸šä¼šå›è½åˆ°åˆ©ç”¨å®ƒç›®å‰æ‹¥æœ‰çš„å¯ç”¨GPUã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;implementation&#34;&gt;Implementation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;DLT ä½œä¸šåœ¨å…·æœ‰ EasyScale å®ç°çš„ Docker å®¹å™¨ä¸­è¿è¡Œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ Kubernetes ä¸Šå®ç°äº†ä¸€ä¸ªåŸå‹è‡ªå®šä¹‰é›†ç¾¤è°ƒåº¦å™¨ä»¥è¿›è¡Œè¯„ä¼°ã€‚&lt;/li&gt;
&lt;li&gt;EasyScale åœ¨æˆ‘ä»¬å†…éƒ¨çš„ GPU é›†ç¾¤è°ƒåº¦å™¨ä¸­å¾—åˆ°äº†å……åˆ†çš„å®ç°ï¼Œå®ƒæ˜¯ Kubernetes è°ƒåº¦å™¨çš„ä¸€ä¸ªä¼˜åŒ–ç‰ˆæœ¬ï¼Œå¯ä»¥ä¸ºæ—¥å¸¸çš„ GPU ç”Ÿäº§ä»»åŠ¡æä¾›æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DL æ¡†æ¶ä¸­ EasyScale çš„å®ç°ä¸ PyTorch 1.8 LTS å…¼å®¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®ƒéœ€è¦å¤§çº¦1,200è¡Œ Python ä»£ç å’Œ2,000è¡Œ PyTorch ä¸­çš„ C + + ä¿®æ”¹ä»£ç ï¼Œä»¥åŠä¸€ä¸ªåŸºäº PyTorch å®ç°çš„æ’ä»¶åº“ã€‚&lt;/li&gt;
&lt;li&gt;PyTorch æ¡†æ¶çš„ C + + å®ç°åŒ…æ‹¬ä¸€ä¸ªæ”¯æŒå¼¹æ€§çš„åˆ†å¸ƒå¼æ•°æ®å¹¶è¡Œé€šä¿¡åº“ ElasticDDPï¼Œå®ƒå¯ä»¥æ”¯æŒå¤šä¸ª EasyScaleThread ä¹‹é—´çš„é€šä¿¡ï¼Œä»¥å…¨é¢å‡å°‘æ¢¯åº¦ï¼Œå¹¶åœ¨è§¦å‘èµ„æºå¼¹æ€§æ—¶åœ¨é‡æ–°å¯åŠ¨ä»»åŠ¡æ—¶å§‹ç»ˆå¦‚ä¸€åœ°æ„å»ºé€šä¿¡æ¡¶ã€‚&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œæµæ§åˆ¶å’Œä¸Šä¸‹æ–‡åˆ‡æ¢ä½œä¸º PyTorch çš„é™„åŠ ç»„ä»¶åœ¨ Python æ¨¡å—ä¸­å®ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®ç°äº† AIMaster&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºäº†å†³å®šè´Ÿè½½å¹³è¡¡åˆ†é…å¹¶æ§åˆ¶ä½œä¸šä»¥ä½¿ç”¨æ›´å¤šçš„ GPU è¿›è¡Œæ‰©å±•&lt;/li&gt;
&lt;li&gt;ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ã€‚
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ª rpc åº“æ”¶é›† EasyScale è¿è¡Œæ—¶æŠ¥å‘Šçš„æ€§èƒ½åˆ†æã€‚&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œæˆ‘ä»¬æå‡ºèµ„æºå»ºè®®å¹¶ç›‘è§†çŠ¶æ€ï¼Œä»è€Œé€šè¿‡ Kubernetes Python å‘Šå¯†è€…äº†è§£èµ„æºåˆ†é…è¶…æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰ï¼Œå®ç°ç­–ç•¥æ§åˆ¶å™¨æ¥è®¡ç®—å¢é‡èµ„æºè¯·æ±‚å¹¶å°†å…¶æäº¤ç»™é›†ç¾¤è°ƒåº¦å™¨ã€‚ä¸ºäº†æ”¯æŒèµ„æºå¼¹æ€§æ—¶çš„æŒç»­å·¥ä½œåŸ¹è®­ï¼Œæˆ‘ä»¬é‡‡ç”¨æŒ‰éœ€æ£€æŸ¥ç‚¹è®°å½•ç”¨æˆ·å®šä¹‰çš„æ¨¡å‹ï¼Œæ—¶ä»£å’Œå°æ‰¹é‡çŠ¶æ€ä»¥åŠåŸºæœ¬ä¸Šä¸‹æ–‡åˆ‡æ¢çŠ¶æ€&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ªåŠè‡ªåŠ¨å‰–æå·¥å…·æ¥æ‰§è¡Œå¼ é‡ä¹‹é—´çš„æŒ‰ä½æ¯”è¾ƒ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»è€Œæ‰¾åˆ°è¿ç®—ç¬¦ä¸ä¸€è‡´çš„ç»“æœï¼Œè¯†åˆ«èµ„æºå¼¹æ€§ä¸­ä¸ç¡®å®šæ€§çš„æ¥æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ã€è®ºæ–‡ç¬”è®°ã€‘Gandivaè®ºæ–‡é˜…è¯»ç¬”è®°</title>
        <link>https://tweakzx.github.io/p/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0gandiva%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Tue, 08 Nov 2022 09:59:52 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0gandiva%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;img src="https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211081933118.png" alt="Featured image of post ã€è®ºæ–‡ç¬”è®°ã€‘Gandivaè®ºæ–‡é˜…è¯»ç¬”è®°" /&gt;&lt;h1 id=&#34;gandiva-è®ºæ–‡é˜…è¯»ç¬”è®°&#34;&gt;Gandiva è®ºæ–‡é˜…è¯»ç¬”è®°&lt;/h1&gt;
&lt;h2 id=&#34;abstract&#34;&gt;Abstract&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Gandiva: ä¸€ä¸ªé›†ç¾¤è°ƒåº¦æ¡†æ¶ï¼Œä½¿ç”¨ç‰¹å®šé¢†åŸŸçŸ¥è¯†ï¼Œä¼˜åŒ–äº†GPUé›†ç¾¤è®­ç»ƒæ·±åº¦å­¦ä¹ æ¨¡å‹çš„å»¶è¿Ÿä¸æ•ˆç‡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ·±åº¦å­¦ä¹ jobçš„ç‰¹å¾&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1ï¼‰åé¦ˆé©±åŠ¨çš„æ¢ç´¢ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªç”¨æˆ·ç»å¸¸è¿è¡Œä¸€ç»„ä½œä¸š(æˆ– a multi-job)æ¥è·å¾—ç‰¹å®šä»»åŠ¡çš„æœ€ä½³ç»“æœ&lt;/li&gt;
&lt;li&gt;å¹¶ä½¿ç”¨å…³äºå‡†ç¡®æ€§çš„æ—©æœŸåé¦ˆæ¥åŠ¨æ€ä¼˜å…ˆè€ƒè™‘æˆ–æ€æ­»ä¸€ä¸ªä½œä¸šå­é›†&lt;/li&gt;
&lt;li&gt;åŒæ­¥å‘ç”Ÿçš„å¤šä¸ªä½œä¸šçš„æ—©æœŸåé¦ˆæ˜¯è‡³å…³é‡è¦çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2ï¼‰æ·±åº¦å­¦ä¹ å·¥ä½œåœ¨èµ„æºä½¿ç”¨æ–¹é¢çš„&lt;strong&gt;å¼‚æ„&lt;/strong&gt;ï¼Œè¿™ä½¿å¾—å®ƒå¾ˆéš¾å®ç°æœ€é€‚åˆçš„å…ˆéªŒã€‚&lt;/li&gt;
&lt;li&gt;3ï¼‰ä½œä¸šå†…å¯é¢„æµ‹æ€§ï¼šå› ä¸ºä½œä¸šä¼šé‡å¤æ‰§è¡Œå«åšmini-batchçš„è¿­ä»£
&lt;ul&gt;
&lt;li&gt;Gandivaåˆ©ç”¨è¿™ä¸ªç‰¹å¾è§£å†³äº†1ï¼‰2ï¼‰ä¸¤ä¸ªé—®é¢˜&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨å¯é¢„æµ‹æ€§å¯¹GPUè¿›è¡Œå¤šä¸ªjobé—´è¿›è¡Œæ—¶åˆ†å¤ç”¨ï¼Œ è¿™æä¾›äº†ä½å»¶è¿Ÿ&lt;/li&gt;
&lt;li&gt;è¿™ç§é¢„æµ‹æ€§è¿˜å¯ä»¥ç”¨äºå†…çœjobæ€§èƒ½å¹¶åŠ¨æ€è¿ç§»åˆ°æœ€åˆé€‚çš„GPUä¸Šï¼Œæé«˜äº†é›†ç¾¤æ•ˆç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªåŸå‹å®ç°å’Œå¾®åŸºå‡†æµ‹è¯•è¡¨æ˜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gandiva å¯ä»¥åœ¨æ·±åº¦å­¦ä¹ è¿‡ç¨‹&lt;strong&gt;åŠ å¿«è¶…å‚æ•°æœç´¢&lt;/strong&gt;ä¸€ä¸ªæ•°é‡çº§&lt;/li&gt;
&lt;li&gt;å¹¶é€šè¿‡&lt;strong&gt;é€æ˜è¿ç§»&lt;/strong&gt;å’Œ&lt;strong&gt;jobæ—¶åˆ†&lt;/strong&gt;å®ç°æ›´å¥½çš„åˆ©ç”¨ï¼Œä½¿jobä¸èµ„æºçš„æ›´å¥½åœ°åŒ¹é…ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸€ä¸ªè¿è¡Œåœ¨180-GPU é›†ç¾¤ä¸­çš„å®é™…å·¥ä½œè´Ÿè½½ä¸­ï¼ŒGandiva å°†é›†ç¾¤çš„æ€»åˆ©ç”¨ç‡æé«˜äº†26%&lt;/li&gt;
&lt;li&gt;è¿™ä¸ºæ·±åº¦å­¦ä¹ æä¾›äº†ä¸€ç§ç®¡ç†å¤§å‹ GPU é›†ç¾¤çš„æ–°æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;DLT  jobçš„ç‰¹å¾&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åé¦ˆé©±åŠ¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¶…å‚æ•°æœç´¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·é€šå¸¸ä¼šå°è¯•ä¸€ä¸ªä½œä¸šçš„å‡ ä¸ªé…ç½®ï¼ˆa multi-jobï¼‰ï¼Œå¹¶åˆ©ç”¨è¿™äº›ä½œä¸šçš„æ—©æœŸåé¦ˆæ¥å†³å®šæ˜¯å¦ä¼˜å…ˆå¤„ç†æˆ–æ€æ­»å…¶ä¸­çš„ä¸€äº›å­é›†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¼ ç»Ÿçš„è°ƒåº¦å™¨è¿è¡Œä¸€ä¸ªå·¥ä½œå­é›†ï¼Œ å®Œæˆå‰å…¶ä»–å·¥ä½œæ’é˜Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿™ç§æ¨¡å¼ä¸é€‚åˆmulti-jobsï¼Œå› ä¸ºa multi-jobä¸­çš„æ‰€æœ‰å·¥ä½œéœ€è¦&lt;strong&gt;åŒæ—¶&lt;/strong&gt;å¾—åˆ°æ—©æœŸåé¦ˆã€‚&lt;/li&gt;
&lt;li&gt;å¦å¤–ï¼Œä¼´éšç€multi-jobsï¼Œå…¶ä»–å·²ç»ç¡®å®šäº†æ­£ç¡®çš„è¶…å‚æ•°çš„DLTä½œä¸šï¼Œè¿è¡Œäº†å‡ ä¸ªå°æ—¶åˆ°å‡ å¤©ï¼Œå¯¼è‡´äº†è¡Œå¤´é˜»å¡ï¼Œå› ä¸ºé•¿æœŸè¿è¡Œçš„ä½œä¸šå¯¹GPUæ‹¥æœ‰ç‹¬å®¶è®¿é—®æƒï¼Œç›´åˆ°å®Œæˆï¼Œè€Œå–å†³äºæ—©æœŸåé¦ˆçš„å¤šä½œä¸šåˆ™åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;é•¿çš„æ’é˜Ÿæ—¶é—´è¿«ä½¿ç”¨æˆ·è¦ä¹ˆä½¿ç”¨é¢„ç•™çš„GPUï¼Œè¦ä¹ˆè¦æ±‚é›†ç¾¤è¶…é¢é…ç½®ï¼Œä»è€Œé™ä½é›†ç¾¤æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¼‚æ„&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Jobsä¹‹é—´çš„å›ºæœ‰å·®å¼‚
&lt;ul&gt;
&lt;li&gt;æ˜¾å­˜ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;æ ¸ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;å¸¦å®½æ•æ„Ÿæ€§&lt;/li&gt;
&lt;li&gt;jobä¹‹é—´çš„å¹²æ‰°&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¼ ç»Ÿè°ƒåº¦å™¨å°†jobè§†ä½œé»‘ç®±ï¼Œæ— æ³•å–å¾—æœ€ä¼˜çš„é›†ç¾¤æ•ˆç‡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½œä¸šå†…å¯é¢„æµ‹&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Gandiva&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gandivaåˆ©ç”¨å¯é¢„æµ‹æ€§æ¥æ‰§è¡Œå‰–æé©±åŠ¨çš„è‡ªçœã€‚
&lt;ul&gt;
&lt;li&gt;å®ƒä½¿ç”¨å°æ‰¹é‡çš„è¿›åº¦ç‡æ¥ä¸æ–­åçœå…¶å†³ç­–ï¼Œä»¥æé«˜é›†ç¾¤æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œåªæœ‰åœ¨å†…å­˜å’ŒGPUåˆ©ç”¨ç‡è¾ƒä½æ—¶ï¼Œå®ƒæ‰ä¼šå°†å¤šä¸ªä½œä¸šè£…ç®±åœ¨åŒä¸€ä¸ªGPUä¸Š&lt;/li&gt;
&lt;li&gt;å®ƒåŠ¨æ€åœ°å°†é€šä¿¡å¯†é›†å‹ä½œä¸šè¿ç§»åˆ°æ›´å¤šçš„äº²å’ŒåŠ›å¼ºçš„GPUä¸Š&lt;/li&gt;
&lt;li&gt;å®ƒè¿˜ä¼šé€‚æ—¶åœ° &amp;ldquo;å¢é•¿ &amp;ldquo;ä½œä¸šçš„å¹¶è¡Œç¨‹åº¦ï¼Œä»¥åˆ©ç”¨ç©ºé—²èµ„æºï¼Œå¹¶åœ¨ç©ºé—²èµ„æºæ¶ˆå¤±åç¼©å°ä½œä¸šã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬ç›®å‰å®æ–½çš„è‡ªçœç­–ç•¥æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„è¯•é”™ç­–ç•¥ï¼Œå®ƒæ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºå®ƒçš„é¢„æµ‹èƒ½åŠ›å¾ˆå¼ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Gandivaé™¤äº†ç‰¹å®šçš„å†…çœæ ¸è°ƒåº¦ç­–ç•¥ï¼Œè¿˜æä¾›äº†ä¸€äº›API&lt;/li&gt;
&lt;li&gt;APIï¼šï¼ˆaï¼‰é«˜æ•ˆçš„æŒ‚èµ·æ¢å¤æˆ–æ—¶é—´åˆ‡ç‰‡ï¼Œï¼ˆbï¼‰ä½å»¶è¿Ÿè¿ç§»ï¼Œï¼ˆcï¼‰ç»†ç²’åº¦ç›‘æ§ï¼Œï¼ˆdï¼‰å¼¹æ€§ï¼Œä»¥åŠï¼ˆeï¼‰åŠ¨æ€ä¼˜å…ˆçº§ã€‚
&lt;ul&gt;
&lt;li&gt;è¿™äº›åŸè¯­é«˜æ•ˆçš„å…³é”®æ˜¯Gandivaçš„ååŒè®¾è®¡ï¼šè·¨è¶Šè°ƒåº¦å™¨å±‚ä¸DLTå·¥å…·åŒ…å±‚ï¼ˆå¦‚pytorchï¼Œ tensorflow)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é€šè¿‡åˆ©ç”¨GPUé›†ç¾¤çš„ä¸“ç”¨æ€§ï¼ŒGandivaä¸ºæ·±åº¦å­¦ä¹ çš„ç‰¹å®šå·¥ä½œè´Ÿè½½å®šåˆ¶äº†è°ƒåº¦å™¨ï¼Œä»è€Œä¸ºè°ƒåº¦å™¨æä¾›äº†å¯¹å·¥ä½œçš„æ›´å¤šå¯è§æ€§å’Œæ§åˆ¶ï¼ŒåŒæ—¶ä»ç„¶å®ç°äº†å¯¹ä»»æ„DLTå·¥ä½œçš„é€šç”¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;Gandivaçš„å®ç°
&lt;ul&gt;
&lt;li&gt;ä¿®æ”¹ä¸¤ä¸ªæµè¡Œçš„æ¡†æ¶ PyTorch å’Œ Tensorflow ï¼Œä¸ºè°ƒåº¦ç¨‹åºæä¾›å¿…è¦çš„æ–°åŸè¯­&lt;/li&gt;
&lt;li&gt;å¹¶åœ¨ Kubernetes å’Œ Docker å®¹å™¨ä¹‹ä¸Šå®ç°äº†ä¸€ä¸ªåˆå§‹è°ƒåº¦ç­–ç•¥ç®¡ç†å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ¬æ–‡è´¡çŒ®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬è¯´æ˜äº†æ·±åº¦å­¦ä¹ å·¥ä½œæµç¨‹çš„å„ç§ç‹¬ç‰¹ç‰¹å¾ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°é›†ç¾¤è°ƒåº¦æ‰€éœ€çš„å…·ä½“è¦æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬ç¡®å®šäº†DLTä½œä¸šè°ƒåº¦ç­–ç•¥å¯ä»¥ä½¿ç”¨çš„é€šç”¨åŸè¯­ï¼Œå¹¶æä¾›äº†åº”ç”¨æ„ŸçŸ¥æŠ€æœ¯ï¼Œé€šè¿‡åˆ©ç”¨DLç‰¹æœ‰çš„ä½œä¸šå†…å‘¨æœŸæ€§çŸ¥è¯†ï¼Œä½¿æ—¶é—´åˆ‡å‰²å’Œè¿ç§»ç­‰åŸè¯­çš„æ•ˆç‡æé«˜äº†ä¸€ä¸ªæ•°é‡çº§ï¼Œä»è€Œå˜å¾—å®ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬æå‡ºå¹¶è¯„ä¼°äº†ä¸€ä¸ªæ–°çš„è‡ªçœå¼è°ƒåº¦æ¡†æ¶ï¼Œè¯¥æ¡†æ¶åˆ©ç”¨DLTå·¥ä½œçš„ç‰¹å®šé¢†åŸŸçŸ¥è¯†æ¥ä¸æ–­å®Œå–„å…¶è°ƒåº¦å†³ç­–ï¼Œä»è€Œæ˜¾è‘—æ”¹å–„æ—©æœŸåé¦ˆæ—¶é—´å¹¶æä¾›é«˜é›†ç¾¤æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;backgroud&#34;&gt;Backgroud&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åé¦ˆé©±åŠ¨çš„æ¢ç´¢ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®ç°é«˜ç²¾ç¡®åº¦çš„ä¸€ä¸ªå‰ææ¡ä»¶æ˜¯æ¨¡å‹çš„é€‰æ‹©ã€‚æ–°æ¨¡å‹çš„å‘ç°ï¼Œå¦‚ResNetæˆ–Inceptionï¼Œå¦‚ä»Šå¤§å¤šæ˜¯ä¸€ä¸ªè¯•é”™çš„è¿‡ç¨‹ï¼Œå°½ç®¡ä½¿ä¹‹è‡ªåŠ¨åŒ–çš„æ–¹æ³•æ˜¯ä¸€ä¸ªæ´»è·ƒçš„ç ”ç©¶é¢†åŸŸã€‚&lt;/li&gt;
&lt;li&gt;é™¤äº†æ¨¡å‹ç»“æ„å¤–ï¼Œè¿˜æœ‰ä¸€äº›å‚æ•°ï¼Œç§°ä¸ºè¶…å‚æ•°ï¼Œä¹Ÿéœ€è¦ä½œä¸ºDLTå·¥ä½œçš„ä¸€éƒ¨åˆ†è¢«æŒ‡å®šã€‚è¶…å‚æ•°åŒ…æ‹¬æ¨¡å‹ä¸­çš„å±‚æ•°/æƒé‡ã€æœ€å°æ‰¹é‡å¤§å°ã€å­¦ä¹ ç‡ç­‰ã€‚è¿™äº›å‚æ•°é€šå¸¸ç”±ç”¨æˆ·æ ¹æ®é¢†åŸŸçŸ¥è¯†å’Œè¯•é”™æ¥é€‰æ‹©ï¼Œæœ‰æ—¶ç”šè‡³ä¼šå¯¼è‡´æ—©æœŸè®­ç»ƒå¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼ŒDLTå·¥ä½œçš„æ—©æœŸåé¦ˆæ˜¯è‡³å…³é‡è¦çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨è®­ç»ƒçš„åˆå§‹é˜¶æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;multi-job&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸€æ—¦ç”¨æˆ·ç¡®å®šäº†è¦è¿›ä¸€æ­¥æ¢ç´¢çš„ç‰¹å®šæ¨¡å‹ï¼Œç”¨æˆ·é€šå¸¸ä¼šè¿›è¡Œè¶…å‚æ•°æœç´¢ä»¥æé«˜ä»»åŠ¡çš„å‡†ç¡®æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿™å¯ä»¥åœ¨è¶…å‚æ•°ç©ºé—´ä¸Šä½¿ç”¨å„ç§æœç´¢æŠ€æœ¯æ¥å®Œæˆï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·ç”Ÿæˆå¤šä¸ªDLTä»»åŠ¡æˆ–å¤šä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡ä½¿ç”¨&lt;strong&gt;ä¸€ç»„è¶…å‚æ•°æˆ–é…ç½®&lt;/strong&gt;è¿›è¡Œå…¨é¢è®­ç»ƒã€‚ç”±äºç”¨æˆ·é€šå¸¸ä¼šæ¢ç´¢æ•°ç™¾ä¸ªè¿™æ ·çš„é…ç½®ï¼Œè¿™ä¸ªè¿‡ç¨‹åœ¨è®¡ç®—ä¸Šæ˜¯å¾ˆæ˜‚è´µçš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å› æ­¤ï¼Œæ–‡çŒ®ä¸­å‡ºç°äº†å¤æ‚ç‰ˆæœ¬çš„è¶…å‚æ•°æœç´¢ï¼Œå¦‚HyperOptå’ŒHyperbandã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¾‹å¦‚ï¼ŒHyperbandæœ€åˆå¯èƒ½ä¼šäº§ç”Ÿ128ä¸ªDLTä½œä¸šï¼Œå¹¶åœ¨æ¯ä¸€è½®ï¼ˆä¾‹å¦‚100ä¸ªå°æ‰¹é‡è¿­ä»£ï¼‰ä¸­ï¼Œæ€æ­»ä¸€åŠç²¾åº¦æœ€ä½çš„ä½œä¸šã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŒæ ·ï¼Œå¯¹äºè¿™äº›ç®—æ³•æ¥è¯´ï¼Œå¯¹æ•´ä¸ªä½œä¸šé›†çš„æ—©æœŸåé¦ˆæ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºå¦åˆ™ä»–ä»¬å°†æ— æ³•åšå‡ºæœ‰æ•ˆçš„è®­ç»ƒå†³å®šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;dlt-jobçš„ç‰¹å¾&#34;&gt;DLT jobçš„ç‰¹å¾&lt;/h2&gt;
&lt;h3 id=&#34;å¯¹ä½ç½®localityæ•æ„Ÿ&#34;&gt;å¯¹ä½ç½®ï¼ˆlocality)æ•æ„Ÿ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¤šGPU DLTå·¥ä½œçš„æ€§èƒ½å–å†³äºåˆ†é…çš„GPUçš„äº²å’ŒåŠ›ã€‚
&lt;ul&gt;
&lt;li&gt;ä¸åŒçš„DLTå·¥ä½œå¯¹GPUé—´çš„äº²å’ŒåŠ›è¡¨ç°å‡ºä¸åŒç¨‹åº¦çš„æ•æ„Ÿæ€§ã€‚&lt;/li&gt;
&lt;li&gt;å³ä½¿æ˜¯åŒä¸€å°æœºå™¨ä¸Šçš„GPUï¼Œç”±äºä¸å¯¹ç§°çš„æ¶æ„ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ä¸åŒç¨‹åº¦çš„GPUä¹‹é—´çš„äº²å’ŒåŠ›
&lt;ul&gt;
&lt;li&gt;ä¸¤ä¸ªGPUå¯èƒ½ä½äºä¸åŒçš„CPUæ’æ§½ï¼ˆè¡¨ç¤ºä¸ºDiffSocketï¼‰&lt;/li&gt;
&lt;li&gt;åœ¨åŒä¸€ä¸ªCPUæ’æ§½ï¼Œä½†åœ¨ä¸åŒçš„PCIe Switchï¼ˆè¡¨ç¤ºä¸ºSameSocketï¼‰&lt;/li&gt;
&lt;li&gt;åœ¨åŒä¸€ä¸ªPCIe Switchï¼ˆè¡¨ç¤ºä¸ºSamePCIeSwï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211081932589.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211081932589.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221108193230029&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221108193230029&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å›¾1æ˜¾ç¤ºäº†ä¸¤ä¸ªæ¨¡å‹VGG16[44]å’ŒResNet-50[24]å¯¹æœåŠ¡å™¨å†…å®šä½çš„ä¸åŒæ•æ„Ÿæ€§ã€‚
&lt;ul&gt;
&lt;li&gt;å½“ä½¿ç”¨Tensorflowçš„ä¸¤ä¸ªP100 GPUè¿›è¡Œè®­ç»ƒæ—¶ï¼ŒVGG16åœ¨ä¸è‰¯å®šä½ä¸‹å—åˆ°å¾ˆå¤§å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æœ€å·®çš„å®šä½ä¸‹ï¼Œå½“ä¸¤ä¸ªGPUä½äºä¸åŒçš„CPUæ’åº§ä¸Šæ—¶ï¼ŒVGG16åªå®ç°äº†æœ€ä½³å®šä½é…ç½®çš„60%ï¼Œå³ä¸¤ä¸ªGPUè¢«æ”¾ç½®åœ¨åŒä¸€ä¸ªPCIeå¼€å…³ä¸‹ã€‚&lt;/li&gt;
&lt;li&gt;å¦ä¸€æ–¹é¢ï¼Œåœ¨è¿™ç§è®¾ç½®ä¸‹ï¼ŒResNet-50ä¸å—GPUå®šä½çš„å½±å“ã€‚è¿™æ˜¯å› ä¸ºVGG16æ˜¯ä¸€ä¸ªæ¯”ResNet-50æ›´å¤§çš„ç¥ç»æ¨¡å‹ï¼Œå› æ­¤åœ¨æ¯ä¸ªå°æ‰¹æ¬¡ä¸­çš„æ¨¡å‹åŒæ­¥ä¼šåœ¨åº•å±‚PCIeæ€»çº¿ä¸Šäº§ç”Ÿæ›´é«˜çš„é€šä¿¡è´Ÿè·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­è§‚å¯Ÿåˆ°ç±»ä¼¼çš„è¶‹åŠ¿ã€‚å›¾2æ˜¾ç¤ºäº†ä¸€ä¸ª4GPU Tensorflowä½œä¸šçš„æ€§èƒ½ï¼Œå®ƒä»¥ä¸åŒçš„æœåŠ¡å™¨é—´å®šä½è¿è¡Œï¼Œè®­ç»ƒResNet-50å’ŒInceptionV3[46]æ¨¡å‹ã€‚
&lt;ul&gt;
&lt;li&gt;å³ä½¿æ˜¯ç”¨40G InfiniBandç½‘ç»œäº’è¿ï¼Œå½“ä½œä¸šè¢«åˆ†é…åˆ°4ä¸ªGPUæ—¶ï¼Œæ€§èƒ½å·®å¼‚æ˜æ˜¾ï¼Œ
&lt;ul&gt;
&lt;li&gt;å…¶ä¸­å®ƒä»¬å‡åŒ€åœ°åˆ†æ•£åœ¨4å°æœåŠ¡å™¨ï¼ˆè¡¨ç¤ºä¸º4*1-GPUï¼‰&lt;/li&gt;
&lt;li&gt;2å°æœåŠ¡å™¨ï¼ˆè¡¨ç¤ºä¸º2*2-GPUï¼‰&lt;/li&gt;
&lt;li&gt;ä»¥åŠå…¨éƒ¨åœ¨ä¸€å°æœåŠ¡å™¨ï¼ˆè¡¨ç¤ºä¸ºæœ¬åœ°4GPUï¼‰&lt;/li&gt;
&lt;li&gt;å°½ç®¡ä¸¤ä¸ªæ¨¡å‹å¯¹ä½ç½®æ€§çš„æ•æ„Ÿæ€§ä¸åŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼ŒDLTè°ƒåº¦å™¨åœ¨åˆ†é…GPUæ—¶å¿…é¡»è€ƒè™‘åˆ°ä½œä¸šå¯¹ä½ç½®çš„æ•æ„Ÿæ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¯¹å¹²æ‰°æ•æ„Ÿ&#34;&gt;å¯¹å¹²æ‰°æ•æ„Ÿ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å½“åœ¨ä¸€ä¸ªå…±äº«çš„æ‰§è¡Œç¯å¢ƒä¸­è¿è¡Œæ—¶ï¼ŒDLTå·¥ä½œå¯èƒ½ä¼šå› ä¸ºèµ„æºäº‰å¤ºè€Œç›¸äº’å¹²æ‰°ã€‚æˆ‘ä»¬å†æ¬¡è§‚å¯Ÿåˆ°ï¼Œä¸åŒçš„DLTå·¥ä½œè¡¨ç°å‡ºä¸åŒç¨‹åº¦çš„å¹²æ‰°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211081932419.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211081932419.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221108193107517&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221108193107517&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å³ä½¿å¯¹äºå•GPUä½œä¸šï¼Œä¹Ÿå­˜åœ¨å¹²æ‰°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å›¾3æ˜¾ç¤ºäº†: å½“æŠŠä¸€ä¸ªè¯­è¨€æ¨¡å‹ä½œä¸šï¼ˆæ ‡è®°ä¸ºLMï¼‰ä¸å¦ä¸€ä¸ªä½œä¸šæ”¾åœ¨åŒä¸€ä¸ªPCI-eäº¤æ¢æœºä¸‹æ—¶ï¼Œç”±äºæœåŠ¡å™¨å†…çš„å¹²æ‰°è€Œå¯¼è‡´çš„æ€§èƒ½ä¸‹é™æƒ…å†µã€‚
&lt;ul&gt;
&lt;li&gt;å½“ä¸¤ä¸ªLMä¸€èµ·è¿è¡Œæ—¶ï¼Œä¸¤ä¸ªä½œä¸šéƒ½ä¼šé­å—19%çš„å‡é€Ÿã€‚&lt;/li&gt;
&lt;li&gt;ç„¶è€Œï¼ŒResNet-50å¹¶æ²¡æœ‰å—åˆ°GPUä¸LMå…±å¤„çš„å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;ç¥ç»æœºå™¨ç¿»è¯‘ï¼ˆGNMTï¼‰[51]å¯¹LMçš„å¹²æ‰°ç¨‹åº¦ä¸å¤§ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿè§‚å¯Ÿåˆ°ä¸åŒç±»å‹çš„è®­ç»ƒæ¨¡å‹å¯¹å¤šGPUè®­ç»ƒçš„ä¸åŒç¨‹åº¦çš„å¹²æ‰°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å›¾4æ˜¾ç¤ºäº†ç”¨40G InfiniBandç½‘ç»œè¿æ¥çš„ä¸¤ä¸ª4GPUæœåŠ¡å™¨ä¸Šçš„æœåŠ¡å™¨é—´å¹²æ‰°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“è¿è¡Œå¤šä¸ª2-GPUä½œä¸šæ—¶ï¼Œæ¯ä¸ªGPUè¢«æ”¾åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œ
&lt;ul&gt;
&lt;li&gt;ResNet-50æ˜¾ç¤ºå‡ºé«˜è¾¾47%çš„å‡é€Ÿï¼Œ&lt;/li&gt;
&lt;li&gt;InceptionV3æ˜¾ç¤ºå‡º30%çš„å‡é€Ÿï¼Œ&lt;/li&gt;
&lt;li&gt;è€ŒDeepSpeech[23]ä»…æ˜¾ç¤ºå‡º5%çš„å‡é€Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ€»ä¹‹ï¼Œä¸åŒåº”ç”¨é¢†åŸŸçš„æµè¡Œæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œå¦‚è§†è§‰ã€è¯­è¨€å’Œè¯­éŸ³ï¼Œè¡¨ç°å‡ºå¯¹ä½ç½®æ€§å’Œå¹²æ‰°çš„ä¸åŒç¨‹åº¦çš„æ•æ„Ÿæ€§ã€‚ä¸ºäº†è¿åˆè¿™äº›æŒ‘æˆ˜ï¼ŒGandivaåˆ©ç”¨äº†DLTå·¥ä½œçš„ä¸€ä¸ªå…³é”®ç‰¹å¾ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šè¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;jobå†…å¯é¢„æµ‹æ€§&#34;&gt;jobå†…å¯é¢„æµ‹æ€§&lt;/h3&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211081933633.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211081933633.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221108193308480&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221108193308480&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªDLTä½œä¸šåŒ…æ‹¬è®¸å¤šå°æ‰¹é‡çš„è¿­ä»£ï¼Œ å‘ˆç°å¯¹åº”çš„å‘¨æœŸæ€§ã€‚
&lt;ul&gt;
&lt;li&gt;å›¾5(a)æ˜¾ç¤ºäº†åœ¨å››ä¸ªK80 GPUä¸Šä½¿ç”¨ResNet-50æ¨¡å‹å¯¹ImageNetæ•°æ®è¿›è¡Œè®­ç»ƒçš„20så¿«ç…§æœŸé—´ä½¿ç”¨çš„GPUæ€»å†…å­˜ã€‚
&lt;ul&gt;
&lt;li&gt;æ‰€ä½¿ç”¨çš„GPUå†…å­˜æ˜æ˜¾éµå¾ªä¸€ä¸ªå‘¨æœŸæ€§æ¨¡å¼ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå‘¨æœŸéƒ½å¯¹åº”ç€ä¸€ä¸ªå°æ‰¹æ¬¡çš„å¤„ç†ï¼ˆå¤§çº¦1.5sï¼‰ï¼Œå†…å­˜åœ¨å‰å‘ä¼ é€’ä¸­å¢åŠ ï¼Œåœ¨åå‘ä¼ é€’ä¸­å‡å°‘ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨çš„æœ€å¤§å’Œæœ€å°çš„GPUå†…å­˜åˆ†åˆ«ä¸º23GBå’Œ0.3GBï¼Œæˆ–77å€çš„ç³»æ•°ã€‚&lt;/li&gt;
&lt;li&gt;è¿™ä¸ªæ¯”ä¾‹éšç€è¿·ä½ æ‰¹å¤„ç†é‡çš„å¢åŠ è€Œæ‰©å¤§ï¼ˆé€šå¸¸åœ¨16åˆ°256ä¹‹é—´ï¼›æœ¬ä¾‹ä¸­ä¸º128ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å›¾5(b)æ˜¾ç¤ºäº†åœ¨ä¸€ä¸ªK80 GPUä¸Šä½¿ç”¨GNMTæ¨¡å‹æ—¶ï¼Œå¯¹WMT&#39;14è‹±è¯­å¾·è¯­æ•°æ®é›†è¿›è¡Œè®­ç»ƒçš„20så¿«ç…§æ‰€ä½¿ç”¨çš„GPUæ€»å†…å­˜ã€‚
&lt;ul&gt;
&lt;li&gt;è™½ç„¶å°æ‰¹é‡è¿­ä»£ä¸ImageNetçš„ä¾‹å­ä¸å®Œå…¨ç›¸åŒï¼ˆç”±äºä¸åŒçš„å¥å­é•¿åº¦å’ŒPyTorchä¸­ä½¿ç”¨çš„åŠ¨æ€å›¾ï¼‰ï¼Œä½†è¯¥å›¾å…·æœ‰ç±»ä¼¼çš„å¾ªç¯æ€§è´¨ã€‚&lt;/li&gt;
&lt;li&gt;æœ€å¤§å€¼å’Œæœ€å°å€¼ä¹‹é—´çš„å·®å¼‚è¾ƒå°ï¼ˆ3å€ï¼‰ï¼Œä¸»è¦æ˜¯ç”±äºè¾ƒå¤§çš„æ¨¡å‹ï¼ˆ0.4GBï¼‰å’Œè¾ƒå°çš„è¿·ä½ æ‰¹æ¬¡å¤§å°ï¼ˆæœ¬ä¾‹ä¸­ä¸º16ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é™¤äº†è¿™é‡Œæ˜¾ç¤ºçš„å›¾åƒå’Œè¯­è¨€æ¨¡å‹å¤–ï¼Œå…¶ä»–è®­ç»ƒé¢†åŸŸï¼Œå¦‚è¯­éŸ³ã€ç”Ÿæˆå¼é€†å‘ç½‘ç»œï¼ˆGANï¼‰å’Œå˜å¼‚è‡ªåŠ¨ç¼–ç å™¨éƒ½éµå¾ªç±»ä¼¼çš„å¾ªç¯æ¨¡å¼ï¼ˆç”±äºç©ºé—´é™åˆ¶æ²¡æœ‰æ˜¾ç¤ºï¼‰ï¼Œå› ä¸ºè®­ç»ƒçš„æ ¸å¿ƒæ˜¯æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæ‰§è¡Œè®¸å¤šå°æ‰¹é‡è¿­ä»£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å……åˆ†åˆ©ç”¨å¯é¢„æµ‹æ€§ã€‚
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œä¸€ä¸ªDLTä½œä¸šå¯ä»¥è¢«è‡ªåŠ¨åˆ†å‰²æˆå°æ‰¹é‡çš„è¿­ä»£ï¼Œè¿™äº›è¿­ä»£åœ¨60ç§’å†…çš„é›†åˆï¼Œä¾‹å¦‚ä¸€ä¸ªå¾®ä»»åŠ¡ï¼Œå½¢æˆä¸€ä¸ªè°ƒåº¦é—´éš”ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒï¼Œé€šè¿‡åœ¨å†…å­˜å‘¨æœŸçš„æœ€å°å€¼ä¸Šæ‰§è¡Œæš‚åœæ“ä½œï¼Œå¯ä»¥å¤§å¤§å‡å°‘ä»GPUå¤åˆ¶åˆ°CPUä¸­çš„å†…å­˜é‡ï¼Œä»è€Œä½¿æš‚åœ/æ¢å¤å’Œè¿ç§»çš„æ•ˆç‡æ¯”naiveçš„å®ç°è¦é«˜ä¸€ä¸ªæ•°é‡çº§ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰ï¼Œå¯ä»¥å¯¹å°æ‰¹é‡çš„è¿›åº¦è¿›è¡Œåˆ†æï¼Œå¹¶å°†å…¶ä½œä¸ºè¯„ä¼°è£…ç®±æˆ–è¿ç§»ç­‰æœºåˆ¶çš„æœ‰æ•ˆæ€§çš„ä»£ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è®¾è®¡&#34;&gt;è®¾è®¡&lt;/h2&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211081934805.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211081934805.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221108193438681&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221108193438681&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚ä»Šçš„é›†ç¾¤ä¸­å‡ºç°é«˜å»¶è¿Ÿå’Œä½åˆ©ç”¨ç‡çš„é—®é¢˜
&lt;ul&gt;
&lt;li&gt;æ˜¯å› ä¸ºDLTä½œä¸šè¢«ä¸“é—¨åˆ†é…äº†ä¸€ç»„&lt;strong&gt;å›ºå®š&lt;/strong&gt;çš„GPUã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‹¬å &lt;/strong&gt;è®¿é—® GPU çš„åŸå› è¡Œå¤´é˜»å¡ï¼Œé˜»å¡äº†æ—©æœŸåé¦ˆï¼Œå¯¼è‡´ä½œä¸šçš„æ’é˜Ÿæ—¶é—´è¿‡é•¿ã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½œä¸šæ— æ³•å®Œå…¨åˆ©ç”¨å…¶åˆ†é…çš„GPUæ—¶ï¼Œå¯¹ä¸€ç»„å›ºå®šçš„GPUçš„ç‹¬å®¶è®¿é—®ä¹Ÿä¼šå¯¼è‡´GPUçš„ä½åˆ©ç”¨ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æœºåˆ¶&#34;&gt;æœºåˆ¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¸‰ç§æ–¹å¼æ¶ˆé™¤GPUå¯¹DLTä½œä¸šçš„æ’ä»–æ€§å’Œå›ºå®šåˆ†é…æ¥è§£å†³ä½æ•ˆç‡é—®é¢˜
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œåœ¨è¿‡è½½æœŸé—´ï¼ŒGandivaå…è®¸åæ¥çš„å·¥ä½œä¸ç°æœ‰çš„å·¥ä½œ&lt;strong&gt;å…±äº«&lt;/strong&gt;GPU
&lt;ul&gt;
&lt;li&gt;è€Œä¸æ˜¯ç­‰å¾…å½“å‰å·¥ä½œçš„ç¦»å¼€ã€‚&lt;/li&gt;
&lt;li&gt;è¿™æ˜¯ä¸ºDLTä½œä¸šå®šåˆ¶çš„&lt;strong&gt;æŒ‚èµ·-é‡å¯æœºåˆ¶&lt;/strong&gt;å’Œ&lt;strong&gt;é€‰æ‹©æ€§è£…ç®±&lt;/strong&gt;è€Œå®ç°çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒï¼ŒGandivaæ”¯æŒDLTä½œä¸šä»ä¸€ç»„GPUåˆ°å¦ä¸€ç»„çš„&lt;strong&gt;é«˜æ•ˆè¿ç§»&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;è¿ç§»å…è®¸æ—¶é—´ç¢ç‰‡åŒ–çš„ä½œä¸šè¿ç§»åˆ°å…¶ä»–ï¼ˆæœ€è¿‘ç©ºå‡ºçš„ï¼‰GPUä¸Š&lt;/li&gt;
&lt;li&gt;æˆ–è€…å¯¹é›†ç¾¤è¿›è¡Œå»ç¢ç‰‡åŒ–å¤„ç†ï¼Œä»è€Œä½¿åæ¥çš„ä½œä¸šè¢«åˆ†é…åˆ°å…·æœ‰è‰¯å¥½ä½ç½®æ€§çš„GPUä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰ï¼ŒGandivaæ”¯æŒGPUå¢é•¿-ç¼©å‡æœºåˆ¶
&lt;ul&gt;
&lt;li&gt;è¿™æ ·ç©ºé—²çš„GPUå°±å¯ä»¥é€‚æ—¶åœ°è¢«ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†æœ‰æ•ˆåœ°æ”¯æŒè¿™äº›æœºåˆ¶å¹¶å®ç°æœ‰æ•ˆçš„èµ„æºç®¡ç†ï¼ŒGandivaé€šè¿‡ä¸æ–­åœ°&lt;strong&gt;å‰–æ&lt;/strong&gt;DLTä½œä¸šçš„èµ„æºä½¿ç”¨æƒ…å†µå¹¶ä¼°è®¡å…¶æ€§èƒ½ï¼Œå¯¹DLTä½œä¸šè¿›è¡Œå†…çœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æŒ‚èµ·-é‡å¯ä¸è£…ç®±&#34;&gt;æŒ‚èµ·-é‡å¯ä¸è£…ç®±&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Suspend-resume&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‚èµ·-é‡å¯æ˜¯Gandivaç”¨æ¥æ¶ˆé™¤ä¸€ç»„GPUå¯¹DLTä½œä¸šçš„ç‹¬å æ€§çš„ä¸€ç§æœºåˆ¶ã€‚
&lt;ul&gt;
&lt;li&gt;Gandivaåˆ©ç”¨è¿™ç§æœºåˆ¶ï¼Œå¢åŠ äº†å¯¹GPUæ—¶é—´åˆ†å‰²çš„è‡ªå®šä¹‰æ”¯æŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Gandivaçš„å…³é”®æ€æƒ³æ˜¯åˆ©ç”¨è¿™ç§å‘¨æœŸæ€§è¡Œä¸ºï¼Œåœ¨DLTä½œä¸šçš„&lt;strong&gt;GPUæ˜¾å­˜ä½¿ç”¨é‡æœ€ä½&lt;/strong&gt;æ—¶æš‚åœ-æ¢å¤ã€‚
&lt;ul&gt;
&lt;li&gt;1ï¼‰å‘å‡ºæš‚åœè°ƒç”¨&lt;/li&gt;
&lt;li&gt;2ï¼‰DLTå·¥å…·åŒ…ä¼šç­‰åˆ°å†…å­˜ä½¿ç”¨å‘¨æœŸçš„æœ€å°å€¼ï¼Œå°†å­˜å‚¨åœ¨GPUä¸­çš„å¯¹è±¡å¤åˆ¶åˆ°CPUï¼Œé‡Šæ”¾å…¶æ‰€æœ‰GPUå†…å­˜åˆ†é…ï¼ˆåŒ…æ‹¬ç¼“å­˜ï¼‰&lt;/li&gt;
&lt;li&gt;3ï¼‰ç„¶åè°ƒç”¨ç»å…¸çš„CPUæš‚åœæœºåˆ¶&lt;/li&gt;
&lt;li&gt;4ï¼‰ä¹‹åï¼Œå½“CPUæ¢å¤å·¥ä½œæ—¶ï¼ŒDLTæ¡†æ¶é¦–å…ˆåˆ†é…é€‚å½“çš„GPUå†…å­˜ï¼Œå°†å­˜å‚¨çš„å¯¹è±¡å¤åˆ¶å›GPUï¼Œç„¶åæ¢å¤å·¥ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Suspend-resumeä¹Ÿå¯ä»¥åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸­å¯åŠ¨GPUçš„æ›´æ¢
&lt;ul&gt;
&lt;li&gt;è™½ç„¶æ›´æ¢GPUçš„æˆæœ¬å¾ˆé«˜ï¼Œä½†æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå»¶è¿Ÿä»å…³é”®è·¯å¾„ä¸­éšè—
&lt;ul&gt;
&lt;li&gt;å…¸å‹çš„å›¾åƒåˆ†ç±»å·¥ä½œï¼Œæš‚åœ-æ¢å¤ä¸€èµ·å¯ä»¥åœ¨100mså†…å®Œæˆ&lt;/li&gt;
&lt;li&gt;è€Œå¯¹äºå¤§å‹è¯­è¨€ç¿»è¯‘å·¥ä½œï¼Œæš‚åœ-æ¢å¤å¯èƒ½éœ€è¦1s&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è€ƒè™‘åˆ°1åˆ†é’Ÿçš„æ—¶é—´åˆ‡åˆ†é—´éš”ï¼Œè¿™ç›¸å½“äº2%æˆ–æ›´å°‘çš„å¼€é”€&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å»¶è¿Ÿ
&lt;ul&gt;
&lt;li&gt;Gandivaä¸­çš„suspendå¯èƒ½æœ€å¤š&lt;strong&gt;å»¶è¿Ÿ&lt;/strong&gt;DLTä½œä¸šçš„ä¸€ä¸ªå°æ‰¹æ¬¡é—´éš”&lt;/li&gt;
&lt;li&gt;å€¼å¾—
&lt;ul&gt;
&lt;li&gt;ç”±äºå‡å°‘äº†GPU-CPUçš„å¤åˆ¶æˆæœ¬å’Œæ›´å°‘çš„CPUä½¿ç”¨çš„å†…å­˜ï¼Œå®ƒçš„å¼€é”€æ˜æ˜¾å‡å°‘&lt;/li&gt;
&lt;li&gt;åœ¨è¿™ä¸ªå»¶è¿ŸæœŸé—´è¿˜å®Œæˆäº†æœ‰ç”¨çš„å·¥ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è°ƒåº¦å™¨è·Ÿè¸ªè¿™ä¸€å»¶è¿Ÿï¼Œå¹¶ç›¸åº”åœ°è°ƒæ•´æ—¶é—´åˆ†å‰²çš„é—´éš”ï¼Œä»¥å®ç°å…¬å¹³æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è£…ç®±&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æš‚åœ-æ¢å¤çš„å¦ä¸€ç§æ–¹æ³•æ˜¯è£…ç®±
&lt;ul&gt;
&lt;li&gt;åœ¨ä¸€ä¸ªGPUä¸ŠåŒæ—¶è¿è¡Œå¤šä¸ªDLTä½œä¸šï¼Œè®©GPUåˆ†æ‹…ä½œä¸šçš„æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœ‰æ•ˆæ€§
&lt;ul&gt;
&lt;li&gt;åªæœ‰å½“è£…ç®±çš„ä½œä¸šä¸è¶…è¿‡GPUçš„èµ„æºï¼Œå¹¶ä¸”ä¸ä¼šå¯¹å½¼æ­¤äº§ç”Ÿä¸åˆ©å½±å“æ—¶ï¼ŒGPUä¸­çš„è£…ç®±æ‰æ˜¯æœ‰æ•ˆçš„ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½œä¸šç›¸äº’å¹²æ‰°ï¼Œè£…ç®±å°±ä¼šæ¯”æš‚åœ-æ¢å¤å·®å¾ˆå¤šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è£…ç®±çš„ä½¿ç”¨
&lt;ul&gt;
&lt;li&gt;å½“DLTä½œä¸šæœ‰æ’ä»–æ€§çš„è®¿é—®æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨Profilingæ¥ç›‘æµ‹å®ƒä»¬çš„èµ„æºå’Œè¿›åº¦&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸¤ä¸ªä½œä¸šè¢«ç¡®å®šä¸ºè£…ç®±çš„å€™é€‰è€…ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒä»¬è£…ç®±åœ¨ä¸€èµ·ï¼Œå¹¶ç»§ç»­ç›‘æ§å®ƒä»¬&lt;/li&gt;
&lt;li&gt;å¦‚æœç»™å®šçš„è£…ç®±ç»“æœå¯¹ä½œä¸šçš„æ€§èƒ½äº§ç”Ÿäº†ä¸åˆ©å½±å“ï¼Œæˆ‘ä»¬å°±è§£é™¤è¿™äº›ä½œä¸šçš„è£…ç®±å¹¶æ¢å¤åˆ°æš‚åœ-æ¢å¤çŠ¶æ€&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è¿ç§»&#34;&gt;è¿ç§»&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;è¿ç§»æ˜¯Gandivaç”¨æ¥æ”¹å˜åˆ†é…ç»™DLTä½œä¸šçš„GPUé›†çš„æœºåˆ¶ã€‚
&lt;ul&gt;
&lt;li&gt;è¿ç§»åœ¨å‡ ç§æƒ…å†µä¸‹æ˜¯æœ‰ç”¨çš„
&lt;ul&gt;
&lt;li&gt;iï¼‰å°†æ—¶é—´åˆ†å‰²çš„ä½œä¸šç§»åˆ°é›†ç¾¤ä¸­ä»»ä½•åœ°æ–¹çš„ç©ºé—²GPUä¸Š&lt;/li&gt;
&lt;li&gt;iiï¼‰å°†ç›¸äº’å¹²æ‰°çš„ä½œä¸šç§»å¼€&lt;/li&gt;
&lt;li&gt;iiiï¼‰å¯¹é›†ç¾¤è¿›è¡Œå»ç¢ç‰‡åŒ–å¤„ç†ï¼Œä½¿è¿›å…¥çš„ä½œä¸šè·å¾—å…·æœ‰è‰¯å¥½ä½ç½®æ€§çš„GPU&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬è¯„ä¼°äº†ä¸¤ç§è§£å†³DLTè¿›ç¨‹çŠ¶æ€è¿ç§»çš„æ–¹æ³•ã€‚
&lt;ul&gt;
&lt;li&gt;åœ¨ç¬¬ä¸€ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ä¸€ä¸ªé€šç”¨çš„è¿›ç¨‹è¿ç§»æœºåˆ¶ï¼Œå¦‚&lt;strong&gt;CRIU&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;CRIUæœ¬èº«ä¸æ”¯æŒä½¿ç”¨GPUè®¾å¤‡çš„è¿›ç¨‹è¿ç§»
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬é¦–å…ˆå¯¹GPUå¯¹è±¡è¿›è¡Œæ£€æŸ¥&lt;/li&gt;
&lt;li&gt;è°ƒç”¨CRIUä¹‹å‰ä»è¿›ç¨‹ä¸­åˆ é™¤æ‰€æœ‰GPUçŠ¶æ€&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å› ä¸ºCRIUæ£€æŸ¥ç‚¹å’Œæ¢å¤æ•´ä¸ªè¿›ç¨‹çš„å†…å­˜
&lt;ul&gt;
&lt;li&gt;å¯¹äºè¿™äº›ä½¿ç”¨PyTorchçš„DLTä½œä¸šæ¥è¯´ï¼Œæ£€æŸ¥ç‚¹çš„å¤§å°æ˜¯GBçº§åˆ«çš„ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºå•GPUä½œä¸šæ¥è¯´ï¼Œæ‰€äº§ç”Ÿçš„è¿ç§»å¼€é”€çº¦ä¸º810sï¼Œå¯¹äºå¤šGPUä½œä¸šæ¥è¯´åˆ™æ›´é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬è€ƒè™‘çš„ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨å…·æœ‰æ£€æŸ¥ç‚¹æ„è¯†çš„DLTä½œä¸šã€‚
&lt;ul&gt;
&lt;li&gt;Tensorflowç­‰DLTæ¡†æ¶å·²ç»æ”¯æŒå…è®¸è‡ªåŠ¨æ£€æŸ¥ç‚¹å’Œæ¢å¤æ¨¡å‹çš„API&lt;/li&gt;
&lt;li&gt;é€šè¿‡åœ¨è¿ç§»å‰å¯¹ç›®çš„åœ°è¿›è¡Œ&lt;strong&gt;é¢„çƒ­&lt;/strong&gt;ï¼Œå¹¶ä¸”åªè¿ç§»å¿…è¦çš„è®­ç»ƒçŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥é™ä½è¿ç§»å¼€é”€å°åˆ°ä¸€ä¸¤ç§’&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ— è®ºé‡‡ç”¨å“ªç§æ–¹æ³•ï¼Œæˆ‘ä»¬å‘ç°ï¼Œä¸å®ƒåœ¨æé«˜GPUæ€»ä½“åˆ©ç”¨ç‡æ–¹é¢æä¾›çš„å¥½å¤„ç›¸æ¯”ï¼ŒæœåŠ¡å™¨é—´è¿ç§»çš„å¼€é”€æ˜¯å€¼å¾—çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å¢é•¿ä¸æ”¶ç¼©&#34;&gt;å¢é•¿ä¸æ”¶ç¼©&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Gandivaç”¨æ¥æ¶ˆé™¤GPUå¯¹DLTä½œä¸šçš„æ’ä»–æ€§çš„ç¬¬ä¸‰ä¸ªæœºåˆ¶æ˜¯å¢é•¿-æ”¶ç¼©ã€‚
&lt;ul&gt;
&lt;li&gt;è¿™ç§æœºåˆ¶ä¸»è¦é’ˆå¯¹é›†ç¾¤å¯èƒ½æ²¡æœ‰è¢«å®Œå…¨åˆ©ç”¨çš„æƒ…å†µ&lt;/li&gt;
&lt;li&gt;åŸºæœ¬æ€æƒ³
&lt;ul&gt;
&lt;li&gt;åœ¨ç©ºé—²æ—¶é—´å†…ï¼Œé€‚æ—¶åœ°å¢åŠ å¯ç”¨äºä½œä¸šçš„GPUæ•°é‡&lt;/li&gt;
&lt;li&gt;åœ¨è´Ÿè½½å¢åŠ æ—¶ç›¸åº”åœ°å‡å°‘å¯ç”¨çš„GPUæ•°é‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è®¸å¤šDLTå·¥ä½œï¼Œç‰¹åˆ«æ˜¯åœ¨å›¾åƒé¢†åŸŸï¼Œéšç€GPUæ•°é‡çš„å¢åŠ ï¼Œä¼šçœ‹åˆ°çº¿æ€§çš„æ€§èƒ½æ‰©å±•ã€‚
&lt;ul&gt;
&lt;li&gt;Gandivaåªå¯¹é‚£äº›ç‰¹åˆ«å£°æ˜ä»–ä»¬æœ‰è¶³å¤Ÿçš„é€‚åº”æ€§æ¥åˆ©ç”¨è¿™äº›å¢é•¿æœºä¼šçš„DLTå·¥ä½œåº”ç”¨è¿™ä¸€æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;å½“å¤šä¸ªDLTå·¥ä½œç¬¦åˆè¿™ä¸€æ ‡å‡†æ—¶ï¼ŒGandivaä½¿ç”¨Profilingæ¥ä¼°è®¡æ¯ä¸ªå·¥ä½œçš„è¿›åº¦ï¼Œç„¶åç›¸åº”åœ°åˆ†é…GPUã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;profiling&#34;&gt;Profiling&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Gandivaç›‘æ§èµ„æºä½¿ç”¨æƒ…å†µ
&lt;ul&gt;
&lt;li&gt;å¦‚CPUå’ŒGPUåˆ©ç”¨ç‡ï¼ŒCPU/GPUå†…å­˜ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;Gandivaçš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºï¼Œå®ƒè¿˜ä»¥ä¸€ç§åº”ç”¨æ„ŸçŸ¥çš„æ–¹å¼å†…çœ
&lt;ul&gt;
&lt;li&gt;åˆ©ç”¨äº†DLTä½œä¸šè¡¨ç°å‡ºçš„è§„å¾‹å†…çœ&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨å‘¨æœŸæ€§ä»¥ä¼°è®¡DLTè¿›åº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Gandivaä¼°è®¡DLTä½œä¸šçš„mini_batchæ—¶é—´
&lt;ul&gt;
&lt;li&gt;å³å¯¹ä¸€æ‰¹è¾“å…¥æ•°æ®åšä¸€æ¬¡å‰å‘/åå‘ä¼ é€’çš„æ—¶é—´ï¼Œä½œä¸ºGPUå†…å­˜ä½¿ç”¨å‘¨æœŸçš„ä¸¤ä¸ªæœ€å°å€¼ä¹‹é—´çš„æ—¶é—´&lt;/li&gt;
&lt;li&gt;ç”±äºDLTä½œä¸šåœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­é€šå¸¸ä¼šæ‰§è¡Œæ•°ç™¾ä¸‡æ¬¡è¿™æ ·çš„å°æ‰¹é‡æ“ä½œï¼Œè°ƒåº¦å™¨ä¼šåœ¨è°ƒåº¦å†³ç­–ä¹‹å‰å’Œä¹‹åæ¯”è¾ƒDLTçš„mini_batchæ—¶é—´ä»¥ç¡®å®šå…¶æœ‰æ•ˆæ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Gandivaå¯ä»¥å†³å®šè£…ç®±æ˜¯å¦æœ‰æ•ˆ
&lt;ul&gt;
&lt;li&gt;é€šè¿‡æ¯”è¾ƒè£…ç®±å‰åä¸¤ä¸ªDLTä½œä¸šçš„å°æ‰¹é‡æ—¶é—´&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰è¿™æ ·çš„å‰–æï¼Œä¸ºäº†åšå‡ºè£…ç®±çš„å†³å®š
&lt;ul&gt;
&lt;li&gt;äººä»¬ä¸ä»…è¦å¯¹ä¸¤ä¸ªDLTä½œä¸šåœ¨ä¸åŒGPUä¸Šçš„æ€§èƒ½è¿›è¡Œå»ºæ¨¡ï¼Œ&lt;/li&gt;
&lt;li&gt;è¿˜è¦å¯¹å®ƒä»¬å¯èƒ½ç›¸äº’å¹²æ‰°çš„å„ç§æ–¹å¼è¿›è¡Œå»ºæ¨¡ï¼ˆä¾‹å¦‚ï¼Œç¼“å­˜ã€å†…å­˜å¸¦å®½ç­‰ï¼‰&lt;/li&gt;
&lt;li&gt;è¿™ä¸æ˜¯ä¸€é¡¹ç®€å•çš„ä»»åŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è°ƒåº¦åŸåˆ™&#34;&gt;è°ƒåº¦åŸåˆ™&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å®šä¹‰ï¼šåœ¨æˆ‘ä»¬æè¿°è°ƒåº¦å™¨çš„ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€äº›æœ¯è¯­ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DLTä½œä¸š
&lt;ul&gt;
&lt;li&gt;è¢«å°è£…åœ¨å®¹å™¨ä¸­, åŒ…æ‹¬
&lt;ul&gt;
&lt;li&gt;æ‰€éœ€çš„GPUæ•°é‡&lt;/li&gt;
&lt;li&gt;ä¼˜å…ˆçº§ï¼ˆå¯ä»¥æ˜¯åŠ¨æ€çš„ ï¼‰&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªæŒ‡ç¤ºä½œä¸šæ˜¯å¦èƒ½å¤Ÿå¢é•¿-æ”¶ç¼©çš„æ ‡å¿—&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬å‡è®¾ä¸€ä¸ªä½œä¸šæ‰€è¦æ±‚çš„GPUæ•°é‡æ˜¯2çš„å¹‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é›†ç¾¤
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªé›†ç¾¤ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡å™¨ç»„æˆ&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªæœåŠ¡å™¨æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªGPU&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬å‡è®¾ä¸€ä¸ªä¸“é—¨çš„GPUé›†ç¾¤ç”¨äºDLTå·¥ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨çš„é«˜åº¦
&lt;ul&gt;
&lt;li&gt;å®šä¹‰ä¸ºâŒˆM/N]ï¼Œ å…¶ä¸­Mæ˜¯åˆ†é…çš„GPUæ•°é‡ï¼ŒNæ˜¯æ€»GPUçš„æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;åªæœ‰å½“æœåŠ¡å™¨çš„é«˜åº¦è¶…è¿‡1æ—¶ï¼Œæ‰ä¼šä½¿ç”¨æš‚åœ/æ¢å¤æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é›†ç¾¤çš„é«˜åº¦
&lt;ul&gt;
&lt;li&gt;è¢«å®šä¹‰ä¸ºå…¶æ‰€æœ‰æœåŠ¡å™¨çš„æœ€å¤§é«˜åº¦ã€‚&lt;/li&gt;
&lt;li&gt;å½“é›†ç¾¤çš„é«˜åº¦å¤§äº1æ—¶ï¼Œå°±ä¼šå‡ºç°è¿‡è½½ï¼›å³æ‰€æœ‰ä½œä¸šçš„è¯·æ±‚/åˆ†é…çš„GPUä¹‹å’Œå¤§äºGPUçš„æ€»æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨çš„äº²å’ŒåŠ›
&lt;ul&gt;
&lt;li&gt;è¢«å®šä¹‰ä¸ºåˆ†é…ç»™è¯¥æœåŠ¡å™¨çš„ä½œä¸šç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œæœ€åˆæœåŠ¡å™¨çš„äº²å’ŒåŠ›ä¸ºé›¶ï¼Œå¦‚æœä¸€ä¸ªéœ€è¦ä¸¤ä¸ªGPUçš„ä½œä¸šè¢«åˆ†é…åˆ°ä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆè¯¥æœåŠ¡å™¨çš„äº²å’ŒåŠ›å°±ä¼šå˜æˆä¸¤ä¸ªã€‚&lt;/li&gt;
&lt;li&gt;è¿™ä¸ªå‚æ•°è¢«è°ƒåº¦å™¨ç”¨æ¥å°†å…·æœ‰ç±»ä¼¼GPUéœ€æ±‚çš„ä½œä¸šåˆ†é…åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›®æ ‡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gandivaè°ƒåº¦å™¨çš„ä¸»è¦è®¾è®¡ç›®æ ‡æ˜¯&lt;strong&gt;ä¸ºä½œä¸šæä¾›æ—©æœŸåé¦ˆ&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;åœ¨æµè¡Œçš„è°ƒåº¦å™¨ä¸­ï¼Œä½œä¸šåœ¨è¿‡è½½æœŸé—´ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;Gandivaé€šè¿‡ç«‹å³ä¸ºæ–°ä½œä¸šåˆ†é…GPUå¹¶ä½¿ç”¨suspend-resumeæœºåˆ¶æä¾›æ—©æœŸç»“æœæ¥æ”¯æŒè¶…é¢è®¢é˜…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒä¸ªè®¾è®¡ç›®æ ‡æ˜¯&lt;strong&gt;é›†ç¾¤æ•ˆç‡&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;é€šè¿‡ä¸€ä¸ªæŒç»­çš„ä¼˜åŒ–è¿‡ç¨‹æ¥å®ç°ï¼Œè¯¥è¿‡ç¨‹ä½¿ç”¨äº†å‰–æå’Œè´ªå©ªçš„å¯å‘å¼ï¼Œåˆ©ç”¨äº†è¯¸å¦‚è£…ç®±ã€è¿ç§»å’Œå¢é•¿-æ”¶ç¼©ç­‰æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é›†ç¾¤çº§çš„å…¬å¹³æ€§&lt;strong&gt;ä¸æ˜¯&lt;/strong&gt;Gandivaçš„è®¾è®¡ç›®æ ‡ã€‚
&lt;ul&gt;
&lt;li&gt;åªå…³æ³¨ä½¿ç”¨æš‚åœ-æ¢å¤æœºåˆ¶åœ¨æ¯ä¸ªæœåŠ¡å™¨ä¸Šæä¾›ä½œä¸šä¹‹é—´çš„å…¬å¹³æ€§&lt;/li&gt;
&lt;li&gt;é›†ç¾¤çº§çš„å…¬å¹³æ€§ç•™ç»™æœªæ¥å·¥ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸ºäº†å®ç°è¿™äº›ç›®æ ‡ï¼ŒGandivaè°ƒåº¦å™¨ä»¥ä¸¤ç§æ¨¡å¼è¿è¡Œï¼š
&lt;ul&gt;
&lt;li&gt;å“åº”æ¨¡å¼ï¼šè°ƒåº¦å™¨å¯¹è¯¸å¦‚å·¥ä½œåˆ°è¾¾ã€ç¦»å¼€ã€æœºå™¨æ•…éšœç­‰äº‹ä»¶åšå‡ºååº”&lt;/li&gt;
&lt;li&gt;å†…çœæ¨¡å¼ï¼š ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œè¿‡ç¨‹ä¸­ï¼Œè°ƒåº¦å™¨çš„ç›®æ ‡æ˜¯æé«˜é›†ç¾¤çš„åˆ©ç”¨ç‡å’Œä½œä¸šå®Œæˆæ—¶é—´&lt;/li&gt;
&lt;li&gt;è¯·æ³¨æ„ï¼Œè°ƒåº¦å™¨å¯ä»¥åŒæ—¶åœ¨ä¸¤ç§æ¨¡å¼ä¸‹è¿è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å“åº”æ¨¡å¼&#34;&gt;å“åº”æ¨¡å¼&lt;/h4&gt;
&lt;p&gt;å“åº”æ¨¡å¼è¢«è®¾è®¡ç”¨æ¥å¤„ç†è¯¸å¦‚å·¥ä½œåˆ°è¾¾ã€ç¦»å¼€å’Œæœºå™¨æ•…éšœçš„äº‹ä»¶&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211082206024.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211082206024.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221108220646915&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221108220646915&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å½“ä¸€ä¸ªæ–°çš„ä½œä¸šåˆ°è¾¾æ—¶ï¼Œè°ƒåº¦å™¨ä¸ºè¯¥ä½œä¸šåˆ†é…æœåŠ¡å™¨/GPUã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Gandivaä½¿ç”¨çš„èŠ‚ç‚¹åˆ†é…ç­–ç•¥å¦‚ç®—æ³•1æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;findNodesæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºè¿”å›æ»¡è¶³ä½œä¸šè¯·æ±‚çš„èŠ‚ç‚¹å€™é€‰è€…ï¼Œå¹¶æœ‰ä¸€ä¸ªäº²å’ŒåŠ›çº¦æŸçš„å¯é€‰å‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åˆï¼ŒGandivaè¯•å›¾æ‰¾åˆ°ä¸æ–°å·¥ä½œå…·æœ‰ç›¸åŒäº²å’ŒåŠ›çš„èŠ‚ç‚¹ï¼Œå¹¶åœ¨è¿™äº›èŠ‚ç‚¹ä¸­æ‰¾åˆ°å…·æœ‰æœ€å°è´Ÿè½½çš„èŠ‚ç‚¹ã€‚å¦‚æœå­˜åœ¨è¿™æ ·çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”å®ƒä»¬çš„é«˜åº¦å°äº1ï¼ˆç¬¬5-6è¡Œï¼‰ï¼Œè¯¥èŠ‚ç‚¹å°†è¢«åˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;å¦åˆ™ï¼ŒGandivaè¯•å›¾æ‰¾åˆ°å¹¶åˆ†é…æœªäº²å’Œçš„èŠ‚ç‚¹ï¼ˆç¬¬7-8è¡Œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰è¿™æ ·çš„ç©ºé—²æœåŠ¡å™¨ï¼Œç¬¬ä¸‰ä¸ªé€‰æ‹©æ˜¯å¯»æ‰¾æœ‰ç©ºé—²GPUçš„èŠ‚ç‚¹ï¼ŒåŒæ—¶å¿½ç•¥äº²å’ŒåŠ›ï¼ˆç¬¬9-10è¡Œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è¿™å¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´çš„ç¢ç‰‡åŒ–åˆ†é…ï¼Œä½†æ­£å¦‚æˆ‘ä»¬å°†åœ¨åé¢çœ‹åˆ°çš„ï¼Œè¿ç§»å¯ä»¥ç”¨äºç¢ç‰‡åŒ–ã€‚å¦‚æœä¸Šè¿°æ–¹æ³•éƒ½ä¸å¥æ•ˆï¼Œè¿™æ„å‘³ç€é›†ç¾¤ä¸­æ²¡æœ‰å¯ç”¨çš„GPUã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå­˜åœ¨å…·æœ‰ç›¸åŒäº²å’ŒåŠ›çš„èŠ‚ç‚¹ï¼Œå®ƒä»¬å°†è¢«ç”¨äºæš‚åœ-æ¢å¤ï¼ˆç¬¬11-12è¡Œï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœæ²¡æœ‰ï¼Œä½œä¸šå°†è¢«æ’é˜Ÿï¼ˆç¬¬13-14è¡Œï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ”¾ç½®job&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¼ ç»Ÿçš„è°ƒåº¦å™¨å°†ä½¿ç”¨&lt;strong&gt;ä½œä¸šç¦»å¼€&lt;/strong&gt;æ¥è§¦å‘ä»ç­‰å¾…é˜Ÿåˆ—ä¸­æŒ‘é€‰ä¸‹ä¸€ä¸ªä½œä¸šã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Gandivaæ£€æŸ¥é›†ç¾¤çš„é«˜åº¦æ˜¯å¦å¯ä»¥å‡å°‘&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†è¢«æš‚åœçš„ä½œä¸šè¿ç§»åˆ°æ–°çš„ç©ºé—²GPUä¸Š&lt;/li&gt;
&lt;li&gt;è¿™ä¸ªä½œä¸šå¯èƒ½æ¥è‡ªåŒä¸€å°æœåŠ¡å™¨æˆ–é›†ç¾¤ä¸­çš„ä»»ä½•å…¶ä»–æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;ä½œä¸šçš„ç¦»å¼€ä¹Ÿå¯ä»¥è§¦å‘è¿ç§»ï¼Œä»¥æ”¹å–„ä½ç½®æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Gandivaçš„å·¥ä½œå®‰æ’Policyæ—¶è€ƒè™‘åˆ°äº†ä¸¤ä¸ªå› ç´ ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gandiva&lt;strong&gt;å…è®¸è¶…é¢è®¤è´­&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;å½“ä¸€ä¸ªæœåŠ¡å™¨è¢«è¶…é¢è®¤è´­æ—¶ï¼Œæˆ‘ä»¬ä¼šè¿›è¡Œ&lt;strong&gt;åŠ æƒè½®æµè°ƒåº¦&lt;/strong&gt;ï¼Œç»™æ¯ä¸ªä½œä¸šå…¬å¹³çš„æ—¶é—´ä»½é¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;GPUåˆ†é…ä¸æ˜¯ä½œä¸šåˆ°è¾¾æ—¶çš„ä¸€æ¬¡æ€§äº‹ä»¶ï¼ŒGandivaä½¿ç”¨è‡ªçœæ¨¡å¼æ¥&lt;strong&gt;æŒç»­æ”¹å–„&lt;/strong&gt;é›†ç¾¤çš„åˆ©ç”¨ç‡ã€‚
&lt;ul&gt;
&lt;li&gt;å› æ­¤ï¼ŒGandivaä¾é ä¸€ä¸ªç®€å•çš„ä½œä¸šå®‰ç½®ç­–ç•¥æ¥å¿«é€Ÿåˆ†é…GPUèµ„æºç»™æ–°ä½œä¸šï¼Œä»è€Œå®ç°æ—©æœŸåé¦ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;å†…çœæ¨¡å¼&#34;&gt;å†…çœæ¨¡å¼&lt;/h4&gt;
&lt;p&gt;åœ¨è‡ªçœæ¨¡å¼ä¸‹ï¼ŒGandivaæŒç»­ç›‘æ§å¹¶ä¼˜åŒ–ä½œä¸šåœ¨é›†ç¾¤ä¸­çš„GPUä¸Šçš„ä½ç½®ï¼Œä»¥æé«˜DLTä½œä¸šçš„æ•´ä½“åˆ©ç”¨ç‡å’Œå®Œæˆæ—¶é—´ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è£…ç®±&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åªæœ‰åœ¨è¿‡è½½æ—¶æ‰ä¼šè€ƒè™‘è£…ç®±ã€‚
&lt;ul&gt;
&lt;li&gt;åŸºæœ¬æ€æƒ³ï¼šåœ¨GPUä¸ŠåŒæ—¶è¿è¡Œä¸¤ä¸ªæˆ–å¤šä¸ªä½œä¸šä»¥æé«˜æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;å¯èƒ½æ— æ•ˆ
&lt;ul&gt;
&lt;li&gt;å¦‚æœè£…ç®±å·¥ä½œçš„å†…å­˜éœ€æ±‚åŠ èµ·æ¥é«˜äºGPUçš„å†…å­˜ï¼Œé‚£ä¹ˆä»CPUå†…å­˜ä¸­ &amp;ldquo;åˆ†é¡µ &amp;ldquo;çš„å¼€é”€å°±ä¼šå¾ˆé«˜ï¼Œè£…ç®±å°±æ²¡æœ‰æ•ˆæœã€‚&lt;/li&gt;
&lt;li&gt;å½“ä¸¤ä¸ªæˆ–æ›´å¤šä½œä¸šçš„å†…å­˜éœ€æ±‚å°äºGPUå†…å­˜æ—¶ï¼Œè£…ç®±ä»ç„¶å¯èƒ½ä¸æ¯”æš‚åœ-æ¢å¤æ›´æœ‰æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é‰´äºDLTä½œä¸šçš„å¼‚è´¨æ€§ï¼Œå¯¹è£…ç®±çš„æ€§èƒ½è¿›è¡Œåˆ†æå»ºæ¨¡æ˜¯ä¸€ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ã€‚
&lt;ul&gt;
&lt;li&gt;ç›¸åï¼ŒGandivaä¾é ä¸€ç§è´ªå©ªçš„å¯å‘å¼æ–¹æ³•æ¥è£…ç®±jobã€‚
&lt;ul&gt;
&lt;li&gt;å½“jobåˆ°è¾¾æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯ä½¿ç”¨æš‚åœ-æ¢å¤çš„ç‹¬å æ¨¡å¼è¿è¡Œå®ƒä»¬ï¼Œå¹¶æ”¶é›†å‰–æä¿¡æ¯ï¼ˆGPUåˆ©ç”¨ç‡ã€å†…å­˜å’Œä½œä¸šè¿›å±•ç‡ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åŸºäºå‰–ææ•°æ®ï¼Œè°ƒåº¦å™¨ç»´æŠ¤ä¸€ä¸ªæŒ‰GPUåˆ©ç”¨ç‡æ’åºçš„ä½œä¸šåˆ—è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒåº¦å™¨è´ªå©ªåœ°æŒ‘é€‰å‡ºGPUåˆ©ç”¨ç‡æœ€ä½çš„ä½œä¸šï¼Œå¹¶è¯•å›¾å°†å…¶è£…ç®±åˆ°å…·æœ‰æœ€ä½GPUåˆ©ç”¨ç‡çš„GPUä¸Šã€‚æˆ‘ä»¬åªåœ¨è£…ç®±ä½œä¸šçš„æ€»å†…å­˜åˆ©ç”¨ç‡ä¸è¶…è¿‡GPUçš„æ€»å†…å­˜æ—¶æ‰è¿™æ ·åšã€‚&lt;/li&gt;
&lt;li&gt;å½“è£…ç®±ä½œä¸šçš„æ€»ååé‡å¤§äºæ—¶é—´åˆ‡å‰²æ—¶ï¼Œè£…ç®±è¢«è®¤ä¸ºæ˜¯æˆåŠŸçš„ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè£…ç®±ä¸æˆåŠŸï¼Œæˆ‘ä»¬å°±æ’¤æ¶ˆè£…ç®±ï¼Œå¹¶å°è¯•ä¸‹ä¸€ä¸ªåˆ©ç”¨ç‡æœ€ä½çš„GPUã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè£…ç®±æˆåŠŸï¼Œæˆ‘ä»¬æ‰¾åˆ°ä¸‹ä¸€ä¸ªåˆ©ç”¨ç‡è¾ƒä½çš„ä½œä¸šå¹¶é‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ ¹æ®æˆ‘ä»¬çš„è¯„ä¼°ï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸ªç®€å•çš„è´ªå©ªçš„å¯å‘å¼æ–¹æ³•å®ç°äº†26%çš„æ•ˆç‡æå‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿ç§»&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GPUçš„ä½ç½®æ€§åœ¨ä¸€äº›ä½œä¸šçš„æ€§èƒ½ä¸­èµ·ç€é‡è¦ä½œç”¨ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨Gandivaä¸­
&lt;ul&gt;
&lt;li&gt;æ¯å½“ä½œä¸šç¦»å¼€æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šä½¿ç”¨è¿ç§»æ¥æ”¹å–„ä½ç½®æ€§ï¼Œ&lt;/li&gt;
&lt;li&gt;åŒæ—¶ä¹Ÿä½œä¸ºä¸€ä¸ªåå°è¿›ç¨‹æ¥ &amp;ldquo;æ•´ç† &amp;ldquo;é›†ç¾¤çš„å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†æ”¹å–„ä½ç½®æ€§ï¼Œæˆ‘ä»¬æŒ‘é€‰é‚£äº›ä¸åœ¨åŒä¸€åœ°ç‚¹çš„ä½œä¸šï¼Œå¹¶è¯•å›¾æ‰¾åˆ°ä¸€ä¸ªæ–°çš„åŒä¸€åœ°ç‚¹çš„ä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211091112968.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/202211091112968.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20221109111201868&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20221109111201868&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å›¾8å±•ç¤ºäº†ä¸€ä¸ªé›†ç¾¤å®éªŒçš„ä¾‹å­ï¼ˆç¬¬6.4èŠ‚ï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;å½“ä¸€ä¸ªæœ‰4ä¸ªä½œä¸šã€æ¯ä¸ªä½œä¸šéœ€è¦2ä¸ªGPUçš„å¤šä½œä¸šè¢«å®‰æ’æ—¶ï¼Œå®ƒçš„GPUäº²å’Œæ€§å¾ˆå·®ï¼›
&lt;ul&gt;
&lt;li&gt;åªæœ‰J0çš„ä¸¤ä¸ªGPUè¢«å®‰æ’åœ¨ä¸€èµ·ï¼Œè€Œå¤šä½œä¸šä¸­çš„å…¶ä»–3ä¸ªä½œä¸šï¼ˆJ1ã€J2å’ŒJ3ï¼‰è¢«åˆ†é…åˆ°ä¸åŒçš„GPUã€‚&lt;/li&gt;
&lt;li&gt;ä¸‰åˆ†é’Ÿåï¼Œä¸€ä¸ªèƒŒæ™¯è®­ç»ƒä½œä¸šDeepSpeechå®Œæˆäº†ï¼Œå¹¶é‡Šæ”¾äº†å®ƒçš„8ä¸ªGPUã€‚&lt;/li&gt;
&lt;li&gt;8ä¸ªGPUä¸­çš„3ä¸ªï¼Œåœ¨å›¾8ä¸­æ ‡è®°ä¸ºDï¼Œä½äºä¸‰ä¸ªä¸åŒçš„æœåŠ¡å™¨ï¼ˆæœåŠ¡å™¨1ã€3å’Œ4ï¼‰ï¼Œå¯ä»¥æé«˜å¤šä»»åŠ¡çš„è®­ç»ƒæ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼ŒGandivaå¯åŠ¨äº†è¿ç§»è¿‡ç¨‹ï¼Œå°†J1ã€J2å’ŒJ3é‡æ–°å®‰ç½®åˆ°åŒåœ°çš„GPUã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å»ç¢ç‰‡åŒ–
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬åœ¨æ‰€æœ‰éç©ºé—²çš„æœåŠ¡å™¨ä¸­æŒ‘é€‰å‡ºæ‹¥æœ‰æœ€å¤šç©ºé—²GPUçš„æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åæˆ‘ä»¬å°è¯•å°†è¿è¡Œåœ¨è¯¥æœåŠ¡å™¨ä¸Šçš„ä½œä¸šè¿ç§»åˆ°å…¶ä»–æœåŠ¡å™¨ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;åªè¦æ€§èƒ½æŸå¤±å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œä½œä¸šå°±ä¼šè¢«è¿ç§»åˆ°å¦ä¸€ä¸ªç©ºé—²GPUè¾ƒå°‘çš„æœåŠ¡å™¨ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ¯å°éç©ºé—²æœåŠ¡å™¨ä¸Šçš„ç©ºé—²GPUæ•°é‡å°‘äºé˜ˆå€¼ï¼ˆåœ¨æˆ‘ä»¬çš„å®éªŒä¸­æ˜¯4ä¸ªä¸­çš„3ä¸ªï¼‰ï¼Œæˆ–è€…æ²¡æœ‰ä½œä¸šä¼šä»è¿ç§»ä¸­å—ç›Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰©ç¼©&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¢é•¿-æ”¶ç¼©çš„æ¡ä»¶
&lt;ul&gt;
&lt;li&gt;é›†ç¾¤æœªè¢«å……åˆ†åˆ©ç”¨&lt;/li&gt;
&lt;li&gt;DLTä½œä¸šæ˜ç¡®æŒ‡å‡ºè‡ªå·±å¯ä»¥è¿›è¡Œå¢é•¿-æ”¶ç¼©&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é™åˆ¶
&lt;ul&gt;
&lt;li&gt;åœ¨æˆ‘ä»¬ç›®å‰çš„ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬åªè®©ä½œä¸šå¢é•¿åˆ°&lt;strong&gt;å•å°æœåŠ¡å™¨&lt;/strong&gt;ä¸­å¯ç”¨çš„æœ€å¤§GPUæ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;æ­¤å¤–ï¼Œæˆ‘ä»¬åªåœ¨&lt;strong&gt;ç©ºé—²ä¸€æ®µæ—¶é—´å&lt;/strong&gt;è§¦å‘å¢é•¿ï¼Œä»¥é¿å…æƒŠæ‰°ï¼Œ&lt;/li&gt;
&lt;li&gt;åœ¨æ–°ä½œä¸šå¯èƒ½éœ€è¦GPUæ—¶&lt;strong&gt;ç«‹å³æ”¶ç¼©&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ—¶åˆ†&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬åœ¨æ¯ä¸ªæœåŠ¡å™¨ä¸­æ”¯æŒè½®å›è°ƒåº¦ï¼Œä»¥å…¬å¹³åœ°åˆ†äº«GPUã€‚&lt;/li&gt;
&lt;li&gt;å½“ä½œä¸šæœ‰å¤šä¸ªä¼˜å…ˆçº§æ—¶ï¼Œè¾ƒé«˜ä¼˜å…ˆçº§çš„ä½œä¸šå°†ä¸ä¼šè¢«æš‚åœä»¥é€‚åº”è¾ƒä½ä¼˜å…ˆçº§çš„ä½œä¸šã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€å°æœåŠ¡å™¨è¢«è¾ƒé«˜ä¼˜å…ˆçº§çš„ä½œä¸šå®Œå…¨åˆ©ç”¨ï¼Œå¦‚æœå¯è¡Œçš„è¯ï¼Œè¾ƒä½ä¼˜å…ˆçº§çš„ä½œä¸šå°†è¢«è¿ç§»åˆ°å¦ä¸€å°æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å®ç°&#34;&gt;å®ç°&lt;/h2&gt;
&lt;p&gt;DLTä½œä¸šè¢«å°è£…ä¸ºDockerå®¹å™¨ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬å®šåˆ¶çš„DLå·¥å…·ç®±å’ŒGandivaå®¢æˆ·ç«¯çš„ç‰ˆæœ¬ã€‚è¿™äº›å·¥ä½œè¢«æäº¤ç»™Kubernetesç³»ç»Ÿã€‚Gandivaè¿˜å®ç°äº†ä¸€ä¸ªå®šåˆ¶çš„è°ƒåº¦å™¨ï¼Œç„¶åå¯¹è¿™äº›ä½œä¸šè¿›è¡Œè°ƒåº¦ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è°ƒåº¦å™¨&#34;&gt;è°ƒåº¦å™¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Gandivaç”±ä¸€ä¸ªå®šåˆ¶çš„ä¸­å¤®è°ƒåº¦å™¨å’Œä¸€ä¸ªå®¢æˆ·ç«¯ç»„ä»¶ç»„æˆï¼Œå®¢æˆ·ç«¯æ˜¯æ¯ä¸ªDLTå·¥ä½œå®¹å™¨çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è°ƒåº¦å™¨åªæ˜¯å¦ä¸€ä¸ªç”±Kubernetesç®¡ç†çš„å®¹å™¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kubernetesè´Ÿè´£æ•´ä½“é›†ç¾¤ç®¡ç†ï¼Œ&lt;/li&gt;
&lt;li&gt;Gandivaè°ƒåº¦å™¨ç®¡ç†DLTä½œä¸šçš„è°ƒåº¦ã€‚&lt;/li&gt;
&lt;li&gt;Gandivaè°ƒåº¦å™¨ä½¿ç”¨Kubernetes APIæ¥è·å–é›†ç¾¤èŠ‚ç‚¹å’Œå®¹å™¨ä¿¡æ¯ï¼Œæ¯å½“æäº¤ä¸€ä¸ªæ–°çš„å®¹å™¨æ—¶ï¼Œè°ƒåº¦å™¨ä¼šæ ¹æ®è°ƒåº¦ç­–ç•¥å°†å…¶åˆ†é…ç»™é›†ç¾¤ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªGPUã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“ä¸€ä¸ªå®¹å™¨è¢«å®‰æ’åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæ—¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ€åˆåªæœ‰Gandivaå®¢æˆ·ç«¯å¼€å§‹æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œå®ƒè½®è¯¢Gandivaè°ƒåº¦å™¨ï¼Œä»¥ç¡®å®šå“ªäº›GPUå¯ç”¨äºDLTå·¥ä½œï¼Œ&lt;/li&gt;
&lt;li&gt;å¹¶ä½¿ç”¨æš‚åœ/æ¢å¤å’Œè¿ç§»å‘½ä»¤æ§åˆ¶DLTå·¥ä½œçš„æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è™½ç„¶æˆ‘ä»¬é›†ç¾¤ä¸­æ‰€æœ‰GPUçš„è°ƒåº¦å®Œå…¨ç”±ä¸­å¤®è°ƒåº¦å™¨æ§åˆ¶ï¼Œä½†å¦‚æœå¼¹æ€§æˆä¸ºæˆ‘ä»¬å…³å¿ƒçš„é—®é¢˜ï¼Œå¯èƒ½éœ€è¦ä¸€ä¸ªåˆ†å±‚çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;dlå·¥å…·çš„ä¿®æ”¹&#34;&gt;DLå·¥å…·çš„ä¿®æ”¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;PyTorchçš„æ—¶åˆ†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å‘å‡ºSIGTSTPä¿¡ä¿¡å·&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gandiva clientä¼šå‘å‡ºä¸€ä¸ªSIGTSTPä¿¡å·ï¼Œè¡¨ç¤ºå·¥å…·åŒ…å¿…é¡»æš‚åœè¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒè¿˜æŒ‡ç¤ºæ¢å¤æ˜¯å¦åº”è¯¥é€šè¿‡å†…å­˜æ–‡ä»¶åœ¨æ–°çš„GPUä¸­å‘ç”Ÿã€‚&lt;/li&gt;
&lt;li&gt;æ”¶åˆ°ä¿¡å·åï¼Œå·¥å…·åŒ…ä¼šè®¾ç½®ä¸€ä¸ªæš‚åœæ ‡å¿—ï¼Œå¹¶ä¸”åªåœ¨ä¸€ä¸ªå°æ‰¹å¤„ç†è¾¹ç•Œçš„æœ«ç«¯æ‰§è¡Œæš‚åœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¯†åˆ«mini-batchè¾¹ç•Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨Tensorflowè¿™ä¸ªå®šä¹‰å¹¶è¿è¡Œçš„å·¥å…·åŒ…ä¸­ï¼Œmini-batchçš„è¾¹ç•Œå¾ˆå®¹æ˜“è¯†åˆ«ï¼ˆsession.run()çš„ç»“æŸï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨PyTorchè¿™ä¸ªé€ä¸€å®šä¹‰çš„å·¥å…·åŒ…ä¸­ï¼Œ
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬é€šè¿‡è·Ÿè¸ªGPUå†…å­˜ä½¿ç”¨å‘¨æœŸæ¥ç¡®å®šmini-batchçš„è¾¹ç•Œï¼Œ&lt;/li&gt;
&lt;li&gt;è¿™æ˜¯PyTorchçš„GPUå†…å­˜ç®¡ç†å™¨ï¼ˆTHCCachingAllocatorï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œ&lt;/li&gt;
&lt;li&gt;æ¯å½“GPUå†…å­˜è¢«é‡Šæ”¾æ—¶ï¼Œæˆ‘ä»¬å°±ä¼šå¯»æ‰¾ä¸€ä¸ª&lt;strong&gt;å‘¨æœŸæœ€å°å€¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰§è¡Œæš‚åœ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€æ—¦æ£€æµ‹åˆ°å‘¨æœŸæœ€å°å€¼ï¼Œå·¥å…·åŒ… iï¼‰å°†æ‰€æœ‰å­˜å‚¨çš„å¯¹è±¡ä»GPUå¤åˆ¶åˆ°CPUï¼Œiiï¼‰é‡Šæ”¾GPUåˆ†é…ï¼Œä»¥åŠiiiï¼‰æš‚åœè¿›ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¢å¤è¿›ç¨‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“Gandivaå®¢æˆ·ç«¯å‘å‡ºSIGCONTä¿¡å·æ—¶ï¼Œå·¥å…·åŒ…ä¼šåˆ†é…GPUå†…å­˜ï¼Œå°†å­˜å‚¨çš„å¯¹è±¡ä»CPUå¤åˆ¶åˆ°GPUï¼Œå¹¶æ¢å¤è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†å¤„ç†é‡æ–°å¯åŠ¨æ—¶çš„&lt;strong&gt;åœ°å€æ”¹å˜&lt;/strong&gt;ï¼Œæˆ‘ä»¬è·Ÿè¸ªå·¥å…·åŒ…ä¸­çš„GPUå¯¹è±¡ï¼Œå¹¶ç”¨æ–°çš„åœ°å€å¯¹å…¶è¿›è¡Œä¿®è¡¥ã€‚&lt;/li&gt;
&lt;li&gt;æ”¹å˜GPUéœ€è¦è°ƒç”¨cudaDeviceResetå’ŒCudaInitï¼Œè¿™å¯èƒ½éœ€è¦5-10ç§’ã€‚æˆ‘ä»¬é€šè¿‡åœ¨ &amp;ldquo;æš‚åœ &amp;ldquo;æ—¶åœ¨åå°æ‰§è¡Œè¿™äº›æ“ä½œæ¥&lt;strong&gt;éšè—è¿™ä¸ªå»¶æ—¶&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Tensorflowè¿ç§»&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬åœ¨æ¯ä¸ªæœåŠ¡å™¨ä¸Šéƒ¨ç½²äº†ä¸€ä¸ªè¿ç§»åŠ©æ‰‹ï¼Œä»¥æ”¯æŒæŒ‰éœ€checkpointå’Œè¿ç§»ã€‚
&lt;ul&gt;
&lt;li&gt;å½“æ”¶åˆ°æ¥è‡ªè°ƒåº¦å™¨çš„è¿ç§»å‘½ä»¤æ—¶ï¼Œç›®çš„åœ°åŠ©æ‰‹é¦–å…ˆ&lt;strong&gt;é¢„çƒ­TFä¼šè¯&lt;/strong&gt;å¹¶ç­‰å¾…æ£€æŸ¥ç‚¹çš„åˆ°æ¥ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œæºå¸®åŠ©è€…è¦æ±‚TFä¿å­˜æ£€æŸ¥ç‚¹ï¼Œåœ¨è·¨æœåŠ¡å™¨è¿ç§»çš„æƒ…å†µä¸‹å°†æ£€æŸ¥ç‚¹ç§»åˆ°ç›®çš„åœ°ï¼Œæœ€åæ¢å¤è®­ç»ƒä¼šè¯ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†åŠ å¿«è¿ç§»è¿‡ç¨‹ï¼Œæˆ‘ä»¬é‡‡ç”¨Ramdiskå°†æ£€æŸ¥ç‚¹ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚åœ¨è·¨æœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œä¿®æ”¹åçš„TFé€šè¿‡ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼ˆNFSï¼‰åè®®å°†æ£€æŸ¥ç‚¹ç›´æ¥ä¿å­˜åˆ°è¿œç¨‹Ramdiskã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å½“Migration Helperè¦æ±‚ä½œä¸šæ‰§è¡Œcheckpointæ—¶
&lt;ul&gt;
&lt;li&gt;ä¿®æ”¹åçš„TFä¼šåœ¨ä¸€ä¸ªå°æ‰¹å¤„ç†ç»“æŸæ—¶è°ƒç”¨tf.Saverã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºæ•°æ®çš„å¹¶è¡Œæ€§ï¼Œæ£€æŸ¥ç‚¹åªåŒ…æ‹¬ä¸€ä¸ªGPUä¸­çš„æ¨¡å‹ï¼Œè€Œä¸è€ƒè™‘è®­ç»ƒä¸­ä½¿ç”¨çš„GPUæ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†è¿›ä¸€æ­¥åŠ å¿«TFçš„è¿ç§»ï¼Œæˆ‘ä»¬åœ¨æ£€æŸ¥ç‚¹ä¸­ä¸åŒ…æ‹¬å…ƒå›¾ç»“æ„ï¼Œå› ä¸ºå®ƒå¯ä»¥æ ¹æ®ç”¨æˆ·ä»£ç è¿›è¡Œé‡å»ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨&lt;strong&gt;é¢„çƒ­é˜¶æ®µ&lt;/strong&gt;ï¼Œä¿®æ”¹åçš„TFæ£€æŸ¥GPUé…ç½®å¹¶é‡å»ºå…ƒå›¾ã€‚
&lt;ul&gt;
&lt;li&gt;å®ƒè¿›ä¸€æ­¥åˆ›å»ºExecutoræ¥è¿è¡Œé¢„çƒ­æ“ä½œï¼Œä»¥ç¡®ä¿åˆå§‹åŒ–ä¸ä¼šè¢«æ‡’æƒ°åœ°æ¨è¿Ÿã€‚&lt;/li&gt;
&lt;li&gt;å½“æ¢å¤è®­ç»ƒè¿‡ç¨‹æ—¶ï¼Œä¿®æ”¹åçš„TFåŠ è½½æ£€æŸ¥ç‚¹ï¼Œç”±å¤šä¸ªGPUå¹¶è¡ŒåŠ è½½ï¼Œå¹¶ç»§ç»­è¿›è¡Œè®­ç»ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ã€Dockerã€‘Dockerç”¨æ³•</title>
        <link>https://tweakzx.github.io/p/dockerdocker%E7%94%A8%E6%B3%95/</link>
        <pubDate>Tue, 01 Nov 2022 16:44:33 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/dockerdocker%E7%94%A8%E6%B3%95/</guid>
        <description>&lt;h1 id=&#34;docker-çš„ä½¿ç”¨æ–¹æ³•&#34;&gt;docker çš„ä½¿ç”¨æ–¹æ³•&lt;/h1&gt;
&lt;h2 id=&#34;dockerçš„å®‰è£…&#34;&gt;dockerçš„å®‰è£…&lt;/h2&gt;
&lt;p&gt;dockerçš„ç‰ˆæœ¬æ¯”è¾ƒå¤šï¼Œ å¤§å®¶å¯ä»¥è‡ªè¡Œæœç´¢å®‰è£…æ–¹å¼ï¼Œ ä»¥ä¸‹åªæ˜¯å‚è€ƒã€‚&lt;/p&gt;
&lt;h3 id=&#34;ubuntu&#34;&gt;Ubuntu&lt;/h3&gt;
&lt;p&gt;å®‰è£…docker.ioæ¯”è¾ƒæ–¹ä¾¿&lt;/p&gt;
&lt;h4 id=&#34;æŸ¥è¯¢å¯å®‰è£…ç‰ˆæœ¬&#34;&gt;æŸ¥è¯¢å¯å®‰è£…ç‰ˆæœ¬&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;apt-cache madison docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å®‰è£…docker&#34;&gt;å®‰è£…docker&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt install docker.io
æŒ‡å®šå®‰è£…ç‰ˆæœ¬
sudo apt install docker.io&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;18.09.1-0ubuntu1 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å¯åŠ¨docker&#34;&gt;å¯åŠ¨docker&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo systemctl start docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;é‡å¯docker&#34;&gt;é‡å¯docker&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo systemctl daemon-reload
sudo systemctl restart docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;è®¾ç½®å¼€æœºè‡ªå¯åŠ¨&#34;&gt;è®¾ç½®å¼€æœºè‡ªå¯åŠ¨&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ sudo systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; docker
æˆ–
$ sudo systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; docker.service --now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;éªŒè¯docker&#34;&gt;éªŒè¯docker&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;systemctl status docker
docker --version
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;centos&#34;&gt;centOS&lt;/h3&gt;
&lt;p&gt;éœ€è¦å®‰è£…docker-ceï¼Œ dockerç¤¾åŒºç‰ˆ&lt;/p&gt;
&lt;h4 id=&#34;å¸è½½æ—§ç‰ˆæœ¬&#34;&gt;å¸è½½æ—§ç‰ˆæœ¬&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;yum remove docker  docker-common docker-selinux docker-engine
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å®‰è£…ä¾èµ–&#34;&gt;å®‰è£…ä¾èµ–&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;yum install -y yum-utils device-mapper-persistent-data lvm2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;è®¾ç½®æº&#34;&gt;è®¾ç½®æº&lt;/h4&gt;
&lt;p&gt;é˜¿é‡Œæº&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¸…åæº&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;yum-config-manager --add-repo https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/docker-ce.repo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å®‰è£…&#34;&gt;å®‰è£…&lt;/h4&gt;
&lt;p&gt;æŸ¥çœ‹å¯å®‰è£…ç‰ˆæœ¬&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;yum list docker-ce --showduplicates &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; sort -r
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€‰æ‹©ç‰ˆæœ¬å®‰è£…&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;yum -y install docker-ce-18.03.1.ce
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å¯åŠ¨docker-1&#34;&gt;å¯åŠ¨docker&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;systemctl start docker
systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;docker-çš„åŸºæœ¬å‘½ä»¤&#34;&gt;docker çš„åŸºæœ¬å‘½ä»¤&lt;/h2&gt;
&lt;h3 id=&#34;æœ¬åœ°é•œåƒç®¡ç†&#34;&gt;æœ¬åœ°é•œåƒç®¡ç†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-images-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;images&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-rmi-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;rmi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-tag-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;tag&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-build-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-history-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;history&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-save-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;save&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-load-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;load&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-import-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;import&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†&#34;&gt;å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-run-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;run&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-start-stop-restart-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;start/stop/restart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-kill-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;kill&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-rm-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;rm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-pause-unpause-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;pause/unpause&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-create-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;create&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-exec-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;exec&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å®¹å™¨æ“ä½œ&#34;&gt;å®¹å™¨æ“ä½œ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-ps-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-inspect-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;inspect&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-top-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;top&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-attach-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;attach&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-events-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;events&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-logs-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;logs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-wait-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;wait&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-export-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;export&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-port-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;port&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-stats-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;stats&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å®¹å™¨rootfså‘½ä»¤&#34;&gt;å®¹å™¨rootfså‘½ä»¤&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-commit-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;commit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-cp-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;cp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-diff-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;diff&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é•œåƒä»“åº“&#34;&gt;é•œåƒä»“åº“&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-login-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;login&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-pull-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;pull&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-push-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;push&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-search-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;search&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.runoob.com/docker/docker-import-command.html&#34;&gt;https://www.runoob.com/docker/docker-import-command.html&lt;/a&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;infoversion&#34;&gt;info|version&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-info-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;info&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.runoob.com/docker/docker-version-command.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;version&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;docker-éƒ¨ç½²å®ä¾‹&#34;&gt;docker éƒ¨ç½²å®ä¾‹&lt;/h2&gt;
&lt;h3 id=&#34;hello-world&#34;&gt;Hello World&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;runoob@runoob:~$ docker run ubuntu:15.10 /bin/echo &amp;quot;Hello world&amp;quot;
Hello world
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;redis&#34;&gt;Redis&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;docker pull redis:latest

docker run -itd --name redis-test -p 6379:6379 redis

docker exec -it redis-test /bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ç›¸å…³é—®é¢˜&#34;&gt;ç›¸å…³é—®é¢˜&lt;/h2&gt;
&lt;h3 id=&#34;1-dockerio-å’Œdocker-ce-çš„åŒºåˆ«&#34;&gt;1. docker.io å’Œdocker-ce çš„åŒºåˆ«&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»´æŠ¤è€…ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;docker-ce æ˜¯ docker å®˜æ–¹ç»´æŠ¤çš„&lt;/li&gt;
&lt;li&gt;docker.io æ˜¯ Debian å›¢é˜Ÿç»´æŠ¤çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾èµ–ç®¡ç†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;docker.io é‡‡ç”¨ apt çš„æ–¹å¼ç®¡ç†ä¾èµ–&lt;/li&gt;
&lt;li&gt;docker-ce ç”¨ go çš„æ–¹å¼ç®¡ç†ä¾èµ–ï¼Œä¼šè‡ªå·±ç®¡ç†æ‰€æœ‰çš„ä¾èµ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;2&#34;&gt;2.&lt;/h3&gt;
</description>
        </item>
        <item>
        <title>ã€å¿ƒåŠã€‘ä¸€äº›å¾€äº‹</title>
        <link>https://tweakzx.github.io/p/%E5%BF%83%E5%8F%8A%E4%B8%80%E4%BA%9B%E5%BE%80%E4%BA%8B/</link>
        <pubDate>Fri, 21 Oct 2022 15:52:45 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E5%BF%83%E5%8F%8A%E4%B8%80%E4%BA%9B%E5%BE%80%E4%BA%8B/</guid>
        <description>&lt;h2 id=&#34;çªå‘æ¶ç–¾&#34;&gt;çªå‘æ¶ç–¾&lt;/h2&gt;
&lt;h3 id=&#34;å…³äºæ‰‹å¤´çš„å·¥ä½œ&#34;&gt;å…³äºæ‰‹å¤´çš„å·¥ä½œ&lt;/h3&gt;
&lt;p&gt;ç°åœ¨åœ¨å·¥ä½ä¸Šæ‘¸é±¼ï¼Œå‡†å¤‡åœ¨åˆ«äººçš„ä»£ç ï¼ˆgaiaGPUï¼‰ä¸Šå¢åŠ ä¸€äº›åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è‡ªå·±çœ‹ç›¸å…³çš„ä»£ç ï¼Œè®ºæ–‡ï¼ŒçŸ¥è¯†å·²ç»è¿‡å»å¥½ä¹…äº†ï¼Œå§‹ç»ˆæ²¡æœ‰ä¸‹æ‰‹å†™å‡ºä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;ä¼¼ä¹æŠ˜è…¾äº†å¾ˆä¹…ï¼Œç¡®å®ä¹Ÿæ²¡æœ‰å¼„æ‡‚ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®æ˜¯è¯¾é¢˜ç»„å”¯ä¸€çš„é¡¹ç›®äº†ï¼ŒæŒ‰é“ç†æ¥è¯´æˆ‘åº”è¯¥æœ‰ç€å¤§é‡çš„ç²¾åŠ›æ¥åšè¿™ä»¶äº‹ï¼Œä½†ä¸çŸ¥ä¸ºä»€ä¹ˆæ€»æ˜¯ç²¾ç¥éƒéƒã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…³äºä¸ºä»€ä¹ˆä¼šçªå‘æ¶ç–¾&#34;&gt;å…³äºä¸ºä»€ä¹ˆä¼šçªå‘æ¶ç–¾&lt;/h3&gt;
&lt;p&gt;æ‰€è°“çªå‘ï¼Œ æ— éæ˜¯çªç„¶é—´ä»€ä¹ˆéƒ½ä¸æƒ³åšäº†ï¼Œè¿›å…¥åˆ°ä¸€ç§æŠ‘éƒé¢“åºŸçš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;å¬åˆ°åé¢è¯¾é¢˜ç»„çš„å­¦å§åœ¨åæ§½å¥¹å¸¦çš„ä¸€ä¸ªå­¦ç”Ÿèƒ½åŠ›å¾ˆå·®ï¼Œæ— æ³•æ¨è¿›å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å¬åˆ°ä¹‹åè§‰å¾—å¥½åƒæ˜¯æœ‰å¾ˆå¤šèš‚èšåœ¨èº«ä¸Šçˆ¬ï¼Œæ¯•ç«Ÿæˆ‘ä¹Ÿèƒ½åŠ›å¾ˆå·®ï¼Œé¡¹ç›®åšäº†ä¸€æ®µæ—¶é—´ä½†æ˜¯æ²¡æœ‰æ¨è¿›ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€æ–¹é¢å°±æ˜¯å¯¼å¸ˆæŠŠæˆ‘æ‰‹å¤´çš„å·¥ä½œå¥½åƒå·å·äº¤ç»™ä¸€ä¸ªå­¦å¼Ÿæ¥åšäº†ï¼Œè¿™æ˜¯è®©æˆ‘æ›´åŠ æœ‰å‹åŠ›çš„ä¸€ä»¶äº‹ã€‚&lt;/p&gt;
&lt;p&gt;æ¯•ç«Ÿå¯¼å¸ˆæ˜¯ä¸€ä¸ªæ“…é•¿é˜´é˜³æ€ªæ°”æ¶æ„è®½åˆºçš„äººã€‚&lt;/p&gt;
&lt;p&gt;ä»–å·å·çš„è¿™æ ·åšè™½ç„¶ä¸ä¸€å®šæ˜¯å‡ºäºåå¿ƒï¼Œä½†æ˜¯å­¦å¼Ÿå¦‚æœåšå‡ºæ¥äº†ï¼Œè¿›åº¦æ¯”æˆ‘å¿«çš„è¯ï¼Œé‚£æˆ‘ä¸€å®šæ˜¯å…ä¸äº†æ”¶åˆ°ä¸€äº›ä¸å¤§å‹å–„çš„è¯„è®ºçš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä»€ä¹ˆæ˜¯æˆ‘æƒ³è¦çš„å‘¢&#34;&gt;ä»€ä¹ˆæ˜¯æˆ‘æƒ³è¦çš„å‘¢&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®æ¶‰åŠåˆ°k8sï¼Œ gpuï¼Œ dockerï¼Œæœºå™¨å­¦ä¹ ï¼Œä¼¼ä¹é¡¹ç›®æ¶‰åŠçš„ä¸œè¥¿å¾ˆå¤šï¼Œæˆ‘ä¸€æ—¶é—´æ‘¸ä¸åˆ°è¯¥æ€ä¹ˆæ‰©å……è‡ªå·±çš„çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…è¦åšçš„åŠŸèƒ½åˆä¼¼ä¹ä»€ä¹ˆéƒ½ä¸éœ€è¦æ‡‚ï¼Œåªè¦åœ¨åˆ«äººçš„ä»£ç ä¸ŠåŠ ä¸€ç‚¹é€»è¾‘å°±è¡Œï¼Œå¯æ˜¯æˆ‘çœ‹æºç åˆæ˜¯æ‘¸ä¸åˆ°è¯¥åœ¨ä»€ä¹ˆåœ°æ–¹åŠ ã€‚&lt;/p&gt;
&lt;p&gt;ä¼¼ä¹æˆ‘æ€»æ˜¯åœ¨åˆ¶é€ éšœç¢ï¼Œé˜»ç¢è‡ªå·±åšåˆ°è¿™ä»¶äº‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æ€»æ˜¯å¸Œæœ›æœ‰ä¸ªæ‡‚åšé¡¹ç›®çš„äººæ¥æŒ‡å¯¼ä¸€ä¸‹æˆ‘ï¼Œç‚¹ç ´å½“å‰çš„è¿·æ´¥ã€‚&lt;/p&gt;
&lt;p&gt;å¯æ˜¯å¯¼å¸ˆè‚¯å®šæ˜¯æŒ‡æœ›ä¸ä¸Šäº†ï¼Œä»–å‡ ä¹ä»€ä¹ˆéƒ½ä¸æ‡‚ï¼Œç»„é‡Œçš„åŒå­¦åšçš„ä¸œè¥¿åˆéƒ½ä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç°å®å¾€å¾€æ˜¯&#34;&gt;ç°å®å¾€å¾€æ˜¯&amp;hellip;&lt;/h3&gt;
&lt;p&gt;ä¸å…‰æ˜¯å¯¼å¸ˆæ°´å¹³å¥‡å·®ï¼Œæ²¡æœ‰æŒ‡å¯¼ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªå·±åœ¨å­¦ä¹ è¿™ä»¶äº‹ä¸Šä¹Ÿæ˜¯ä¸å¤ªæ“…é•¿ï¼Œæ¯æ¬¡æ‰“ç®—è¦å­¦ä¹ ä»€ä¹ˆä¸œè¥¿ï¼Œæ€»æ˜¯æ„Ÿè§‰è‡ªå·±å­¦ä¸ä¼šã€‚&lt;/p&gt;
&lt;p&gt;æˆ–è€…è¯´æ ¹æœ¬ä½“ä¼šä¸åˆ°åœ¨å­¦ä¹ çš„æ„Ÿè§‰ï¼Œæ›´åˆ«è°ˆå­¦ä¼šä»€ä¹ˆçš„æ„Ÿè§‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯èƒ½æ˜¯å¤šå¹´çš„é«˜è€ƒåº”è¯•æ€ç»´å§ï¼Œå‡ ä¹æ˜¯ä¸å­¦ä»€ä¹ˆçœŸæ­£çš„çŸ¥è¯†ï¼Œè€Œæ˜¯åˆ©ç”¨è®°å¿†åŠ›å»å®Œæˆä¸€äº›äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å­¦å‡ å¹´ä¸‹æ¥æ²¡æœ‰å°†ä»€ä¹ˆçŸ¥è¯†çœŸæ­£è½¬åŒ–æˆæˆ‘çš„æŠ€èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å·®ä¸å¤šéƒ½æ˜¯åœ¨è€ƒå‰ä¸€å¤©åˆ©ç”¨è®°å¿†åŠ›é€šè¿‡è€ƒè¯•ï¼Œåˆ†æ•°ä¸ä¼šå¾ˆé«˜ä½†ä¹Ÿä¸ä¼šå¾ˆä½ã€‚&lt;/p&gt;
&lt;p&gt;â€‹&lt;/p&gt;
&lt;p&gt;æˆ‘è§‰å¾—é•¿æœŸçš„æŠ‘éƒæƒ…ç»ªå·²ç»ä¸¥é‡å½±å“åˆ°æˆ‘çš„è®°å¿†èƒ½åŠ›äº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å¼€å§‹é¢‘ç¹çš„å‘ç°è‡ªå·±çš„è®°å¿†å¡å£³ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ¥å°±æ²¡æœ‰å®é™…æŠ€èƒ½çš„æˆ‘ï¼Œå¤±å»äº†åŸæœ¬çš„ä¸€äº›ä¼˜åŠ¿ä¹‹åå°±çœŸçš„ä»€ä¹ˆéƒ½æ²¡æœ‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨è¦è‡ªå·±ä¸Šæ‰‹åšä¸€äº›å¼€å‘ï¼Œå¯¹æˆ‘æ¥è¯´çœŸçš„å°±æ˜¯å¾ˆå›°éš¾ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·ä¸€é—¨åŠ¨æ‰‹çš„å­¦ç§‘æˆ‘å´æ°æ°ç¼ºä¹åŠ¨æ‰‹çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;â€‹&lt;/p&gt;
&lt;p&gt;å°†æ¥çš„å·¥ä½œä¼¼ä¹ä¹Ÿæ— æ³•è·å¾—è§£è„±ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å·¥ä½œä¸Šï¼Œå¦‚æœä¹Ÿæ˜¯è‡ªå·±å»æ¼«æ— è¾¹é™…çš„æ‘¸ç´¢ï¼Œé‚£å¯¹æˆ‘æ¥è¯´å°†æ˜¯ä¸€åœºè‹¦æ—…ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™æ ·å®¹æ˜“è¿·å¤±çš„è’æ¼ ä¹‹ä¸­ï¼Œæˆ‘æ€¥åˆ‡éœ€è¦ä¸€ä¸ªæ„¿æ„æä¾›æŒ‡å¯¼çš„å¼•è·¯äººã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»æ¥æ²¡æœ‰æˆé•¿åªæœ‰ä¼¤ç—•çš„å¢åŠ &#34;&gt;ä»æ¥æ²¡æœ‰æˆé•¿ï¼Œåªæœ‰ä¼¤ç—•çš„å¢åŠ &lt;/h2&gt;
&lt;p&gt;äººä»¬å¸¸è¯´åƒä¸€å ‘é•¿ä¸€æ™ºï¼Œè¿™å¥è¯å¯¹æˆ‘æ¥è¯´ä¼¼ä¹ä¸å¤ªèµ·ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä¼¼ä¹åœ¨æˆé•¿è¿™ä»¶äº‹ä¸Šä¹Ÿåšçš„å¾ˆæ˜¯åƒåŠ›ï¼Œç—›è‹¦éšç€å¹´é¾„çš„å¢åŠ ä¼¼ä¹å‡ºç°äº†æŒ‡æ•°çº§çš„å¢é•¿ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æ€»æ˜¯åœ¨æ¯•ä¸šä¹‹åæ‰èƒ½æ˜ç™½ï¼Œæœ‰äº›å­¤ç‹¬ä¸çŸ›ç›¾æ˜¯æ²¡æœ‰å¿…è¦å­˜åœ¨çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…³äºæœ¬ç§‘é˜¶æ®µä¸ºä»€ä¹ˆåœæ»&#34;&gt;å…³äºæœ¬ç§‘é˜¶æ®µä¸ºä»€ä¹ˆåœæ»&lt;/h3&gt;
&lt;p&gt;ä¼¼ä¹é«˜è€ƒç•™ä¸‹çš„åé—ç—‡ï¼Œå¤§ä¸€çš„æ—¶å€™ä¸€ç›´å·é«˜æ•°ï¼Œå·å®Œé«˜æ•°ï¼Œå·å¤§ç‰©ï¼Œè¿˜è¦å·å¤§å­¦çš„å…¶ä»–è¯¾ç¨‹&lt;/p&gt;
&lt;p&gt;ä»æ¥æ²¡æœ‰èƒ†é‡è€ƒè™‘è¿‡è‡ªå·±è¦åšä¸€ä¸ªä¸èƒ½åŠ å­¦åˆ†çš„é¡¹ç›®ï¼Œç›®å…‰ä¸€ç›´ç›¯ç€æ¯”èµ›ï¼Œå¤§åˆ›ï¼Œä»¥åŠå¾ˆæ°´çš„æœ¬ç§‘è¯¾ç¨‹&lt;/p&gt;
&lt;p&gt;ç»“æœå°±æ˜¯æˆç»©è¿˜ä¸é”™ï¼Œä¸“ä¸šå‰åä¿ç ”åˆ°äº†è®¡ç®—æ‰€&lt;/p&gt;
&lt;p&gt;è®©æˆ‘å›æœ›æœ¬ç§‘ï¼Œåæ‚”çš„äº‹æƒ…æœ‰å¾ˆå¤šï¼Œ&lt;/p&gt;
&lt;p&gt;ä¸€æ˜¯æ²¡æœ‰ä¸€ä¸ªæ„Ÿå…´è¶£çš„æ–¹å‘ï¼Œç„¶ååŠªåŠ›å­¦ä¹ ä¸‹å»&lt;/p&gt;
&lt;p&gt;äºŒæ˜¯æ²¡æœ‰å¾ˆå¥½çš„å’ŒåŒå­¦åšå¥½æœ‹å‹ï¼Œå¤§æ¦‚æ˜¯ç«äº‰å¯¼è‡´çš„ï¼Œå’ŒåŒå­¦æœ‰æ‰€ç–è¿œ&lt;/p&gt;
&lt;p&gt;ä¸‰æ˜¯æ²¡æœ‰å¼€å§‹åˆ·é¢˜ï¼Œå¦‚æœå½“æ—¶å¤šåˆ·ä¸€ç‚¹é¢˜çš„è¯ï¼Œä¿ç ”å’Œæ‰¾å®ä¹ çš„ç¬”è¯•éƒ½ä¼šæ¯”è¾ƒé¡ºåˆ©&lt;/p&gt;
&lt;p&gt;å…³äºç¬¬ä¸€ä»¶ï¼Œæˆ‘å®åœ¨æ˜¯è§åˆ°çš„ï¼ŒçŸ¥é“çš„å¤ªå°‘äº†&lt;/p&gt;
&lt;p&gt;ä¼¼ä¹ä»æ¥éƒ½ç¼ºå°‘ä¸€ä¸ªå¥‘æœºï¼Œæ¼«æ— ç›®çš„ï¼Œæ²¡æœ‰æ–¹å‘&lt;/p&gt;
&lt;p&gt;åœ¨ä¸çŸ¥é“ä»€ä¹ˆçš„ç«äº‰å¿ƒç†ä½œç”¨ä¸‹ï¼Œè¢«çœ‹ä¸è§çš„é”é“¾å›°åœ¨åŸåœ°ï¼Œä¸æ•¢çœŸæ­£çš„åšç‚¹æœ‰ç”¨çš„ä¸œè¥¿&lt;/p&gt;
&lt;p&gt;å­¦ä¹ å½“ç„¶ä¹Ÿå¯èƒ½æ²¡æœ‰é‚£ä¹ˆé‡è¦ï¼Œæ¯•ç«Ÿäººçš„å˜åŒ–ä¸ä¸€å®šèƒ½è·‘èµ¢ç¯å¢ƒçš„å˜åŒ–&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒä»¶çš„è¯ï¼Œå®è¯è¯´å’ŒåŒå­¦ç›¸å¤„çš„éƒ½è¿˜å¯ä»¥ï¼Œèµ·ç æ²¡æœ‰å…³ç³»å¾ˆå·®çš„åŒå­¦&lt;/p&gt;
&lt;p&gt;ä½†ä¹Ÿå¾ˆå°‘æœ‰å…³ç³»å¾ˆå¥½çš„åŒå­¦&lt;/p&gt;
&lt;p&gt;å…³äºå®¤å‹ï¼Œèµ·åˆå¯èƒ½å°±æ˜¯ä¸€äº›ç»†å°çš„çŸ›ç›¾å’Œå±æœºæ„Ÿå¯¼è‡´çš„&lt;/p&gt;
&lt;p&gt;å…³ç³»è¿˜ä¸é”™ï¼Œä½†æ˜¯æ€»æ˜¯æœ‰ä¸€äº›ç”Ÿç–ï¼Œå°±æ˜¯å¾ˆæœ‰ç¤¼è²Œçš„ç”Ÿç–&lt;/p&gt;
&lt;p&gt;å¤§å®¶éƒ½å„è‡ªæœ‰äº†æœ‹å‹ï¼Œå¯èƒ½æ˜¯å¤ªå¤šç¼ºä¹å®‰å…¨æ„Ÿå¯¼è‡´çš„ï¼Œæˆ‘å¯¹æœ‹å‹å»äº¤åˆ«çš„æœ‹å‹è¿™ä»¶äº‹ååˆ†æ•æ„Ÿ&lt;/p&gt;
&lt;p&gt;ç°åœ¨æƒ³æ¥çœŸçš„æ˜¯ï¼Œæ˜æ˜æŠŠå¾ˆå¤šäº‹æƒ…è¯´å¼€ï¼Œæ´»å¾—ä¼šè½»æ¾å¾ˆå¤šï¼Œæœ‹å‹ä¹‹é—´ç›¸å¤„ä¹Ÿä¼šè‡ªåœ¨å¾ˆå¤š&lt;/p&gt;
&lt;p&gt;ç§¯éƒç€ï¼Œæ€»æ˜¯æ·¡æ·¡æ„ï¼Œå¦‚åŒé›¨å­£é‡Œå¬ä¸è§è¿œæ–¹çš„ç¬‘å£°&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªäººåœ¨ç»†é›¨æ‰“æ¹¿çš„é•¿æ¤…ä¸Šï¼Œçœ‹ç€å¾®å¾®é€ç€å…‰äº®çš„é˜´å¤©&lt;/p&gt;
&lt;p&gt;æœ€å–œæ¬¢åœ¨æ ¡å›­é‡Œè¡Œèµ°ï¼Œæµ“è«é®è”½çš„äº¤å¤§æ ¡å›­ï¼Œé€‚åˆæµ®èºçš„äººæ•£æ•£å¿ƒ&lt;/p&gt;
&lt;p&gt;å…³äºæˆ‘çš„æ•æ„Ÿï¼Œç„¦è™‘ï¼Œå±æœºæ„Ÿå¯¼è‡´å’Œæœ‹å‹ç–è¿œè¿™ä»¶äº‹&lt;/p&gt;
&lt;p&gt;æˆ‘æƒ³æˆ‘æ€»æ˜¯è´Ÿç€ä¸€äº›æ„§ç–šçš„ï¼Œæˆ–è®¸æˆ‘è½»æ¾ä¸€ç‚¹ï¼Œæˆ‘å‘¨å›´çš„æœ‹å‹ä¹Ÿå¯ä»¥è½»æ¾ä¸€ç‚¹&lt;/p&gt;
&lt;p&gt;å…¶å®éšè—åœ¨è¿™èƒŒåçš„ï¼Œè½¯é™¢çš„å­¦ä¹ æ°›å›´å…¶å®æ¨åŠ¨äº†ä¸€äº›åŒå­¦åŒ…æ‹¬æˆ‘çš„å¿ƒç†çš„æ‰­æ›²&lt;/p&gt;
&lt;p&gt;å­¦é™¢ä¸ç®—å¾ˆå·ï¼Œä½†æ˜¯èµ„æºå¹¶ä¸å¤šï¼Œå®è¯è¯´è¯¾ç¨‹è´¨é‡å…¶å®ä¸å¤ªèƒ½æé«˜å­¦ç”Ÿçš„å®é™…æ°´å¹³&lt;/p&gt;
&lt;p&gt;å­¦é™¢æä¾›ä¸äº†å­¦ç”Ÿéœ€è¦çš„æˆé•¿ä¸å‘å±•ï¼Œå°¤å…¶åœ¨è®¡ç®—æœºè¿™ä¸ªçœ‹é‡èƒ½åŠ›çš„é¢†åŸŸ&lt;/p&gt;
&lt;p&gt;å¯¼è‡´å­¦ç”Ÿå‡ºç°ç„¦è™‘ä¹Ÿå¾ˆæ­£å¸¸&lt;/p&gt;
&lt;p&gt;å¤§å®¶éƒ½æƒ³å¿«é€Ÿè·å¾—ä¸€äº›å‘å±•ï¼Œè¶…è¶ŠåŒé¾„äººï¼Œå¯¼è‡´äº†ä¸€äº›é»‘æš—æ£®æ—æ³•åˆ™çš„äº‹æƒ…çš„å‘ç”Ÿ&lt;/p&gt;
&lt;p&gt;ä¸è¦å‡ºå£°ï¼Œè‡ªå·±åœ¨å­¦ä»€ä¹ˆï¼Œè‡ªå·±åœ¨åšä»€ä¹ˆï¼Œä¸è¦å‡ºå£°&lt;/p&gt;
&lt;p&gt;é—·å£°å‘å¤§è´¢çš„ç†å¿µæ˜¯å¤§å®¶çš„é»˜å¥‘&lt;/p&gt;
&lt;p&gt;ç„¶è€Œé—·å£°çš„å¾ˆå¤šï¼Œå‘è´¢çš„å¾ˆå°‘&lt;/p&gt;
&lt;p&gt;å…³äºç¬¬ä¸‰ä»¶äº‹ï¼Œæ²¡æœ‰å¥½å¥½åˆ·é¢˜ï¼Œå…¶å®æ˜¯æ ¹æœ¬æ²¡æœ‰åˆ·é¢˜çš„æ–¹æ³•ä¸ç´§è¿«æ„Ÿ&lt;/p&gt;
&lt;p&gt;å½“æ—¶çš„ç´§è¿«æ„Ÿä¸»è¦æ¥è‡ªå‘¨å›´çš„åŒå­¦éƒ½åœ¨åšä»€ä¹ˆ&lt;/p&gt;
&lt;p&gt;åˆ·leetcodeé¢˜å¯¹ç»©ç‚¹èƒ½æœ‰ä»€ä¹ˆå¸®åŠ©å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å³ä½¿æˆ‘ä»¬éƒ½çŸ¥é“æ‰¾å·¥ä½œè¦åˆ·ç®—æ³•é¢˜ï¼Œä¿ç ”ä¹Ÿè¦è¿‡ç®—æ³•è€ƒè¯•&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¤§ä¸‰å‰å¤§å®¶æ²¡æœ‰è¿™æ ·åšçš„æ‰“ç®—ï¼Œå¤§ä¸‰åä¹Ÿå·²ç»æ¥ä¸åŠ&lt;/p&gt;
&lt;p&gt;å¦å¤–å°±æ˜¯æˆ‘å½“æ—¶ä¸çŸ¥é“åˆ·ç®—æ³•çš„è·¯çº¿ä¸æ•™ç¨‹&lt;/p&gt;
&lt;p&gt;è‡ªå·±æ‰“å¼€lcï¼Œéšä¾¿çœ‹å‡ é“éƒ½æ˜¯ä¸ä¼šåšçš„é¢˜&lt;/p&gt;
&lt;p&gt;ç”šè‡³æƒ³åˆ°è§£æ³•ï¼Œä»£ç çš„å®ç°ç»†èŠ‚è¿˜æ˜¯æ— æ³•è½åœ°&lt;/p&gt;
&lt;p&gt;ç°åœ¨è¿˜å¥½åˆ·äº†400å¤šé“é¢˜ï¼Œè™½è¯´ä¸æ˜¯åˆ·é¢˜é«˜æ‰‹ï¼Œä½†æ˜¯èµ·ç ä¸ä¼šå®³æ€•é¢˜ç›®äº†&lt;/p&gt;
&lt;p&gt;è¿™ä»¶äº‹ä¸ºä»€ä¹ˆä¼šå¯¼è‡´æˆ‘çš„åæ‚”å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ²¡æœ‰åˆ·é¢˜å¯¼è‡´æˆ‘é”™è¿‡äº†å¾ˆå¤šæœºä¼š&lt;/p&gt;
&lt;h3 id=&#34;å…³äºä¿ç ”çš„æ—¶å€™ä¸ºä»€ä¹ˆåšå‡ºé”™è¯¯çš„é€‰æ‹©&#34;&gt;å…³äºä¿ç ”çš„æ—¶å€™ä¸ºä»€ä¹ˆåšå‡ºé”™è¯¯çš„é€‰æ‹©&lt;/h3&gt;
&lt;p&gt;ä¿ç ”çš„æ—¶å€™ï¼Œä¸€æ–¹é¢è‡ªå·±çš„ç®€å†æ²¡æœ‰å‡ºä¼—çš„åœ°æ–¹&lt;/p&gt;
&lt;p&gt;ç”šè‡³å…³äºä¿ç ”çš„å‡†å¤‡å°±æ˜¯æ‹¿åˆ°äº†ä¿ç ”èµ„æ ¼ï¼Œä¿ç ”ä¹‹åçš„æ‰¾å¯¼å¸ˆå‡ ä¹æ˜¯æ²¡æœ‰å‡†å¤‡çš„&lt;/p&gt;
&lt;p&gt;é¢è¯•ä¹Ÿéƒ½æ˜¯å‡ ä¹æ²¡æœ‰å‡†å¤‡çš„ï¼Œè‡ªå·±ç®€å†ç©ºæœ‰ç»©ç‚¹è€Œæ— å®è´¨&lt;/p&gt;
&lt;p&gt;ç°åœ¨çš„å¯¼å¸ˆï¼Œæ˜¯è®©æˆ‘å¾ˆåæ‚”çš„ä¸€ä¸ªé€‰æ‹©&lt;/p&gt;
&lt;p&gt;å¯¼å¸ˆçš„å­¦æœ¯èƒ½åŠ›å¾ˆå·®ï¼Œè¯¾é¢˜ç»„æ²¡æœ‰å®é™…çš„ç§‘ç ”æ–¹å‘ï¼Œæé’±æ˜¯å”¯ä¸€çš„æ–¹å‘&lt;/p&gt;
&lt;p&gt;é™¤äº†æä¾›ä¸€äº›ååˆ†ç‰µå¼ºç¦»è°±çš„ideaï¼Œæä¾›ä¸äº†ä»€ä¹ˆæŒ‡å¯¼&lt;/p&gt;
&lt;p&gt;åœ¨ä»–èº«ä¸Šæˆ‘çœ‹åˆ°äº†è‡ªå‘å’Œè‡ªè´Ÿæ˜¯ä¸€æšç¡¬å¸çš„æ­£åä¸¤é¢&lt;/p&gt;
&lt;p&gt;ç„¶è€Œæˆ‘è‡ªå·±ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Œæˆ–è®¸é€‰æ‹©åšç§‘ç ”å¹¶ä¸æ˜¯ä¸€æ¡é€‚åˆæˆ‘çš„è·¯&lt;/p&gt;
&lt;p&gt;ç§‘ç ”å˜›ï¼Œè¦ä¹ˆå¯¼å¸ˆæœ‰å¥½çš„æƒ³æ³•ï¼Œè¦ä¹ˆè‡ªå·±æœ‰&lt;/p&gt;
&lt;p&gt;è¦æ˜¯éƒ½æ²¡æœ‰ï¼Œé‚£å°±ä¸å¥½æäº†ï¼Œå°¤å…¶æ˜¯å¯¼å¸ˆæ²‰æµ¸äºå®å¤§å™äº‹è€Œæ— å®äº‹æ±‚æ˜¯èƒ½åŠ›çš„æƒ…å†µä¸‹&lt;/p&gt;
&lt;p&gt;é€‰æ‹©ä»–ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºå½“æ—¶å¹¶ä¸çŸ¥é“ï¼Œä¸­ç§‘é™¢è®¡ç®—æ‰€çš„å¯¼å¸ˆæ°´å¹³å¯ä»¥è¿™ä¹ˆå·®&lt;/p&gt;
&lt;p&gt;åŸæœ¬ä»¥ä¸ºå¯¼å¸ˆè„¾æ°”å·®ä¸€ç‚¹æ— æ‰€è°“ï¼Œè„¾æ°”å·®å¯èƒ½æ˜¯è¦æ±‚é«˜ï¼Œå¯¹è‡ªå·±ä¸ä¸€å®šæ˜¯ä¸€ä»¶åäº‹&lt;/p&gt;
&lt;p&gt;ä½†åæ¥æˆ‘å‘ç°ï¼Œè„¾æ°”å·®å¾€å¾€æ˜¯æ— èƒ½çš„è¡¨ç°ï¼Œè„¾æ°”è¶Šå·®çš„äººè¶Šæ˜¯æ— èƒ½ç‹‚æ€’&lt;/p&gt;
&lt;p&gt;å½“ç„¶å¯èƒ½æ˜¯ç½‘ç»œä¸Šè¢«ä¸å¤ªå¥½çš„è¯„ä»·åˆºæ¿€åˆ°äº†&lt;/p&gt;
&lt;p&gt;å¯¼å¸ˆç°åœ¨ååˆ†æ”¶æ•›ï¼Œå¯¹å­¦ç”Ÿå¤©å¤©æ˜¯ç‚¹èµï¼Œå¤¸å¥–ï¼Œå°¬å¹ï¼Œï¼ˆé˜´é˜³ï¼‰&lt;/p&gt;
&lt;p&gt;å¤§å®¶å¯¹ä»–çš„å¤¸å¥–æ„Ÿåˆ°ååˆ†çš„åŒçƒ¦ï¼Œå¯ä»¥è¯´å¯¼å¸ˆçš„å¤¸äººçš„æƒ…å•†éå¸¸ä½&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªé”™è¯¯çš„é€‰æ‹©çœŸçš„è€½è¯¯äº†æˆ‘å¾ˆé•¿çš„å‘å±•æ—¶é—´&lt;/p&gt;
&lt;p&gt;ç”šè‡³æœªæ¥ä¸¤å¹´ä¹Ÿä¸ä¼šå¤ªä¹è§‚&lt;/p&gt;
&lt;h3 id=&#34;å…³äºåˆšåˆšè¢«éª—é’±çš„äº‹&#34;&gt;å…³äºåˆšåˆšè¢«éª—é’±çš„äº‹&lt;/h3&gt;
&lt;p&gt;å¯¹äº†ï¼Œå€’éœ‰çš„äº‹å¯¹æˆ‘æ¥è¯´å¯ä¸æ­¢ä¸€ä»¶&lt;/p&gt;
&lt;p&gt;9æœˆåº•ï¼Œæˆ‘ç»å†ç”µä¿¡è¯ˆéª—ï¼Œè¢«éª—èµ°äº†å¾ˆå¤šé’±&lt;/p&gt;
&lt;p&gt;åˆšåˆšé—®äº†è­¦å¯ŸåŒå¿—ï¼Œåæ­£é’±å¤§æ¦‚ç‡æ˜¯è¿½ä¸å›æ¥äº†&lt;/p&gt;
&lt;p&gt;ç®—äº†ï¼Œå°±å½“ä¸¢äº†å§&lt;/p&gt;
&lt;p&gt;æŸå¤±è¿™ä¹ˆæƒ¨é‡ï¼Œå¯¼è‡´æˆ‘10æœˆå…¶å®æœ‰ä¸€ç‚¹æ¶ˆæ²‰&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿˜å¥½ï¼Œå·¥ä½œä¸é¡ºåˆ©æ‰æ˜¯æˆ‘å¤´ç–¼çš„ä¸»è¦åŸå› &lt;/p&gt;
&lt;p&gt;ç´§æ¥ç€è¢«æ‹‰å»é…’åº—è‡ªè´¹éš”ç¦»ï¼Œæ˜¯çœŸçš„ï¼Œæœ¬ä¸å¯Œè£•çš„ç”Ÿæ´»é›ªä¸ŠåŠ éœœ&lt;/p&gt;
&lt;p&gt;äº¤å®Œé…’åº—çš„é’±ï¼Œå±±ç©·æ°´å°½äº†ï¼Œå•Šä¸ï¼Œæˆ‘è¿˜æœ‰å¤–å€º&lt;/p&gt;
&lt;p&gt;å»ä»–å¦ˆçš„äººç”Ÿ&lt;/p&gt;
&lt;h2 id=&#34;å…³äºå¯¹åˆ«äººçš„ç¾¡æ…•&#34;&gt;å…³äºå¯¹åˆ«äººçš„ç¾¡æ…•&lt;/h2&gt;
&lt;h3 id=&#34;ä¸€ä¸ªè´Ÿé¢æƒ…ç»ªå¾ˆå¤šçš„äººå¯¹æ­£å¸¸äººçš„è‡ªç„¶ç¾¡æ…•&#34;&gt;ä¸€ä¸ªè´Ÿé¢æƒ…ç»ªå¾ˆå¤šçš„äººå¯¹æ­£å¸¸äººçš„è‡ªç„¶ç¾¡æ…•&lt;/h3&gt;
&lt;p&gt;æˆ‘çœŸçš„è´Ÿé¢æƒ…ç»ªå¾ˆå¤šå—ï¼Ÿæˆ‘æƒ³è¯´ä¸&lt;/p&gt;
&lt;p&gt;æˆ‘è¡¨ç°å‡ºæ¥çš„å¾ˆå¤šï¼Œä½†æ›´å¤šçš„æ˜¯æ— å¥ˆä¸ç–²æƒ«&lt;/p&gt;
&lt;p&gt;è¿™äº›éƒ½æ˜¯å¯ä»¥è§£å†³çš„ï¼Œå¦‚æœæˆ‘èƒ½åŠ›çªé£çŒ›è¿›&lt;/p&gt;
&lt;p&gt;æˆ–è€…æœ‰ä¸€ä¸ªé€‚åˆæˆ‘æˆé•¿çš„ç¯å¢ƒï¼Œå¾ˆå¤šé—®é¢˜éƒ½ä¼šå¾—åˆ°ç¼“è§£&lt;/p&gt;
&lt;p&gt;æˆ‘å¸¸å¸¸çœ‹åˆ°å‘¨å›´çš„åŒå­¦ç›®æ ‡æ˜ç¡®é£é€Ÿè¿›æ­¥è€Œæ„Ÿåˆ°ç„¦è™‘&lt;/p&gt;
&lt;p&gt;ä½†æ¯ä¸ªäººéƒ½æœ‰ä¸åŒçš„å‘å±•ç©ºé—´å˜›ï¼Œå‘å±•çš„æ—¶é—´èŠ‚ç‚¹ä¹Ÿä¸å¤ªä¸€è‡´&lt;/p&gt;
&lt;p&gt;å¤§ä¸äº†ç»™è‡ªå·±ä¸€ç‚¹æ—¶é—´ï¼Œæ™šå‡ å¹´ä¹Ÿæ²¡ä»€ä¹ˆçš„&lt;/p&gt;
&lt;p&gt;æˆ‘çš„ç„¦è™‘æ˜¯ç°å®åŸå› å¯¼è‡´çš„ï¼Œå‡ ä¹æ— æ³•ç¼“è§£&lt;/p&gt;
&lt;p&gt;å‘¨å›´çš„åŒå­¦å¯ä»¥è‡ªç”±çš„æˆé•¿å’Œç”Ÿæ´»ï¼Œå…ä¸äº†è®©æˆ‘å¿ƒç”Ÿå¾ˆå¤šç¾¡æ…•&lt;/p&gt;
&lt;h3 id=&#34;ä¸€åˆ‡éƒ½æ¥å¾—åŠ&#34;&gt;ä¸€åˆ‡éƒ½æ¥å¾—åŠ&lt;/h3&gt;
&lt;p&gt;ä½†æ˜¯æˆ‘è¿˜æ˜¯ä¼šè®¸æ„¿&lt;/p&gt;
&lt;p&gt;ä¸€åˆ‡éƒ½æ¥å¾—åŠï¼Œæ¯ä¸ªäººéƒ½æœ‰ä¸åŒçš„äººç”Ÿè¯¾é¢˜&lt;/p&gt;
&lt;p&gt;äººè¿™ä¸€è¾ˆå­è‡ªå·±æ˜¯å”¯ä¸€çš„é•¿æœŸè§‚ä¼—&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€è®ºæ–‡ç¬”è®°ã€‘AntManè®ºæ–‡é˜…è¯»ç¬”è®°</title>
        <link>https://tweakzx.github.io/p/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0antman%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Mon, 29 Aug 2022 15:41:42 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0antman%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;img src="https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220829154241.png" alt="Featured image of post ã€è®ºæ–‡ç¬”è®°ã€‘AntManè®ºæ–‡é˜…è¯»ç¬”è®°" /&gt;&lt;h1 id=&#34;antman-dynamic-scaling-on-gpu-clusters-for-deep-learningè®ºæ–‡é˜…è¯»ç¬”è®°&#34;&gt;ã€ŠAntMan: Dynamic Scaling on GPU Clusters for Deep Learningã€‹è®ºæ–‡é˜…è¯»ç¬”è®°&lt;/h1&gt;
&lt;h2 id=&#34;abstract&#34;&gt;Abstract&lt;/h2&gt;
&lt;p&gt;å¦‚ä½•åœ¨å¤§è§„æ¨¡GPUé›†ç¾¤ä¸Šæœ‰æ•ˆè°ƒåº¦æ·±åº¦å­¦ä¹ å·¥ä½œï¼Œ å¯¹äº&lt;strong&gt;å·¥ä½œæ€§èƒ½&lt;/strong&gt;ï¼Œ&lt;strong&gt;ç³»ç»Ÿååé‡&lt;/strong&gt;å’Œ&lt;strong&gt;ç¡¬ä»¶åˆ©ç”¨ç‡&lt;/strong&gt;è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;éšç€æ·±åº¦å­¦ä¹ çš„å·¥ä½œé‡å˜å¾—æ›´åŠ å¤æ‚ï¼Œå®ƒå˜å¾—è¶Šæ¥è¶Šå…·æœ‰æŒ‘æˆ˜æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»Antmanï¼Œ è¿™æ˜¯ä¸€ç§æ·±å…¥å­¦ä¹ çš„åŸºç¡€è®¾æ–½ï¼Œè¯¥åŸºç¡€æ¶æ„å…±åŒè®¾è®¡äº†é›†ç¾¤è°ƒåº¦ç¨‹åºï¼Œå¹¶å·²åœ¨é˜¿é‡Œå·´å·´éƒ¨ç½²åœ¨ç”Ÿäº§ä¸­ï¼Œä»¥ç®¡ç†æ•°ä»¥ä¸‡è®¡çš„æ¯æ—¥æ·±åº¦å­¦ä¹ å·¥ä½œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Antmané€‚åº”æ·±åº¦å­¦ä¹ è®­ç»ƒçš„æ³¢åŠ¨èµ„æºéœ€æ±‚ã€‚å› æ­¤ï¼Œå®ƒåˆ©ç”¨å¤‡ç”¨GPUèµ„æºåœ¨å…±äº«GPUä¸Šå…±åŒæ‰§è¡Œå¤šä¸ªä½œä¸šã€‚&lt;/li&gt;
&lt;li&gt;Antmanåˆ©ç”¨æ·±åº¦å­¦ä¹ è®­ç»ƒçš„ç‹¬ç‰¹ç‰¹å¾ï¼Œåœ¨æ·±åº¦å­¦ä¹ æ¡†æ¶å†…ä¸ºæ˜¾å­˜å’Œè®¡ç®—èµ„æºå¼•å…¥åŠ¨æ€ç¼©æ”¾æœºåˆ¶ã€‚è¿™å…è®¸jobä¹‹é—´çš„ç»†ç²’åº¦åè°ƒå¹¶é˜²æ­¢å·¥ä½œå¹²æ‰°ã€‚&lt;/li&gt;
&lt;li&gt;è¯„ä¼°è¡¨æ˜ï¼ŒAntmanåœ¨æˆ‘ä»¬çš„å¤šç§Ÿæˆ·é›†ç¾¤ä¸­ä¸æŸå®³å…¬å¹³æ€§çš„æƒ…å†µä¸‹ï¼Œæ•´ä½“å°†æ˜¾å­˜åˆ©ç”¨ç‡æé«˜äº†42ï¼…ï¼Œè®¡ç®—èµ„æºåˆ©ç”¨ç‡æé«˜äº†34ï¼…ï¼Œä¸ºæœ‰æ•ˆåˆ©ç”¨å¤§è§„æ¨¡çš„GPUæå‡ºäº†æ–°æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨å…±äº«å¤šç§Ÿæˆ·çš„DLé›†ç¾¤ï¼Œ è®¸å¤šå·¥ä½œæ’é˜Ÿç­‰å¾…èµ„æºçš„æ—¶å€™ä¼šå¯¼è‡´GPUåˆ©ç”¨ç‡ä½ä¸‹ï¼Œæœ‰ä¸¤ä¸ªåŸå› 
&lt;ul&gt;
&lt;li&gt;å¤§å¤šæ•°çš„è®­ç»ƒä»»åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸èƒ½å®Œå…¨åˆ©ç”¨GPUèµ„æº
&lt;ul&gt;
&lt;li&gt;è®­ç»ƒä¸€ä¸ªDLæ¨¡å‹é€šå¸¸éœ€è¦å¤šç§è®¡ç®—çš„æ··åˆ&lt;/li&gt;
&lt;li&gt;å½“ä½¿ç”¨åˆ†å¸ƒå¼çš„è®­ç»ƒçš„æ—¶å€™ï¼Œ90%çš„æ—¶é—´ä¼šè¢«æµªè´¹åˆ°ç½‘ç»œé€šä¿¡ä¸Š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åŸºäºèµ„æºé¢„ç•™çš„é›†ç¾¤è°ƒåº¦æ–¹æ¡ˆå¯¼è‡´æ˜¾è‘—çš„GPUç©ºé—²ï¼ŒDLå·¥ä½œä¸­æ€»æœ‰éƒ¨åˆ†èµ„æºæ²¡æœ‰æŠ•å…¥ä½¿ç”¨
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œéšæœºæ¢¯åº¦ä¸‹é™æ˜¯åŒæ­¥çš„ï¼Œéœ€è¦è·å–æ‰€æœ‰çš„èµ„æºä»¥è¿›è¡Œgang-schedulingï¼Œ åœ¨å¾—åˆ°æ‰€æœ‰èµ„æºä¹‹å‰ï¼Œå·²å¾—åˆ°çš„éƒ¨åˆ†èµ„æºå°±ä¼šé™·å…¥ç©ºé—²&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨å…±äº«GPUä¸Šè¿›è¡Œ&lt;strong&gt;packing job&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥æé«˜GPUçš„åˆ©ç”¨ç‡ï¼Œå¯ä»¥ä½¿å¾—åŒæ ·çš„é›†ç¾¤æ•´ä½“ä¸Šèƒœä»»æ›´å¤šçš„jobã€‚&lt;/li&gt;
&lt;li&gt;ä½†æ˜¯è¿™ä¸ªç­–ç•¥åœ¨ç”Ÿäº§é›†ç¾¤ä¸Šå¾ˆå°‘ä½¿ç”¨ï¼Œ åŸå› 
&lt;ul&gt;
&lt;li&gt;å°½ç®¡æå‡GPUçš„åˆ©ç”¨ç‡æ˜¯æœ‰åˆ©çš„ï¼Œä½†ä¹Ÿè¦ä¿è¯resource-guarantee jobsï¼ˆRGJï¼Œèµ„æºä¿è¯æ€§jobï¼‰çš„æ€§èƒ½ã€‚åŒä¸€ä¸ªGPUä¸ŠåŒæ—¶æ‰§è¡Œå¤šä¸ªjobä¼šå¯¼è‡´å¹²æ‰°&amp;ndash;&amp;gt;RGJæ€§èƒ½å‡ºç°æ˜¾è‘—ä¸‹é™&lt;/li&gt;
&lt;li&gt;job packingç­–ç•¥å¯ä»¥ç»™å¹¶å‘jobå¼•å…¥å†…å­˜ç«äº‰ã€‚jobéœ€è¦çš„èµ„æºé™¡ç„¶å¢åŠ çš„è¯ï¼Œæœ‰å¯èƒ½å¯¼è‡´è®­ç»ƒä»»åŠ¡failureã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œjobèµ„æºçš„ç‹¬å åˆ†é…åœ¨æ˜¾å­˜çš„GPUé›†ç¾¤ç”Ÿäº§ç¯å¢ƒä¸­æ¯”è¾ƒå…¸å‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬æå‡ºAntMan
&lt;ul&gt;
&lt;li&gt;ç®€è¿°
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªDLç³»ç»Ÿæé«˜GPUé›†ç¾¤çš„åˆ©ç”¨ç‡&lt;/li&gt;
&lt;li&gt;åŒæ—¶ä¿è¯å…¬å¹³æ€§ä¸RGJçš„æ€§èƒ½&lt;/li&gt;
&lt;li&gt;é€šè¿‡åˆä½œæ€§çš„èµ„æºæ‰©ç¼©æ¥å‡å°‘jobå¹²æ‰°&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;DLç³»ç»Ÿä¸­å¼•å…¥äº†æ–°çš„&lt;strong&gt;åˆ†é…æœºåˆ¶&lt;/strong&gt;åœ¨jobè®­ç»ƒè¿‡ç¨‹ä¸­æ¥åŠ¨æ€åœ°ç²¾ç¡®åˆ†é…æ‰€éœ€èµ„æºï¼ˆæ˜¾å­˜å’Œè®¡ç®—å•å…ƒï¼‰&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;strong&gt;è¶…å–æœºåˆ¶&lt;/strong&gt;ä½¿å¾—ä»»ä½•ç©ºé—²çš„GPUèµ„æºï¼ˆæ˜¾å­˜å’Œè®¡ç®—å•å…ƒï¼‰éƒ½èƒ½è¢«åˆ©ç”¨&lt;/li&gt;
&lt;li&gt;é‡æ–°è®¾è®¡äº†&lt;strong&gt;é›†ç¾¤è°ƒåº¦å™¨å’ŒDLæ¡†æ¶&lt;/strong&gt;æ¥é€‚åº”ç”Ÿäº§jobçš„æ³¢åŠ¨çš„èµ„æºç‰¹ç‚¹
&lt;ul&gt;
&lt;li&gt;é€šè¿‡
&lt;ul&gt;
&lt;li&gt;æ¡†æ¶ä¿¡æ¯æ„ŸçŸ¥è°ƒåº¦&lt;/li&gt;
&lt;li&gt;é€æ˜æ˜¾å­˜æ‰©å±•&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿå¯æŒç»­çš„ä»»åŠ¡é—´åè°ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è¿™ä¸ªç»“æ„ï¼ŒAntmanä¸ºDLä»»åŠ¡çš„åŒæ—¶æ‰§è¡Œçš„policy design å¼€è¾Ÿäº†ç©ºé—´&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;AntMané‡‡ç”¨äº†ç®€å•ä¸”æœ‰æ•ˆçš„ç­–ç•¥æ¥æœ€å¤§åŒ–é›†ç¾¤åå
&lt;ul&gt;
&lt;li&gt;ä¸ºRGJæä¾›èµ„æºä¿è¯çš„åŒæ—¶&lt;/li&gt;
&lt;li&gt;åˆ†é…ä¸€äº›å¶ç„¶æ€§çš„ä»»åŠ¡æ¥å°½åŠ›è€Œä¸ºçš„åˆ©ç”¨GPUèµ„æºï¼ˆä½ä¼˜å…ˆçº§ä¸”ä¸ä¿è¯èµ„æºï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœ¬æ–‡ä¸»è¦è´¡çŒ®å¦‚ä¸‹
&lt;ul&gt;
&lt;li&gt;å¯¹ç”Ÿäº§ç¯å¢ƒçš„DLé›†ç¾¤è¿›è¡Œè°ƒç ”ï¼Œå‘ç°ä½åˆ©ç”¨ç‡æ¥è‡ªäºä¸‰ä¸ªæ–¹é¢ï¼šç¡¬ä»¶ï¼Œé›†ç¾¤è°ƒåº¦ï¼Œjobè¡Œä¸º&lt;/li&gt;
&lt;li&gt;åœ¨DLæ¡†æ¶ä¸­ä¸ºæ˜¾å­˜å’Œè®¡ç®—å•å…ƒç®¡ç†å¼•å…¥äº†ä¸¤ç§åŠ¨æ€æ”¾ç¼©æœºåˆ¶ï¼Œæ¥è§£å†³GPUå…±äº«é—®é¢˜ã€‚æ–°æœºåˆ¶åˆ©ç”¨DLçš„å·¥ä½œç‰¹å¾æ¥åŠ¨æ€è°ƒæ•´DL jobçš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œåœ¨ä½œä¸šæ‰§è¡ŒæœŸé—´ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡å…±åŒè®¾è®¡é›†ç¾¤è°ƒåº¦å™¨å’ŒDLæ¡†æ¶ä»¥åˆ©ç”¨åŠ¨æ€ç¼©æ”¾æœºåˆ¶ï¼Œæˆ‘ä»¬ä¸ºGPUå…±äº«å¼•å…¥äº†ä¸€ç§æ–°çš„å·¥ä¸šæ–¹æ³•ã€‚è¿™åœ¨å¤šç§Ÿæˆ·é›†ç¾¤ä¸­ç»´æŠ¤å·¥ä½œæœåŠ¡çº§åè®®ï¼ˆSLAï¼‰ï¼ŒåŒæ—¶é€šè¿‡æœºä¼šè°ƒåº¦æ¥æ”¹å–„é›†ç¾¤åˆ©ç”¨ç‡ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è¶…è¿‡5000ä¸ªGPUä¸Šè¿›è¡Œäº†å®éªŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;motivation&#34;&gt;Motivation&lt;/h2&gt;
&lt;h3 id=&#34;deep-learning-training&#34;&gt;deep learning Training&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ·±åº¦å­¦ä¹ è®­ç»ƒé€šå¸¸åŒ…æ‹¬æ•°ç™¾ä¸‡æ¬¡è¿­ä»£ï¼Œæ¯ä¸ªè¿­ä»£è¿‡ç¨‹éƒ½ç§°ä¸ºmini-batchã€‚
&lt;ul&gt;
&lt;li&gt;é€šå¸¸ï¼Œè®­ç»ƒmini-batchå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µã€‚
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œè®¡ç®—æ ·å“å’Œæ¨¡å‹æƒé‡ä»¥äº§ç”Ÿä¸€ç»„å¾—åˆ†ï¼Œç§°ä¸ºforward pass&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œä½¿ç”¨ç›®æ ‡å‡½æ•°åœ¨äº§ç”Ÿçš„åˆ†æ•°å’Œæ‰€éœ€çš„åˆ†æ•°ä¹‹é—´è®¡ç®—loss errorã€‚ç„¶åï¼ŒæŸå¤±é€šè¿‡æ¨¡å‹å‘åæ‰©æ•£ï¼Œä»¥è®¡ç®—æ¢¯åº¦ï¼Œç§°ä¸ºbackward passã€‚&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œé€šè¿‡ç”±ä¼˜åŒ–å™¨å®šä¹‰çš„å­¦ä¹ ç‡æ¥ç¼©æ”¾æ¢¯åº¦ï¼Œä»¥æ›´æ–°æ¨¡å‹å‚æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ­£å‘é€šè¡Œçš„è®¡ç®—è¾“å‡ºé€šå¸¸åŒ…æ‹¬è®¸å¤šæ•°æ®è¾“å‡ºï¼Œæ¯ä¸ªæ•°æ®è¾“å‡ºç§°ä¸ºå¼ é‡ã€‚è¿™äº›å¼ é‡åº”æš‚æ—¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¹¶è¢«å‘åé€šè¿‡ä»¥è®¡ç®—æ¢¯åº¦ã€‚é€šå¸¸ï¼Œä¸ºäº†ç›‘è§†åŸ¹è®­ä¸­çš„æ¨¡å‹è´¨é‡ï¼Œå®šæœŸè§¦å‘è¯„ä¼°.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸ºäº†ä½¿ç”¨å¤§é‡æ•°æ®åŸ¹è®­æ¨¡å‹ï¼ŒDLé€šå¸¸åœ¨å¤šä¸ªGPUä¸­é‡‡ç”¨æ•°æ®å¹¶è¡Œæ€§ï¼Œå…¶ä¸­æ¯ä¸ªGPUè´Ÿè´£å¹¶è¡Œå¤„ç†æ•°æ®å­é›†ï¼ŒåŒæ—¶åœ¨æ¨¡å‹æ›´æ–°ä¹‹å‰æ‰§è¡Œæ¯ä¸ªè¿·ä½ æ‰¹æ¬¡æ¢¯åº¦åŒæ­¥ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å¤§å‹å…¬å¸ä¸­ï¼Œå¤šç§Ÿæˆ·é›†ç¾¤é€šå¸¸ç”¨äºæ”¹å–„ç¡¬ä»¶åˆ©ç”¨ç‡ï¼Œç”¨æˆ·æœ‰æ—¶å¯ä»¥è¶…é¢è®¢é˜…GPUèµ„æºé…é¢ï¼Œå°¤å…¶æ˜¯å½“GPUè¦æ±‚çˆ†å‘æ—¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;characterizing-production-dl-cluster&#34;&gt;Characterizing Production DL Cluster&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä»ä¸‰ä¸ªè§’åº¦ç ”ç©¶ç”Ÿäº§é›†ç¾¤ä¸­çš„èµ„æºä½¿ç”¨ç‡ï¼šç¡¬ä»¶ï¼Œé›†ç¾¤è°ƒåº¦å’Œjobè¡Œä¸ºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ä¸­çš„GPUçš„ä½åˆ©ç”¨ç‡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220831200958.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220831200958.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220831200958715&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220831200958715&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;å†…å­˜å®¹é‡ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œåªæœ‰20ï¼…çš„GPUæ­£åœ¨è¿è¡Œæ¶ˆè€—ä¸€åŠä»¥ä¸ŠGPUå­˜å‚¨å™¨çš„åº”ç”¨ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;å…³äºè®¡ç®—å•å…ƒçš„ä½¿ç”¨ï¼Œåªæœ‰10ï¼…çš„GPUè·å¾—äº†é«˜äº80ï¼…çš„GPUåˆ©ç”¨ç‡ã€‚&lt;/li&gt;
&lt;li&gt;è¯¥ç»Ÿè®¡æ•°æ®è¡¨æ˜ï¼ŒGPUå†…å­˜å’Œè®¡ç®—å•å…ƒå‡æœªå¾—åˆ°å……åˆ†åˆ©ç”¨ï¼Œå› æ­¤æµªè´¹äº†æ˜‚è´µçš„ç¡¬ä»¶èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹gang-scheduleçš„ç©ºé—²ç­‰å¾…&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Gang schedulingæ˜¯åœ¨å¹¶å‘ç³»ç»Ÿä¸­å°†å¤šä¸ªç›¸å…³è”çš„è¿›ç¨‹è°ƒåº¦åˆ°ä¸åŒå¤„ç†å™¨ä¸ŠåŒæ—¶è¿è¡Œçš„ç­–ç•¥ï¼Œå…¶æœ€ä¸»è¦çš„åŸåˆ™æ˜¯ä¿è¯æ‰€æœ‰ç›¸å…³è”çš„è¿›ç¨‹èƒ½å¤ŸåŒæ—¶å¯åŠ¨ï¼Œé˜²æ­¢éƒ¨åˆ†è¿›ç¨‹çš„å¼‚å¸¸ï¼Œå¯¼è‡´æ•´ä¸ªå…³è”è¿›ç¨‹ç»„çš„é˜»å¡ã€‚ä¾‹å¦‚ï¼Œæ‚¨æäº¤ä¸€ä¸ªæ‰¹é‡Jobï¼Œè¿™ä¸ªæ‰¹é‡JobåŒ…å«å¤šä¸ªä»»åŠ¡ï¼Œè¦ä¹ˆè¿™å¤šä¸ªä»»åŠ¡å…¨éƒ¨è°ƒåº¦æˆåŠŸï¼Œè¦ä¹ˆä¸€ä¸ªéƒ½è°ƒåº¦ä¸æˆåŠŸã€‚è¿™ç§All-or-Nothingè°ƒåº¦åœºæ™¯ï¼Œå°±è¢«ç§°ä½œGang schedulingã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220831201016.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220831201016.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220831201015900&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220831201015900&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;å¤šGPUè®­ç»ƒå·¥ä½œéœ€è¦&lt;strong&gt;Gang scheduling&lt;/strong&gt;ï¼Œè¿™æ„å‘³ç€é™¤éåŒæ—¶æä¾›æ‰€æœ‰å¿…éœ€çš„GPUï¼Œå¦åˆ™jobå°†ä¸ä¼šå¼€å§‹è®­ç»ƒ&lt;/li&gt;
&lt;li&gt;ç”±äºGPUèµ„æºå¾€å¾€ä¸èƒ½åŒæ—¶å…¨éƒ¨è·å¾—ï¼Œ æ‰€ä»¥ä¼šå‡ºç°&lt;strong&gt;idle waiting&lt;/strong&gt;ã€‚ ä¸€ä¸ªjobéœ€è¦çš„GPUè¶Šå¤šï¼Œ å®ƒçš„å¹³å‡é—²ç½®æ—¶é—´å°±è¶Šé•¿&lt;/li&gt;
&lt;li&gt;**èµ„æºåˆ°è¾¾çš„ä¸å¯é¢„æµ‹å¯¼è‡´äº†é¢„ç•™èµ„æºçš„idle waitingã€‚**ä¸€ä¸ªå¹¼ç¨šçš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨GPU idle waitingçš„æ—¶å€™æ‰§è¡Œåˆ«çš„jobã€‚ä½†æ˜¯è¿™ä¼šå¯¼è‡´èµ„æºéœ€æ±‚å¤§jobçš„é¥¥é¥¿ï¼Œå½±å“åˆ†é…å…¬å¹³æ€§ã€‚å¦å¤–ä¸€æ—¦èµ„æºéœ€è¦è¢«æ»¡è¶³å¯¼è‡´çš„GPUéœ€æ±‚æ¿€å¢æˆ–è®¸å¯¼è‡´GPUä¹‹é—´çš„èµ„æºå†²çªï¼Œå¯¼è‡´å·¥ä½œfail&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŠ¨æ€èµ„æºéœ€æ±‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220831201048.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220831201048.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220831201047910&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220831201047910&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;åœ¨ä¸€ä¸ªDL jobç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ GPUèµ„æºå¾€å¾€æœªè¢«å……åˆ†åˆ©ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å›¾3ï¼šåœ¨Criteoæ•°æ®é›†ä¸Šè¿è¡ŒDEEPFM [20]æ—¶çš„å‰10åˆ†é’Ÿã€‚ä¸€å¼€å§‹ï¼Œæ•°æ®é›†ä¸Šçš„é¢„å¤„ç†ä»…éœ€è¦CPUã€‚ä½†æ˜¯ï¼ŒGPUçš„SMåˆ©ç”¨ç‡å’Œå†…å­˜ä½¿ç”¨é‡åœ¨275ç§’æ—¶å¯åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;å›¾4ï¼šè®­ç»ƒå¯ä»¥åŒ…å«å‡ ä¸ªé˜¶æ®µï¼Œä¸åŒé˜¶æ®µçš„SMå’ŒMemoryçš„ä½¿ç”¨ç‡éƒ½æ˜¯ä¸ä¸€æ ·çš„&lt;/li&gt;
&lt;li&gt;èµ„æºéœ€æ±‚çš„åŠ¨æ€å˜åŒ–ä¸å›ºå®šçš„èµ„æºåˆ†é…å’Œæ¼«é•¿çš„è®­ç»ƒæ—¶é—´ç›¸çŸ›ç›¾ã€‚èµ„æºéœ€è¦æ»¡è¶³jobçš„å³°å€¼éœ€è¦ï¼Œå¯¼è‡´è¿™ä¸ªæ˜‚è´µçš„ç¡¬ä»¶è¢«ä½æ•ˆåˆ©ç”¨ã€‚æ˜¾å­˜çš„DLæ¡†æ¶çš„memory cachingè®¾è®¡éšè—äº†æ˜¾å­˜ä½¿ç”¨éšæ—¶é—´çš„å˜åŒ–ï¼Œä¸€å®šç¨‹åº¦ä¸Šé˜»æ­¢äº†GPUçš„æ½œåœ¨å…±äº«ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;opportunities-in-dl-uniqueness&#34;&gt;Opportunities in DL Uniqueness&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¶…å–æœ‰&lt;strong&gt;æœºä¼š&lt;/strong&gt;æé«˜é›†ç¾¤çš„åå&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸å¯é¢„æµ‹çš„jobå†…å’Œjobé—´çš„éœ€æ±‚æ¿€å¢ä¸ºå®‰å…¨çš„èµ„æºå…±äº«å¼•å…¥äº†æŒ‘æˆ˜
&lt;ul&gt;
&lt;li&gt;å› ä¸ºèµ„æºç«äº‰ï¼Œ jobså¯èƒ½ä¼šæŠŠæ˜¾å­˜ç”¨å…‰&lt;/li&gt;
&lt;li&gt;åœ¨å¤šç§Ÿæˆ·é›†ç¾¤ä¸­ï¼Œå½“jobsåœ¨å…±äº«ç¯å¢ƒæ‰§è¡Œæ—¶ï¼Œä¸ºæŒæœ‰å®šé¢èµ„æºçš„jobæä¾›æ€§èƒ½éš”ç¦»æ˜¯ååˆ†é‡è¦çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;AntManåˆ©ç”¨DL trainingçš„ç‰¹æ€§æ¥åˆ©ç”¨è¿™ä¸ªæœºä¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒé›†ç¾¤çš„10kä¸ªtaskä¸­å–æ ·å‘ç°&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905143626.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905143626.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220905143619325&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220905143619325&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;åªæœ‰ä¸€å°éƒ¨åˆ†ç”¨æ¥å­˜å‚¨æ¨¡å‹ï¼Œ ä¸”90%çš„æ¨¡å‹å¤§å°ä¸è¶…è¿‡500M&lt;/li&gt;
&lt;li&gt;å¤§éƒ¨åˆ†æ˜¾å­˜åœ¨åŒä¸€ä¸ªmini-batchä¸­è¢«åˆ†é…å’Œé‡Šæ”¾&lt;/li&gt;
&lt;li&gt;é™¤æ­¤ä¹‹å¤–ï¼Œä¸€ä¸ªmini-batchçš„æ¶ˆè€—æ—¶é—´å¾ˆçŸ­ï¼Œ 80%çš„ä»»åŠ¡åœ¨600msä¹‹å†…æ¶ˆè€—ä¸€ä¸ªmini-batch&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ä»¬é€šè¿‡å¤šç§æ–¹å¼åˆ©ç”¨è¿™ç§ç‹¬ç‰¹çš„ç‰¹å¾æ¥å®‰æ’å…±äº«GPUä¸Šçš„ä½œä¸šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œæ ¹æ®é€šå¸¸çš„æ¨¡å‹å¤§å°ï¼Œå¤§éƒ¨åˆ†æ˜¾å­˜åœ¨å…±åŒæ‰§è¡Œçš„ä½œä¸šä¸­å¯ä»¥æ‹¿æ¥è°ƒåº¦&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œmini-batchçš„å‘¨æœŸé€šå¸¸å¾ˆçŸ­ï¼Œå¯ä»¥åœ¨æ¯ä¸ªmini-batchè¾¹ç•Œå¤„è¿›è¡Œç»†ç²’åº¦çš„GPUå†…å­˜å’Œè®¡ç®—èµ„æºçš„è°ƒåº¦ã€‚è¿™å¯ä»¥è¿›ä¸€æ­¥å…è®¸jobé—´çš„å¿«é€Ÿèµ„æºåè°ƒã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰ï¼Œmini-batché€šå¸¸è¿›è¡Œç›¸ä¼¼çš„è®¡ç®—ï¼Œè¿™å¯ä»¥è¢«åˆ©ç”¨å»æè¿°jobæ€§èƒ½ï¼Œå› æ­¤è¿›åº¦ç‡å¯ä»¥è¢«åˆ›å»ºä½œä¸ºæ€§èƒ½çŸ©é˜µæ¥é‡åŒ–å¹²æ‰°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;design&#34;&gt;Design&lt;/h2&gt;
&lt;p&gt;AntManæ·±å…¥å…±åŒè®¾è®¡é›†ç¾¤è°ƒåº¦ç¨‹åºå’ŒDLæ¡†æ¶ï¼Œ æœ¬éƒ¨åˆ†å°†ä»‹ç»ä¸‰éƒ¨åˆ†ï¼šDL æ¡†æ¶çš„ä¿®æ”¹ï¼Œè°ƒåº¦å™¨ä¸è°ƒåº¦åŸåˆ™&lt;/p&gt;
&lt;h3 id=&#34;dynamic-scaling-in-dl-frameworks&#34;&gt;Dynamic Scaling in DL Frameworks&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½ä½¿ç”¨æ•ˆç‡çš„GPUé›†ç¾¤æœ‰ç€æ‰§è¡Œæ›´å¤šä»»åŠ¡çš„æ½œåŠ›ï¼Œä½†éœ€è¦è§£å†³ä¸€ä¸‹æŒ‘æˆ˜
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨æœ€ä¸‹éœ€æ±‚æ‰§è¡Œjobçš„åŒæ—¶é˜²æ­¢GPUå†…å­˜ä½¿ç”¨çš„çˆ†å‘å¯¼è‡´çš„å¤±æ•ˆ&lt;/li&gt;
&lt;li&gt;é€‚åº”è®¡ç®—å•å…ƒçš„ä½¿ç”¨æ³¢åŠ¨çš„åŒæ—¶é™åˆ¶æ½œåœ¨çš„å¹²æ‰°&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;DLæ¡†æ¶æ˜¯ä¸“æ³¨äºGPUæ‰§è¡Œï¼Œ ç¼ºä¹jobåˆä½œçš„èƒ½åŠ›ã€‚è¿™æ¿€å‘äº†åŠ¨æ€ç¼©æ”¾æœºåˆ¶çš„è®¾è®¡ï¼Œæœºåˆ¶åŒ…å«å†…å­˜å’Œè®¡ç®—ä¸¤éƒ¨åˆ†&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;memory-management&#34;&gt;Memory Management&lt;/h4&gt;
&lt;p&gt;AntManä»¥tensorä¸ºå•ä½ï¼Œåœ¨GPUå’ŒCPUçš„å†…å­˜é—´è¿›è¡ŒåŠ¨æ€å†…å­˜ç®¡ç†ã€‚ç±»ä¼¼äºæ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜ï¼ŒAntManä»¥tensorä¸ºå•ä½è¿›è¡Œäº†æ˜¾å­˜è™šæ‹ŸåŒ–ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼ŒDLæ¡†æ¶å¯ä»¥æä¾›è¶…å‡ºä¸Šé™çš„æ˜¾å­˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ˜¾å­˜åˆ†é…&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905151151.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905151151.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220905151151692&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220905151151692&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;åœ¨å¼ é‡è¢«é”€æ¯åï¼ŒGPUå†…å­˜è¢«ç¼“å­˜åœ¨DLæ¡†æ¶å†…çš„ä¸€ä¸ªå…¨å±€å†…å­˜åˆ†é…å™¨ä¸­ï¼Œæ™®éæƒ…å†µä¸‹ï¼Œä¸€äº›å¼ é‡åªåœ¨DLè®­ç»ƒçš„æŸäº›é˜¶æ®µä½¿ç”¨ï¼ˆå¦‚æ•°æ®é¢„å¤„ç†ã€è¯„ä¼°ï¼‰ï¼Œä¸å†éœ€è¦äº†ã€‚ç„¶è€Œï¼Œè¿™éƒ¨åˆ†ç¼“å­˜çš„GPUå†…å­˜ä¸ä¼šè¢«é‡Šæ”¾ï¼ˆå›¾6cï¼‰ã€‚DLæ¡†æ¶ä¸­çš„è¿™ç§ç¼“å­˜å†…å­˜è®¾è®¡ä¼˜åŒ–äº†å•ä¸ªä½œä¸šçš„æ€§èƒ½ï¼Œä½†ä»£ä»·æ˜¯å¤±å»äº†å…±äº«æ½œåŠ›ã€‚&lt;/li&gt;
&lt;li&gt;AntManè½¬å‘äº†æ‰©å±•GPUå†…å­˜ä¸Šé™çš„æ–¹æ³•ã€‚å®ƒä¸»åŠ¨æ£€æµ‹ä½¿ç”¨ä¸­çš„å†…å­˜ï¼Œä»¥ç¼©å°ç¼“å­˜çš„å†…å­˜ï¼Œä»è€Œè‡ªçœåœ°å°†GPUå†…å­˜çš„ä½¿ç”¨è°ƒæ•´åˆé€‚ã€‚è¿™æ˜¯é€šè¿‡ç›‘æµ‹åº”ç”¨æ€§èƒ½å’Œå¤„ç†å°æ‰¹é‡æ—¶çš„å†…å­˜éœ€æ±‚æ¥å®ç°çš„ï¼ˆå›¾6dï¼‰ã€‚&lt;strong&gt;AntManä½¿ç”¨å…¶æœ€å¤§çš„åŠªåŠ›åœ¨GPUè®¾å¤‡ä¸Šåˆ†é…å¼ é‡ï¼Œç„¶è€Œï¼Œå¦‚æœGPUå†…å­˜ä»ç„¶ç¼ºä¹ï¼Œå¼ é‡å¯ä»¥åœ¨GPUä¹‹å¤–ç”¨ä¸»æœºå†…å­˜åˆ†é…&lt;/strong&gt;ï¼ˆå›¾6eï¼‰ã€‚å½“GPUå†…å­˜çš„ä¸Šé™å¢åŠ æ—¶ï¼ŒTensorså¯ä»¥è‡ªåŠ¨åˆ†é…å›GPUï¼ˆå›¾6fï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ˜¾å­˜ä¸Šé™åŠ¨æ€è°ƒæ•´&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905151235.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905151235.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220905151235705&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220905151235705&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å›¾7aè¯´æ˜äº†å†…å­˜æ‰©å±•&lt;strong&gt;å¦‚ä½•è§£å†³çªå‘éœ€æ±‚&lt;/strong&gt;ã€‚åœ¨T0ï¼Œæ­£åœ¨è¿è¡Œçš„DLè®­ç»ƒä½œä¸šçš„å†…å­˜éœ€æ±‚å¢åŠ ï¼Œç”±äºGPUå†…å­˜çš„æœ‰é™ä¸Šé™ï¼Œä¸€äº›å¼ é‡ä¸èƒ½æ”¾åœ¨GPUå†…å­˜ä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸»æœºå†…å­˜åˆ›å»ºã€‚AntManæ£€æµ‹åˆ°ä¸»æœºå†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œåœ¨T1ï¼Œå®ƒæ ¹æ®ä¸»æœºå†…å­˜çš„ä½¿ç”¨&lt;strong&gt;æƒ…å†µæé«˜è¯¥ä½œä¸šçš„GPUå†…å­˜çš„ä¸Šé™&lt;/strong&gt;ï¼Œè™½ç„¶åœ¨è¿™ä¸€ä¸ªå°æ‰¹æ¬¡ä¸­ï¼Œè¿™ä¸ªè¿è¡Œä½œä¸šçš„æ€§èƒ½å¯èƒ½ä¼šå‡æ…¢ï¼Œå› ä¸ºå¼ é‡è¢«æ”¾ç½®åœ¨ä¸»æœºå†…å­˜ä¸­ï¼Œ&lt;strong&gt;ä½†æ˜¯åç»­çš„tensoréƒ½ä¼šç”³è¯·åˆ°æ˜¾å­˜ä¸Š&lt;/strong&gt;ã€‚è€ƒè™‘åˆ°ä¸€ä¸ªå…¸å‹çš„DLè®­ç»ƒå¾€å¾€éœ€è¦æ•°ç™¾ä¸‡ä¸ªå°æ‰¹æ¬¡ï¼Œè¿™ç§æ€§èƒ½å¼€é”€æ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿è¡Œæ—¶æ˜¾å­˜ç»†ç²’åº¦è°ƒæ•´&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ­¤å¤–ï¼ŒAntManåœ¨&lt;strong&gt;è¿è¡Œæ—¶&lt;/strong&gt;æä¾›ç»†ç²’åº¦çš„GPUå†…å­˜è°ƒåº¦ã€‚å¦‚å›¾7bæ‰€ç¤ºï¼Œä¸€ä¸ªè®­ç»ƒä½œä¸šå¯èƒ½ä¼šæ”¶ç¼©ä»¥ç¡®ä¿å…¶ä»–ä½œä¸šçš„å†…å­˜èµ„æºï¼Œå¹¶åœ¨å…¶ä»–ä½œä¸šå®Œæˆåå†å¢é•¿ã€‚å®ƒè¯´æ˜äº†ä¸€ä¸ªDLä½œä¸šåœ¨T0æ—¶ç¼©å‡ï¼Œåœ¨T1æ—¶å¢åŠ ï¼Œä»£ä»·æ˜¯åœ¨ä¸»æœºå†…å­˜ä¸Šåˆ†é…äº†ä¸€äº›å¼ é‡ã€‚å› æ­¤ï¼Œåœ¨åŒä¸€å…±äº«GPUä¸­è¿è¡Œçš„ä½œä¸šåœ¨T0å’ŒT1ä¹‹é—´å¯¹å‰©ä½™GPUå†…å­˜çš„ä½¿ç”¨æ˜¯æœ‰ä¿éšœçš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;computation-management&#34;&gt;Computation Management&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åŠ¨æ€è®¡ç®—å•å…ƒç®¡ç†ï¼Œç”¨äºæ§åˆ¶DLè®­ç»ƒä½œä¸šçš„GPUåˆ©ç”¨ç‡ã€‚
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç±»ä¼¼cgroupï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°éš”ç¦»DLç‰¹å®šè¿›ç¨‹çš„GPUè®¡ç®—èµ„æºè®¿é—®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“å¤šä¸ªDLä½œä¸šåœ¨åŒä¸€ä¸ªGPUä¸Šå¯åŠ¨æ—¶ï¼Œå¹²æ‰°ä¸»è¦æ˜¯ç”±&lt;strong&gt;æ½œåœ¨çš„GPUå†…æ ¸æ’é˜Ÿå»¶è¿Ÿ&lt;/strong&gt;å’Œ&lt;strong&gt;PCIeæ€»çº¿äº‰ç”¨&lt;/strong&gt;å¼•èµ·çš„ï¼Œè¿™ä¼šå¯¼è‡´æ‰€æœ‰ä½œä¸šçš„æ€§èƒ½ä¸€è‡´ä¸‹é™ï¼Œå¦‚æœpacking jobæ˜¯åœ¨ç›¸åŒçš„æ¨¡å‹å’Œé…ç½®ä¸Šè¿è¡Œçš„è¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;**å¦‚æœä¸åŒçš„ä½œä¸šè¢«æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œä½œä¸šä¼šä»¥ä¸åŒçš„æ–¹å¼å˜æ…¢ã€‚**è¿™æ˜¯å› ä¸ºä½œä¸šåœ¨è·å–GPUè®¡ç®—å•å…ƒæ–¹é¢æœ‰ä¸åŒçš„èƒ½åŠ›ã€‚å› æ­¤ï¼Œä½œä¸šæ€§èƒ½åœ¨GPUå…±äº«ä¸­å‡ ä¹æ— æ³•ä¿è¯æˆ–é¢„æµ‹ï¼Œå¯¼è‡´å¤šç§Ÿæˆ·é›†ç¾¤çš„GPUå…±äº«éƒ¨ç½²å›°éš¾ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AntManä¸­ï¼ŒGPUè¿ç®—å™¨çš„æ‰§è¡Œæ˜¯ç”±ä¸€ä¸ªæ–°å¼•å…¥çš„æ¨¡å—è´Ÿè´£çš„ï¼Œç§°ä¸ºGpuOpManagerã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“GPUè¿ç®—å™¨å‡†å¤‡æ‰§è¡Œæ—¶ï¼Œå®ƒè¢«æ·»åŠ åˆ°GpuOpManagerï¼Œè€Œä¸æ˜¯ç›´æ¥å¯åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;GpuOpManagerçš„ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡&lt;strong&gt;å»¶è¿Ÿæ‰§è¡ŒGPUè¿ç®—ç¬¦æ¥æ§åˆ¶å¯åŠ¨é¢‘ç‡&lt;/strong&gt;ã€‚GpuOpManageré€šè¿‡è¿™ç§æ–¹å¼æ¥é™åˆ¶DLè®­ç»ƒä½œä¸šçš„GPUåˆ©ç”¨ç‡ã€‚GpuOpManagerä¸æ–­å¯¹GPUè¿ç®—å™¨çš„æ‰§è¡Œæ—¶é—´è¿›è¡Œåˆ†æï¼Œå¹¶åœ¨å¯åŠ¨GPUè¿ç®—å™¨ä¹‹å‰ç®€å•åœ°åˆ†é…ç©ºé—²çš„æ—¶é—´æ®µã€‚&lt;/li&gt;
&lt;li&gt;è¯·æ³¨æ„ï¼ŒGpuOpManageråªæ˜¯å»¶è¿Ÿäº†GPUå†…æ ¸çš„æ‰§è¡Œã€‚å› æ­¤ï¼Œè¿ç®—ç¬¦ï¼ˆåŒ…æ‹¬GPUè¿ç®—ç¬¦å’ŒCPUè¿ç®—ç¬¦ï¼‰ä¹‹é—´çš„æ½œåœ¨ä¾èµ–å…³ç³»è¢«ä¿ç•™ä¸‹æ¥ï¼Œè¿™æ„å‘³ç€å¦‚æœå¯èƒ½çš„è¯ï¼ŒCPUè¿ç®—ç¬¦å¯ä»¥ç»§ç»­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905151223.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905151223.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220905151222951&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220905151222951&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å›¾8è¯´æ˜äº†åœ¨åŒä¸€GPUä¸Šæ‰§è¡Œçš„ä¸¤ä¸ªä½œä¸šçš„GPUè®¡ç®—å•å…ƒå¹²æ‰°çš„ä¾‹å­ã€‚å›¾8aè¯´æ˜äº†Job-Aæ˜¯å¦‚ä½•ä»¥ç»†ç²’åº¦çš„æ–¹å¼åœ¨GPUä¸Šæ‰§è¡Œçš„ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒGPUå†…æ ¸å°†è¢«æŒ‰é¡ºåºæ”¾ç½®ï¼Œå¹¶ç”±GPUè®¡ç®—å•å…ƒé€ä¸€å¤„ç†ã€‚è¯·æ³¨æ„ï¼Œåœ¨å›¾8ä¸­ï¼ŒJob-Aå¯èƒ½æ— æ³•ä½¿GPUå®Œå…¨é¥±å’Œï¼Œå¯¼è‡´GPUå‘¨æœŸé—²ç½®ï¼ŒGPUåˆ©ç”¨ç‡ä½ï¼Œæœ‰å¯èƒ½è¢«å…¶ä»–ä½œä¸šä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œä½œä¸š-Bè¢«å®‰æ’åœ¨è¿™ä¸ªGPUä¸Šï¼ˆå›¾8bï¼‰ã€‚Job-Bçš„GPUæ“ä½œè€…å¯åŠ¨åœ¨GPUä¸­æ‰§è¡Œçš„å†…æ ¸ï¼ˆç»¿è‰²å—ï¼‰ï¼Œè¿™å¯ä»¥å¡«æ»¡å®ƒï¼Œä»è€Œå»¶è¿Ÿå…¶ä»–GPUå†…æ ¸ï¼ˆè“è‰²å—ï¼‰çš„æ‰§è¡Œï¼Œå¯¼è‡´Job-Açš„æ€§èƒ½ä¸ä½³ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§å¹²æ‰°ä¸»è¦æ¥è‡ªäºç¼ºä¹æ§åˆ¶GPUå†…æ ¸æ‰§è¡Œé¢‘ç‡çš„èƒ½åŠ›ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨DLæ¡†æ¶ä¸­å¼•å…¥äº†ä¸€ä¸ªGPUè¿ç®—å™¨ç®¡ç†å™¨ï¼ˆå›¾8cï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç°æœ‰çš„DLæ¡†æ¶ä¸€æ—¦æ»¡è¶³äº†GPUè¿ç®—å™¨çš„æ§åˆ¶ä¾èµ–æ€§ï¼Œå°±ä¼šåœ¨GPUè¿ç®—å™¨ä¸­å‘å¸ƒGPUå†…æ ¸ã€‚åœ¨å¦‚å›¾8cæ‰€ç¤ºï¼Œç¬¬ä¸‰ä¸ªCPUæ“ä½œç¬¦æ²¡æœ‰è¢«é˜»æ­¢ï¼Œç„¶è€Œï¼Œç¬¬å››ä¸ªæ“ä½œç¬¦è¢«å»¶è¿Ÿäº†ï¼Œå› ä¸ºå®ƒä¾èµ–äºç¬¬äºŒä¸ªGPUæ“ä½œç¬¦ï¼Œå®ƒçš„æ‰§è¡Œè¢«GpuOpManagerå»¶è¿Ÿäº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;collaborative-scheduler&#34;&gt;Collaborative Scheduler&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;AntMançš„æ•´ä½“æ¶æ„&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905152947.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905152947.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220905152947633&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220905152947633&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;AntMané‡‡ç”¨äº†ä¸€ä¸ªåˆ†å±‚ç»“æ„
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªå…¨å±€è°ƒåº¦å™¨è´Ÿè´£job è°ƒåº¦&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå·¥ä½œæœåŠ¡å™¨éƒ½åŒ…å«ä¸€ä¸ªæœ¬åœ°åè°ƒå™¨ï¼Œè´Ÿè´£é€šè¿‡è€ƒè™‘DLæ¡†æ¶æŠ¥å‘Šçš„ç»Ÿè®¡æ•°æ®ï¼Œä½¿ç”¨åŠ¨æ€èµ„æºæ‰©å±•çš„åŸºå…ƒç®¡ç†ä½œä¸šçš„æ‰§è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;AntManæ˜¯ä¸ºå¤šç§Ÿæˆ·GPUé›†ç¾¤è®¾è®¡çš„ã€‚
&lt;ul&gt;
&lt;li&gt;åœ¨å¤šç§Ÿæˆ·é›†ç¾¤ä¸­ï¼Œæ¯ä¸ªç§Ÿæˆ·é€šå¸¸æ‹¥æœ‰ä¸€å®šçš„èµ„æºï¼Œè¢«æ³¨é‡Šä¸ºèµ„æºé…é¢ï¼ˆå³GPUçš„æ•°é‡ï¼‰ï¼Œè¿™æ˜¯å¯ä»¥åˆ†é…ç»™è¯¥ç§Ÿæˆ·çš„ä½œä¸šçš„å¹¶å‘æ€§èƒ½ä¿è¯èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªç§Ÿæˆ·çš„GPUèµ„æºé…é¢ä¹‹å’Œå°äºç­‰äºä¸€ä¸ªGPUé›†ç¾¤çš„æ€»å®¹é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨AntManä¸­ï¼Œå·¥ä½œè¢«åˆ†ä¸ºä¸¤ç§ï¼Œç”±å…¨å±€è°ƒåº¦å™¨åº”ç”¨ä¸åŒçš„è°ƒåº¦ç­–ç•¥
&lt;ul&gt;
&lt;li&gt;èµ„æºä¿è¯å‹å·¥ä½œï¼šèµ„æºä¿éšœå‹ä½œä¸šä¼šæ¶ˆè€—å…¶ç›¸åº”ç§Ÿæˆ·çš„ä¸€å®šæ•°é‡çš„GPUèµ„æºé…é¢ã€‚AntManç¡®ä¿èµ„æºä¿è¯ä½œä¸šçš„æ€§èƒ½åº”è¯¥ä¸ç‹¬å æ‰§è¡Œçš„æ€§èƒ½ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;æœºä¼šå‹å·¥ä½œï¼šæœºä¼šå‹ä½œä¸šåˆ™ä¸ä¼šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AntManå„æ¨¡å—çš„è¿ä½œæ–¹å¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è°ƒåº¦å†³ç­–å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ª&lt;strong&gt;è‡ªä¸Šè€Œä¸‹&lt;/strong&gt;çš„æ§åˆ¶æµ
&lt;ul&gt;
&lt;li&gt;åœ¨AntManä¸­ï¼Œä¸ä¼ ç»Ÿçš„é›†ç¾¤è°ƒåº¦å™¨ç±»ä¼¼ï¼Œè°ƒåº¦å†³ç­–ç”±å…¨å±€è°ƒåº¦å™¨æ´¾å‘ç»™æœ¬åœ°åè°ƒå™¨&lt;/li&gt;
&lt;li&gt;æœ¬åœ°åè°ƒå™¨ä½¿ç”¨åŠ¨æ€ç¼©æ”¾æœºåˆ¶å¯¹GPUèµ„æºè¿›è¡Œå†…çœå¼è°ƒåº¦ï¼Œä»¥è¾¾åˆ°DLè®­ç»ƒä½œä¸šçš„ç›®çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ•°æ®ç»Ÿè®¡æµä¿¡æ¯ç”±&lt;strong&gt;æœ¬åœ°åè°ƒå™¨çš„ç»Ÿè®¡æ¨¡å—æ”¶é›†&lt;/strong&gt;ï¼Œå¹¶ä»¥&lt;strong&gt;è‡ªä¸‹è€Œä¸Š&lt;/strong&gt;çš„æ–¹å¼æ±‡æ€»åˆ°&lt;strong&gt;é›†ç¾¤ç»Ÿè®¡æ¨¡å—&lt;/strong&gt;ä¸Š
&lt;ul&gt;
&lt;li&gt;ä¿¡æ¯
&lt;ul&gt;
&lt;li&gt;ç¡¬ä»¶ä¿¡æ¯
&lt;ul&gt;
&lt;li&gt;GPUåˆ©ç”¨ç‡&lt;/li&gt;
&lt;li&gt;GPUå†…å­˜ä½¿ç”¨ç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;DLæ¡†æ¶æŠ¥å‘Šçš„è¯¦ç»†ä½œä¸šä¿¡æ¯
&lt;ul&gt;
&lt;li&gt;å°å‹æ‰¹æ¬¡æŒç»­æ—¶é—´&lt;/li&gt;
&lt;li&gt;å³°å€¼å†…å­˜ä½¿ç”¨ç‡&lt;/li&gt;
&lt;li&gt;æœ€å°å†…å­˜ä½¿ç”¨ç‡&lt;/li&gt;
&lt;li&gt;ä¸»æœºå†…å­˜æ¶ˆè€—ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿™äº›ä¿¡æ¯å¯ä»¥å¸®åŠ©å…¨å±€è°ƒåº¦å™¨åšå‡ºä½œä¸šè°ƒåº¦å†³ç­–
&lt;ul&gt;
&lt;li&gt;å³°å€¼å†…å­˜å’Œæœ€å°å†…å­˜ä½¿ç”¨é‡æ˜¯ç”¨æ¥æŒ‡ç¤ºå¯ä»¥å¿«é€Ÿæä¾›çš„GPUå†…å­˜å¤§å°&lt;/li&gt;
&lt;li&gt;æ‰¹å¤„ç†æ—¶é—´æ˜¾ç¤ºGPUå†…å­˜å¤šä¹…å¯ä»¥ç”¨äºå¦ä¸€ä¸ªDLè®­ç»ƒä½œä¸š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å½“ä½œä¸šåœ¨GPUæœåŠ¡å™¨ä¸Šå¯åŠ¨ï¼Œæœ¬åœ°è°ƒåº¦å™¨ç®¡ç†å…¶ç«¯åˆ°ç«¯æ‰§è¡Œ
&lt;ul&gt;
&lt;li&gt;ç”±äºDLè®­ç»ƒä½œä¸šçš„è´Ÿè½½æ³¢åŠ¨ï¼Œæœ¬åœ°åè°ƒå™¨ä»¥&lt;strong&gt;è‡ªçœ&lt;/strong&gt;(introspective)çš„æ–¹å¼è¡Œäº‹ï¼Œå¯¹DLæ¡†æ¶è¿›è¡ŒæŒç»­çš„ä½œä¸šæ§åˆ¶&lt;/li&gt;
&lt;li&gt;å®ƒä»ç¡¬ä»¶å’ŒDLæ¡†æ¶ä¸­æ”¶é›†æ‰€æœ‰ä½œä¸šçš„ç»Ÿè®¡æ•°æ® -&amp;gt; ä½¿ç”¨æˆ‘ä»¬åœ¨ç¬¬3.1èŠ‚ä¸­ä»‹ç»çš„æ–°åŸè¯­ &amp;ndash;&amp;gt; é€šè¿‡èµ„æºä½¿ç”¨è°ƒæ•´ï¼ˆä¾‹å¦‚ï¼Œæ”¶ç¼©GPUå†…å­˜ï¼‰&amp;ndash;&amp;gt; æ¥æ§åˆ¶ä½œä¸šæ€§èƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;scheduling-policy&#34;&gt;Scheduling Policy&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç›®æ ‡&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ç”±äºé›†ç¾¤ä¸Šçš„è´Ÿè½½å’Œä½œä¸šçš„èµ„æºéœ€æ±‚ä¸æ–­æ³¢åŠ¨ï¼Œåœ¨&lt;strong&gt;æä¾›å…¬å¹³æ€§&lt;/strong&gt;ï¼ˆå¦‚ç¡®ä¿DLä½œä¸šçš„SLAï¼Œä¿è¯èµ„æºï¼‰å’Œ&lt;strong&gt;å®ç°é«˜èµ„æºåˆ©ç”¨ç‡&lt;/strong&gt;ï¼ˆå¦‚GPUåˆ©ç”¨ç‡ï¼‰ä¹‹é—´å­˜åœ¨ç€å›ºæœ‰çš„çŸ›ç›¾ã€‚&lt;/li&gt;
&lt;li&gt;æ™®éçš„ç”Ÿäº§å‹DLé›†ç¾¤è°ƒåº¦å™¨ç»å¸¸ä»¥æŸäº›æ–¹å¼&lt;strong&gt;ç”¨å…¬å¹³æ€§æ¢å–æ•ˆç‡&lt;/strong&gt;ã€‚
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œç©ºé—²èµ„æºè¢«åˆ†é…ç»™è¶…é¢é…ç½®çš„ç§Ÿæˆ·ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶è€Œï¼Œè¿™æ ·çš„GPUèµ„æºåœ¨æ²¡æœ‰æŠ¢å çš„æƒ…å†µä¸‹å¾ˆéš¾æ‹¿å›æ¥ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒæŠ¢å å¾ˆå°‘è¢«ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä½¿æ­£åœ¨è¿è¡Œçš„ä½œä¸šå¤±è´¥ï¼ŒåŒæ—¶æµªè´¹äº†æ˜‚è´µçš„GPUå‘¨æœŸã€‚&lt;/li&gt;
&lt;li&gt;æ­¤å¤–ï¼Œè¿˜æŠ¥å‘Šäº†æ­§è§†å¤§å‹ä½œä¸šçš„å¤±åºè¡Œä¸ºï¼ˆå³åˆ†é…æ›´å¤šçš„GPUï¼‰ï¼Œå¯¼è‡´å€¾å‘äºå°å‹ä½œä¸šçš„ä¸å…¬å¹³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;é¦–è¦ç›®æ ‡ï¼šå¤šç§Ÿæˆ·&lt;strong&gt;å…¬å¹³æ€§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;AntMané€šè¿‡åœ¨å…¨å±€è°ƒåº¦å™¨å’Œæœ¬åœ°åè°ƒå™¨ä¸­å®æ–½çš„æ”¿ç­–å®ç°äº†å…¬å¹³æ€§&lt;/li&gt;
&lt;li&gt;è¿™äº›æ”¿ç­–ç”±åŠ¨æ€æ‰©å±•æœºåˆ¶æä¾›æ”¯æŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒä¼˜å…ˆï¼š&lt;strong&gt;æé«˜é›†ç¾¤æ•ˆç‡&lt;/strong&gt;ï¼Œä»è€Œå®ç°æ›´é«˜çš„ååé‡
&lt;ul&gt;
&lt;li&gt;AntManä¸­è¿˜å¼•å…¥äº†GPUæœºä¼šä¸»ä¹‰å·¥ä½œï¼Œä»¥çªƒå–GPUä¸­çš„ç©ºé—²å‘¨æœŸï¼Œä»è€Œæœ€å¤§é™åº¦åœ°æé«˜é›†ç¾¤çš„åˆ©ç”¨ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¨å±€è°ƒåº¦å™¨ï¼šç»´æŠ¤ç€å·¥ä½œåˆ°è¾¾çš„å¤šä¸ªç§Ÿæˆ·é˜Ÿåˆ—ï¼Œå†³å®šä¸ºå·¥ä½œåˆ†é…çš„GPUçš„ä½ç½®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è°ƒåº¦ç­–ç•¥&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºèµ„æºä¿è¯å‹å·¥ä½œå’Œæœºä¼šå‹å·¥ä½œï¼ŒAntManåº”ç”¨ä¸åŒçš„è°ƒåº¦ç­–ç•¥ï¼Œå¦‚ç®—æ³•1æ‰€ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905153001.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905153001.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220905153001724&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220905153001724&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;findNodesæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¿”å›æ»¡è¶³å·¥ä½œè¯·æ±‚çš„èŠ‚ç‚¹å’ŒGPUå€™é€‰è€…ï¼Œå¹¶æœ‰ä¸€ä¸ªå¯é€‰çš„å‚æ•°æ¥æŒ‡å®šçº¦æŸã€‚&lt;/li&gt;
&lt;li&gt;å…¨å±€è°ƒåº¦å™¨åœ¨&lt;strong&gt;æœ‰è¶³å¤Ÿçš„GPUèµ„æºçš„æƒ…å†µä¸‹&lt;/strong&gt;å…¬å¹³åœ°åˆ†é…èµ„æºä¿è¯ä½œä¸šã€‚&lt;/li&gt;
&lt;li&gt;é™¤æ­¤ä¹‹å¤–ï¼Œèµ„æºä¿è¯ä½œä¸šè¿˜å¯ä»¥&lt;strong&gt;ä½¿ç”¨ç©ºé—²çš„GPUèµ„æº&lt;/strong&gt;æ¥æœ€å¤§åŒ–ä½œä¸šæ€§èƒ½ ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€ä¸ªä½œä¸šçš„èµ„æºè¯·æ±‚åªèƒ½éƒ¨åˆ†æ»¡è¶³ï¼Œå…¨å±€è°ƒåº¦å™¨å°±ä¼šä¸ºè¿™ä¸ªä½œä¸š&lt;strong&gt;ä¿ç•™èµ„æº&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¿ç•™çš„èµ„æºå°†æ°¸è¿œä¸ä¼šè¢«å…¶ä»–èµ„æºä¿è¯çš„ä½œä¸šå ç”¨ï¼Œä½†æ˜¯å®ƒä»¬å¯ä»¥è¢«&lt;strong&gt;æœºä¼šä¸»ä¹‰ä½œä¸š&lt;/strong&gt;æ‰€åˆ©ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœºä¼šä¸»ä¹‰ä½œä¸š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œå…¨å±€è°ƒåº¦å™¨å°†ä¼°è®¡æ²¡æœ‰è®¾ç½®GPUé…é¢çš„ä½œä¸šçš„&lt;strong&gt;æ’é˜Ÿæ—¶é—´&lt;/strong&gt;ã€‚æ’é˜Ÿæ—¶é—´é•¿çš„ä½œä¸šå°†è¢«&lt;strong&gt;è‡ªåŠ¨&lt;/strong&gt;ä½œä¸ºæœºä¼šä¸»ä¹‰ä½œä¸šæ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;ç›®çš„ï¼šä¸ºäº†æœ€å¤§é™åº¦åœ°åˆ©ç”¨è‡ªç”±èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;å®ƒé€šè¿‡è€ƒè™‘&lt;strong&gt;å®é™…çš„GPUåˆ©ç”¨ç‡&lt;/strong&gt;åœ¨GPUä¸Šåˆ†é…æœºä¼šä¸»ä¹‰ä½œä¸šã€‚åªæœ‰åœ¨è¿‡å»10ç§’å†…åˆ©ç”¨ç‡**ä½äºMï¼ˆç›®å‰è®¾å®šä¸º80%ï¼‰**çš„GPUå¯ä»¥è¢«é€‰ä¸ºå€™é€‰ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨&lt;strong&gt;æœ€ç©ºé—²çš„å€™é€‰äººä¸Šåˆ†é…æœºä¼šä¸»ä¹‰ä½œä¸š&lt;/strong&gt;ï¼ˆå³minLoadNodesï¼Œç¬¬9-10è¡Œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åˆ†é…åœ¨åŒä¸€ä¸ªGPUä¸Šçš„ä½œä¸šç”±&lt;strong&gt;æœ¬åœ°åè°ƒè€…&lt;/strong&gt;ç®¡ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AntMan&lt;strong&gt;é»˜è®¤&lt;/strong&gt;ä¼šè‡ªåŠ¨é€‰æ‹©æœºä¼šä¸»ä¹‰ä½œä¸šï¼Œä½†å®ƒä¹Ÿå…è®¸ç”¨æˆ·åœ¨æäº¤æ—¶&lt;strong&gt;æ‰‹åŠ¨&lt;/strong&gt;ç¡®å®šä½œä¸šç±»å‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ˜ç¡®æŒ‡å®šä¸ºèµ„æºä¿è¯ä½œä¸šï¼Œä»¥ç¡®ä¿SLA&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªä½œä¸šä¹Ÿå¯ä»¥è¢«æŒ‡å®šä¸ºæœºä¼šä¸»ä¹‰ä½œä¸šï¼Œæ°¸è¿œä¸ä¼šå ç”¨ç§Ÿæˆ·çš„èµ„æºé…é¢&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨å®è·µä¸­ï¼Œç”¨æˆ·é€šå¸¸ä»¥æœºä¼šä¸»ä¹‰æ¨¡å¼æäº¤ä½œä¸šï¼Œä»¥é¿å…æ½œåœ¨çš„æ’é˜Ÿå»¶è¿Ÿï¼Œç›®çš„æ˜¯è¿›è¡Œè°ƒè¯•å’Œè¶…å‚æ•°è°ƒæ•´ï¼Œè¿™éƒ½æ˜¯ç”±æ—©æœŸåé¦ˆé©±åŠ¨çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ¬åœ°è°ƒåº¦å™¨ï¼šåä½œæ‰§è¡Œå…±äº«GPUä¸Šçš„ä½œä¸š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¦‚ä½•åœ¨å…±äº«æ‰§è¡Œä¸­ç¡®ä¿èµ„æºä¿è¯ä½œä¸šçš„æ€§èƒ½&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸€ä¸ªGPUåªä¼šåˆ†é…ç»™ä¸€ä¸ªèµ„æºä¿è¯ä½œä¸š&lt;/strong&gt;ï¼Œå› ä¸ºå®ƒæ¶ˆè€—GPUé…é¢&lt;/li&gt;
&lt;li&gt;æœ¬åœ°åè°ƒè€…é¦–å…ˆé™åˆ¶æœºä¼šä¸»ä¹‰å·¥ä½œä½¿ç”¨GPUï¼Œ&lt;strong&gt;é˜²æ­¢èµ„æºä¿è¯å·¥ä½œå—åˆ°å¹²æ‰°&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;åœ¨å¯åŠ¨DLè®­ç»ƒä½œä¸šæ—¶ï¼Œéœ€è¦ç”±DLæ¡†æ¶åˆå§‹åŒ–GPUè®¾å¤‡
&lt;ul&gt;
&lt;li&gt;å¦‚æœGPUå¤„äºé«˜è´Ÿè·çŠ¶æ€ï¼Œåˆ™éœ€è¦æ›´å¤šæ—¶é—´ã€‚ï¼ˆåˆå§‹åŒ–æ—¶å ç”¨æ›´å¤šèµ„æºï¼‰&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦èµ„æºä¿è¯ä½œä¸šç¨³å®šæ‰§è¡Œï¼Œæœ¬åœ°åè°ƒå™¨å°†æŠŠå‰©ä½™çš„GPUå†…å­˜åˆ†é…ç»™æœºä¼šä¸»ä¹‰ä½œä¸šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é€šè¿‡ç›‘æµ‹ä½œä¸šæ€§èƒ½ï¼ˆå³å°æ‰¹é‡æ—¶é—´ï¼‰ï¼Œåœ¨ä¸å¹²æ‰°èµ„æºä¿è¯ä½œä¸šçš„æƒ…å†µä¸‹ï¼Œé€æ­¥å¢åŠ æœºä¼šä¸»ä¹‰ä½œä¸šçš„GPUè®¡ç®—å•å…ƒä½¿ç”¨é‡&lt;/li&gt;
&lt;li&gt;åŒæ ·ï¼Œå½“ä¸€ä¸ªæœºä¼šä¸»ä¹‰ä½œä¸šåˆ°è¾¾å…±äº«GPUæ—¶ï¼Œæœ¬åœ°åè°ƒå™¨åœ¨ä¸å½±å“èµ„æºä¿è¯ä½œä¸šçš„æƒ…å†µä¸‹ï¼Œä»¥é˜¶æ¢¯å¼çš„æ–¹å¼æé«˜å…¶GPUèµ„æºä½¿ç”¨ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚ä½•å¤„ç†èµ„æºä¿è¯ä½œä¸šçš„èµ„æºéœ€æ±‚æ¿€å¢&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºäº†æ„è¯†åˆ°åŠ¨æ€çš„èµ„æºéœ€æ±‚ï¼Œæœ¬åœ°åè°ƒå™¨ç›‘æµ‹DLæ¡†æ¶æŠ¥å‘Šçš„æŒ‡æ ‡&lt;/li&gt;
&lt;li&gt;å½“ä¸€ä¸ªèµ„æºä¿è¯ä½œä¸šå¢åŠ äº†GPUå†…å­˜éœ€æ±‚æ—¶ï¼Œç”±äºæœ‰äº†é€šç”¨å†…å­˜ï¼Œå¼ é‡è¢«æš‚æ—¶ä½¿ç”¨ä¸»æœºå†…å­˜å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;æœ¬åœ°åè°ƒè€…ç¼©å‡å…¶ä»–æœºä¼šä¸»ä¹‰ä½œä¸šçš„GPUå†…å­˜ä½¿ç”¨é‡ï¼Œå¹¶æé«˜èµ„æºä¿è¯ä½œä¸šçš„GPUå†…å­˜é™åˆ¶ï¼Œä»¥æ¢å¤å…¶æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;è¿™å¯¹GPUè®¡ç®—å•å…ƒçš„ä½¿ç”¨åè°ƒæ˜¯ç±»ä¼¼çš„ã€‚&lt;/li&gt;
&lt;li&gt;ğŸš¨AntManä¾é åº”ç”¨å±‚é¢çš„æŒ‡æ ‡ï¼ˆå³è¿·ä½ æ‰¹å¤„ç†æ—¶é—´ï¼‰æ¥è¡¨æ˜èµ„æºä¿è¯ä½œä¸šçš„æ€§èƒ½ã€‚å¦‚æœå®ƒè§‚å¯Ÿåˆ°èµ„æºä¿è¯ä½œä¸šçš„æ€§èƒ½ä¸ç¨³å®šï¼Œå®ƒå°±ä¼šé‡‡å–æ‚²è§‚çš„ç­–ç•¥æ¥é™åˆ¶å…¶ä»–æœºä¼šä¸»ä¹‰ä½œä¸šå¯¹GPUèµ„æºçš„ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“ä¸€ä¸ªGPUåªè¢«æœºä¼šä¸»ä¹‰å·¥ä½œæ‰€å…±äº«æ—¶ï¼Œæœ€å¤§é™åº¦åœ°æé«˜èšåˆå·¥ä½œçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœåªæœ‰ä¸€ä¸ªæœºä¼šä¸»ä¹‰ä½œä¸šï¼Œé‚£ä¹ˆGPUèµ„æºå°±å¯ä»¥è¢«è¿™ä¸ªä½œä¸šå……åˆ†åˆ©ç”¨ï¼Œè€Œæ²¡æœ‰ä»»ä½•çº¦æŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ‰æ—¶ï¼Œä¸€ä¸ªGPUæœ‰å¯èƒ½è¢«å¤šä¸ªæœºä¼šä¸»ä¹‰å·¥ä½œå ç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;AntMané€šè¿‡&lt;strong&gt;æœ€å¤§é™åº¦åœ°æé«˜GPUå†…å­˜æ•ˆç‡&lt;/strong&gt;æ¥ä¼˜åŒ–èšåˆä½œä¸šçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨å¯ç”¨&lt;strong&gt;åŠ¨æ€ç¼©æ”¾æœºåˆ¶&lt;/strong&gt;åï¼Œæˆ‘ä»¬å‘ç°ä¸åŒçš„å·¥ä½œè´Ÿè½½åœ¨å†…å­˜é™åˆ¶å¸¦æ¥çš„æ€§èƒ½ä¸‹é™æ–¹é¢è¡¨ç°å‡º&lt;strong&gt;ä¸åŒçš„æ•æ„Ÿæ€§&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905153042.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220905153042.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220905153042457&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220905153042457&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚å›¾10æ‰€ç¤ºï¼Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SRæ¨¡å‹å³ä½¿åœ¨å…¶è®¾å¤‡å†…å­˜å‡å°‘90%çš„æƒ…å†µä¸‹ï¼Œä¹Ÿåªé­å—äº†å¤§çº¦25%çš„æ€§èƒ½ä¸‹é™&lt;/li&gt;
&lt;li&gt;Cifar10æ•°æ®é›†ä¸Šçš„VGG16[43]æ¨¡å‹ï¼ˆVGGï¼‰å³ä½¿åœ¨è®¾å¤‡å†…å­˜å‡å°‘ä¸€åŠåï¼Œä¹Ÿèƒ½ä¿æŒå…¶å¤§éƒ¨åˆ†çš„åŸå§‹æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;ImageNetæ•°æ®é›†ï¼ˆResNetï¼‰ä¸Šçš„ResNet50[22]å¯¹å†…å­˜ç¼©å‡å¾ˆæ•æ„Ÿï¼›10%çš„å†…å­˜ç¼©å‡ä¼šå¸¦æ¥60%ä»¥ä¸Šçš„é€Ÿåº¦ä¸‹é™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“æœºä¼šä¸»ä¹‰ä½œä¸šçš„æ€»çš„GPUå†…å­˜éœ€æ±‚è¶…è¿‡äº†GPUçš„å†…å­˜å®¹é‡æ—¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†GPUå†…å­˜åˆ†é…ç»™æœ€èƒ½æé«˜ä½œä¸šæ€§èƒ½ï¼ˆNormalized Performanceï¼‰çš„ä½œä¸š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Job å‡çº§&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœºä¼šä¸»ä¹‰å·¥ä½œè™½ç„¶ä»¥best effortæ‰§è¡Œï¼Œ ä½†è¿™æ˜¯åœ¨æ²¡æœ‰SLAä¿è¯çš„æƒ…å†µä¸‹ã€‚&lt;/li&gt;
&lt;li&gt;å…¨å±€è°ƒåº¦å™¨ä¼šåœ¨æœ‰è¶³å¤Ÿèµ„æºçš„æƒ…å†µä¸‹&lt;strong&gt;å‡çº§&lt;/strong&gt;è¿™äº›ä½œä¸šï¼Œä»¥å¿«é€Ÿå®Œæˆå®ƒä»¬ã€‚&lt;/li&gt;
&lt;li&gt;å…¨å±€è°ƒåº¦å™¨é€šçŸ¥æœ¬åœ°åè°ƒå™¨ï¼Œå°†å…¶&lt;strong&gt;æ ‡è®°&lt;/strong&gt;ä¸ºèµ„æºä¿è¯ä½œä¸šï¼Œå¹¶æ¶ˆè€—ç§Ÿæˆ·çš„GPUé…é¢æ¥å®Œæˆä½œä¸šå‡çº§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºåˆ†å¸ƒå¼åŒæ­¥DLè®­ç»ƒæ¥è¯´ï¼Œéƒ¨åˆ†å‡çº§æ²¡æœ‰å¸®åŠ©ï¼Œå› ä¸ºä¸€ä¸ªå·¥ä½œè€…çš„æ€§èƒ½ä¸‹é™å¯èƒ½ä¼šå¹¿æ’­åˆ°æ•´ä¸ªä½œä¸šã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œå…¨å±€è°ƒåº¦å™¨æ£€æŸ¥æ‰€æœ‰GPUæ˜¯å¦éƒ½è¢«æœºä¼šä¸»ä¹‰å·¥ä½œå¡«æ»¡ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€æ—¦æ‰€æœ‰çš„ä»»åŠ¡å®ä¾‹éƒ½å‡†å¤‡å¥½å‡çº§ï¼Œå¹¶ä¸”èµ„æºé…é¢è¶³å¤Ÿï¼ŒAntManæ›´æ„¿æ„å°†æœºä¼šä¸»ä¹‰å·¥ä½œå‡çº§ï¼Œè€Œä¸æ˜¯æ–°å¯ä¸€ä¸ªå·¥ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;implementation&#34;&gt;Implementation&lt;/h2&gt;
&lt;h3 id=&#34;deep-learning-framework&#34;&gt;Deep Learning Framework&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åŠ¨æ€ç¼©æ”¾æœºåˆ¶åœ¨ä¸¤ä¸ªæµè¡Œçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­å®ç°
&lt;ul&gt;
&lt;li&gt;Pytorch&lt;/li&gt;
&lt;li&gt;Tensorflow&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;DLæ¡†æ¶çš„ä¿®æ”¹ä¸»è¦ä½“ç°åœ¨ä¸‰ä¸ªéƒ¨åˆ†ï¼š
&lt;ul&gt;
&lt;li&gt;å†…å­˜åˆ†é…å™¨
&lt;ul&gt;
&lt;li&gt;ä¸ºäº†å®ç°åŠ¨æ€çš„é€šç”¨å†…å­˜ï¼Œ(tensorflow ::&lt;strong&gt;BFCAllocator&lt;/strong&gt;, PyTorch::&lt;strong&gt;CUDACachingAllocator&lt;/strong&gt;ï¼‰è¢«ä¿®æ”¹ä»¥å¼•å…¥å¯è°ƒæ•´çš„å†…å­˜ä¸Šé™ã€‚å†…å­˜åˆ†é…å™¨ä¼šè·Ÿè¸ªå†…å­˜åˆ†é…çš„æ€»å­—èŠ‚æ•°ï¼Œå¹¶åœ¨æ€»å­—èŠ‚æ•°è¶…è¿‡ä¸Šé™æ—¶è§¦å‘å†…å­˜ä¸è¶³ã€‚&lt;/li&gt;
&lt;li&gt;æ­¤å¤–ï¼Œè¿˜ä¸ºå†…å­˜åˆ†é…å™¨å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ¥å£ï¼Œå…è®¸åœ¨ä»»ä½•æ—¶å€™æ¸…ç©ºç¼“å­˜å†…å­˜ã€‚&lt;/li&gt;
&lt;li&gt;è¿˜å¢åŠ äº†ä¸€ä¸ªæ–°çš„é€šç”¨å†…å­˜åˆ†é…å™¨&lt;strong&gt;UniversalAllocator&lt;/strong&gt;ï¼Œä»¥åŒ…è£¹GPUå†…å­˜åˆ†é…å™¨å’Œä¸»æœºå†…å­˜åˆ†é…å™¨ï¼ˆå³ä½¿ç”¨cudaHostMallocè¿›è¡Œå†…å­˜åˆ†é…ï¼‰ã€‚
&lt;ul&gt;
&lt;li&gt;å½“å¼ é‡çš„è¯·æ±‚è§¦å‘äº†å†…å­˜åˆ†é…æ—¶ï¼ŒUniversalAllocatorè¯•å›¾ä½¿ç”¨GPUå†…å­˜åˆ†é…å™¨æ¥åˆ†é…å†…å­˜ï¼Œ&lt;/li&gt;
&lt;li&gt;å¦‚æœGPUå†…å­˜å‰©ä½™ä¸è¶³ï¼Œåˆ™å°†CPUå†…å­˜åˆ†é…å™¨ä½œä¸ºå¤‡ä»½ã€‚&lt;/li&gt;
&lt;li&gt;ğŸš¨UniversalAllocatorç»´æŠ¤äº†ä¸€ä¸ªé›†åˆæ•°æ®ç»“æ„ï¼Œè®°å½•äº†ç”±GPUåˆ†é…çš„å†…å­˜åŒºåŸŸçš„æŒ‡é’ˆï¼Œç”¨æ¥å¯¹å†…å­˜æŒ‡é’ˆè¿›è¡Œåˆ†ç±»ï¼Œä»¥ä¾¿äºå›æ”¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå™¨
&lt;ul&gt;
&lt;li&gt;ä¸ºäº†å®ç°åŠ¨æ€è®¡ç®—å•å…ƒçš„æ‰©å±•ï¼Œåœ¨DLæ¡†æ¶ä¸­å¼•å…¥äº†ä¸€ä¸ªå¸¦æœ‰è¿ç®—å™¨å¤„ç†é˜Ÿåˆ—çš„&lt;strong&gt;GpuOpManager&lt;/strong&gt;ï¼Œå®ƒåœ¨ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ä¸­è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;TensorFlowçš„è¿ç®—å™¨è¢«ç›¸åº”åœ°ä¿®æ”¹ï¼Œä»¥æ’å…¥GPU Opåˆ°GpuOpManageré˜Ÿåˆ—ä¸­ï¼Œä»è€Œå°†GPUè¿ç®—å™¨çš„æ‰§è¡Œä¸“é—¨äº¤ç»™å®ƒã€‚&lt;/li&gt;
&lt;li&gt;GpuOpManagerå¯èƒ½ä¼š&lt;strong&gt;æ ¹æ®è®¡ç®—èƒ½åŠ›çš„æœ‰é™ç™¾åˆ†æ¯”&lt;/strong&gt;æ¥å»¶è¿ŸGPUè¿ç®—ç¬¦çš„å®é™…æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ¥å£&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å†…å­˜ä½¿ç”¨æ¨¡å¼çš„ç»Ÿè®¡æ•°æ®å’Œæ‰§è¡Œä¿¡æ¯è¢«æ±‡æ€»åˆ°æœ¬åœ°åè°ƒå™¨ä¸Š
&lt;ul&gt;
&lt;li&gt;DLæ¡†æ¶å’Œæœ¬åœ°åè°ƒå™¨&lt;strong&gt;é€šè¿‡æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œé€šä¿¡&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ä»–ä»¬éƒ½æœ‰ä¸€ä¸ªç›‘æ§çº¿ç¨‹æ¥æ£€æŸ¥æ–‡ä»¶ï¼Œä»¥æ¥æ”¶å·¥ä½œç»Ÿè®¡æ•°æ®æˆ–æ§åˆ¶ä¿¡å·&lt;/li&gt;
&lt;li&gt;ä¸ºäº†æœ€å¤§é™åº¦åœ°å‡å°‘å†…å­˜ç®¡ç†çš„å¼€é”€ï¼Œå†…å­˜çš„åŠ¨æ€ç¼©æ”¾æ˜¯åœ¨mini-batchçš„è¾¹ç•Œï¼ˆsession.run()çš„ç»“æŸï¼‰è§¦å‘çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;cluster-scheduler&#34;&gt;Cluster Scheduler&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨Kubernetesä¸Šå®ç°äº†ä¸€ä¸ªè‡ªå®šä¹‰è°ƒåº¦å™¨ï¼Œä½œä¸ºè¯„ä¼°AntMançš„åŸå‹ã€‚
&lt;ul&gt;
&lt;li&gt;Kubernetesè´Ÿè´£é›†ç¾¤ç®¡ç†å’Œæ‰§è¡ŒDockerå®¹å™¨ä¸­çš„ä½œä¸šã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬çš„&lt;strong&gt;å…¨å±€è°ƒåº¦å™¨ä½¿ç”¨Python APIsæ¥ç›‘æ§&lt;/strong&gt;Kubernetesçš„APIæœåŠ¡å™¨ä¸­çš„äº‹ä»¶ï¼Œä»¥ä¾¿è¿›è¡Œè°ƒåº¦ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°åè°ƒå™¨ä½œä¸ºDaemonSetéƒ¨ç½²&lt;/strong&gt;åœ¨Kubernetesä¸­ã€‚æ¯ä¸ªåè°ƒå™¨ç›‘æ§æ–‡ä»¶ç³»ç»Ÿçš„æŸäº›è·¯å¾„ï¼Œä»¥æ”¶é›†æ¯ä¸ªä½œä¸šçš„æŠ¥å‘Šä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;æ±‡æ€»çš„ä½œä¸šå’Œè®¾å¤‡&lt;strong&gt;ä¿¡æ¯å­˜å‚¨åœ¨ETCDä¸­&lt;/strong&gt;ï¼Œè¿™æ˜¯Kubernetesä¸­å†…ç½®çš„åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ã€‚å› æ­¤ï¼Œå…¨å±€è°ƒåº¦å™¨åœ¨åšè°ƒåº¦å†³ç­–æ—¶ç›´æ¥è¯»å–ETCDä¸­çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;evaluation&#34;&gt;Evaluation&lt;/h2&gt;
&lt;h3 id=&#34;benchmark&#34;&gt;Benchmark&lt;/h3&gt;
&lt;h3 id=&#34;trace-experiment&#34;&gt;Trace Experiment&lt;/h3&gt;
&lt;h3 id=&#34;cluster-experiment&#34;&gt;Cluster Experiment&lt;/h3&gt;
&lt;h2 id=&#34;ralated-work&#34;&gt;Ralated Work&lt;/h2&gt;
&lt;h2 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®ºæ–‡åœ°å€ï¼š&lt;a class=&#34;link&#34; href=&#34;https://www.usenix.org/conference/osdi20/presentation/xiao&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;AntMan: Dynamic Scaling on GPU Clusters for Deep Learning | USENIX&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ä»£ç åœ°å€ï¼šhttps://github.com/alibaba/GPU-scheduler-for-deep-learning&lt;/li&gt;
&lt;li&gt;å‚è€ƒï¼š&lt;a class=&#34;link&#34; href=&#34;http://gaocegege.com/Blog/kubernetes/antman&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;OSDI&#39;20 è®ºæ–‡èµï¼šANTMAN: DYNAMIC SCALING ON GPU CLUSTERS FOR DEEP LEARNING | é«˜ç­– (gaocegege.com)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ã€è®ºæ–‡ç¬”è®°ã€‘GaiaGPUè®ºæ–‡é˜…è¯»ç¬”è®°</title>
        <link>https://tweakzx.github.io/p/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0gaiagpu%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</link>
        <pubDate>Fri, 26 Aug 2022 17:20:32 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0gaiagpu%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</guid>
        <description>&lt;img src="https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220826142857.png" alt="Featured image of post ã€è®ºæ–‡ç¬”è®°ã€‘GaiaGPUè®ºæ–‡é˜…è¯»ç¬”è®°" /&gt;&lt;h2 id=&#34;gaiagpusharing-gpus-in-container-cloudsè®ºæ–‡ç¬”è®°&#34;&gt;ã€ŠGaiaGPUï¼šSharing GPUs in Container Cloudsã€‹è®ºæ–‡ç¬”è®°&lt;/h2&gt;
&lt;h3 id=&#34;abstract&#34;&gt;Abstract&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºäº‘æœåŠ¡çš„æä¾›å•†ï¼Œ å¦‚ä½•åœ¨å®¹å™¨é—´å…±äº«GPUï¼Œ æ˜¯ä¸€ä¸ªæœ‰å¸å¼•åŠ›çš„é—®é¢˜
&lt;ul&gt;
&lt;li&gt;å®¹å™¨çš„è½»é‡ä¸ä¼¸ç¼©æ€§&lt;/li&gt;
&lt;li&gt;GPUå¼ºå¤§çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;åœ¨äº‘ç¯å¢ƒï¼Œå®¹å™¨éœ€è¦ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªGPUæ¥æ»¡è¶³èµ„æºéœ€è¦çš„åŒæ—¶ï¼Œ å®¹å™¨ç‹¬å å¼çš„GPUå¾€å¾€ä½¿ç”¨ç‡å¾ˆä½&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬æå‡ºGaiaGPUï¼Œèƒ½å¤Ÿåœ¨å®¹å™¨é—´å…±äº«æ˜¾å­˜å’Œç®—åŠ›
&lt;ul&gt;
&lt;li&gt;å°†ç‰©ç†GPUåˆ’åˆ†ä¸ºå¤šä¸ªè™šæ‹ŸGPU&lt;/li&gt;
&lt;li&gt;é‡‡ç”¨&lt;strong&gt;å¼¹æ€§èµ„æºåˆ†é…&lt;/strong&gt;å’Œ&lt;strong&gt;åŠ¨æ€èµ„æºåˆ†é…&lt;/strong&gt;æ¥æé«˜èµ„æºåˆ©ç”¨ç‡&lt;/li&gt;
&lt;li&gt;å®éªŒç»“æœæ˜¾ç¤ºï¼Œ æœ‰æ•ˆçš„å®ç°äº†å®¹å™¨é—´èµ„æºçš„åˆ†é…å’Œéš”ç¦»çš„åŒæ—¶ï¼Œå¹³å‡åªå¢åŠ äº†1.015%çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å®¹å™¨åŒ–æ˜¯ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯
&lt;ul&gt;
&lt;li&gt;æ¶‰åŠåˆ°é‡èº«å®šåˆ¶ä¸€ä¸ªæ ‡å‡†æ“ä½œç³»ç»Ÿï¼Œæ–¹ä¾¿å®ƒåœ¨ä¸€ä¸ªç‰©ç†æœºä¸Šè¿è¡Œç”±å¤šä¸ªç”¨æˆ·å¤„ç†çš„ä¸åŒåº”ç”¨ç¨‹åº&lt;/li&gt;
&lt;li&gt;ä¸VMæ¨¡æ‹Ÿåº•å±‚ç¡¬ä»¶ä¸åŒ
&lt;ul&gt;
&lt;li&gt;å®¹å™¨æ¨¡æ‹Ÿçš„æ˜¯æ“ä½œç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;è½»é‡ï¼Œå¯ä¼¸ç¼©ï¼Œæ˜“éƒ¨ç½²&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡æ‰“åŒ…ä¸å‘å¸ƒåº”ç”¨çš„äº‹å®æ ‡å‡†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;äº‘æœåŠ¡æä¾›å•†æ•´åˆå®¹å™¨ç¼–æ’æ¡†æ¶ï¼ˆå¦‚k8sï¼‰åˆ°åŸºç¡€æ¶æ„ä¸­æ¥æä¾›å®¹å™¨äº‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;GPU å›¾åƒå¤„ç†å•å…ƒ
&lt;ul&gt;
&lt;li&gt;æœ‰å¾ˆå¼ºçš„å¹¶è¡Œå¤„ç†èƒ½åŠ›
&lt;ul&gt;
&lt;li&gt;å› ä¸ºä¸€ä¸ªèŠ¯ç‰‡ä¸Šé›†æˆäº†æ•°ä»¥åƒè®¡çš„è®¡ç®—æ ¸&lt;/li&gt;
&lt;li&gt;GPUè¢«å¹¿æ³›ç”¨äºè®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œä»¥åŠ å¿«è®¡ç®—&lt;/li&gt;
&lt;li&gt;éšç€æŠ€æœ¯çš„å‘å±•è¶‹åŠ¿ï¼Œç°ä»£GPUå†…å°†é›†æˆå…¥è¶Šæ¥è¶Šå¤šçš„è®¡ç®—èµ„æº&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;CUDAæ˜¯å¤šåŠŸèƒ½GPUæœ€æµè¡Œçš„å¹³å°ï¼Œæä¾›äº†APIæ–¹ä¾¿GPUçš„ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;å“è¶Šçš„æ€§èƒ½å¸å¼•äº†å¾ˆå¤šäº‘æä¾›å•†å°†GPUå¼•å…¥äº‘ç¯å¢ƒ
&lt;ul&gt;
&lt;li&gt;åœ¨äº‘ç¯å¢ƒä¸­ï¼Œéƒ¨ç½²åœ¨å®¹å™¨ä¸­çš„ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯èƒ½éœ€è¦ä¸€ä¸ªæˆ–å¤šä¸ªGPUæ‰èƒ½æ‰§è¡Œï¼Œ&lt;/li&gt;
&lt;li&gt;è€Œå¦ä¸€æ–¹é¢ï¼Œåº”ç”¨ç¨‹åºçš„ä¸“ç”¨GPUèµ„æºå¯¼è‡´èµ„æºä¸è¶³ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œå¦‚ä½•åœ¨ä¸åŒçš„å®¹å™¨ä¸­å…±äº«GPUå¯¹å¤§å¤šæ•°äº‘æä¾›å•†éƒ½éå¸¸æ„Ÿå…´è¶£&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;GPUè™šæ‹ŸåŒ–æŠ€æœ¯æ˜¯åœ¨éš”ç¦»çš„è™šæ‹Ÿç¯å¢ƒï¼ˆä¾‹å¦‚VMï¼Œ å®¹å™¨ï¼‰ä¹‹é—´å…±äº«GPUçš„æŠ€æœ¯
&lt;ul&gt;
&lt;li&gt;å¤šæ•°çš„GPUè™šæ‹ŸåŒ–æŠ€æœ¯åº”ç”¨äºVMï¼Œ å®¹å™¨é—´çš„è™šæ‹ŸåŒ–æŠ€æœ¯è¿˜åœ¨èµ·å§‹é˜¶æ®µ&lt;/li&gt;
&lt;li&gt;ç°é˜¶æ®µçš„åŸºäºå®¹å™¨çš„GPUè™šæ‹ŸåŒ–æŠ€æœ¯æœ‰ä»¥ä¸‹&lt;strong&gt;å±€é™æ€§&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦ç‰¹å®šçš„ç¡¬ä»¶è®¾å¤‡ï¼ˆNVIDIA GRIDï¼‰&lt;/li&gt;
&lt;li&gt;å°†ä¸€æ•´ä¸ªGPUåˆ†é…ç»™å•ä¸ªå®¹å™¨ï¼Œ ä¸èƒ½å…±äº« ï¼ˆNVIDIA Dockerï¼‰&lt;/li&gt;
&lt;li&gt;å®¹å™¨é—´åªèƒ½å…±äº«GPUæ˜¾å­˜ ï¼ˆConvGPUï¼‰&lt;/li&gt;
&lt;li&gt;åªæ”¯æŒå•ä¸ªGPU ï¼ˆConvGPUï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬æå‡ºGaiaGPUï¼Œèƒ½å¤Ÿåœ¨å®¹å™¨é—´é€æ˜åœ°å…±äº«æ˜¾å­˜å’Œç®—åŠ›
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·ä¸ç”¨ä¿®æ”¹å®¹å™¨é•œåƒæ¥å…±äº«åº•å±‚GPU
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬ä½¿ç”¨k8sçš„device plugin æ¡†æ¶å°†ç‰©ç†GPUåˆ’åˆ†ä¸ºå¤šä¸ªè™šæ‹ŸGPU&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªé•œåƒå¯ä»¥æŒ‰éœ€åˆ†é…ä¸€ä¸ªæˆ–è€…å¤šä¸ªvGPU&lt;/li&gt;
&lt;li&gt;æä¾›äº†ä¸¤è€…æ–¹å¼åœ¨è¿è¡Œæ—¶æ›´æ”¹é•œåƒèµ„æº
&lt;ul&gt;
&lt;li&gt;å¼¹æ€§èµ„æºåˆ†é…ï¼šæš‚æ—¶æ”¹å˜èµ„æº&lt;/li&gt;
&lt;li&gt;åŠ¨æ€èµ„æºåˆ†é…ï¼šæ°¸ä¹…æ”¹å˜èµ„æº&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;vGPUåŒ…æ‹¬GPUæ˜¾å­˜å’Œè®¡ç®—èµ„æº
&lt;ul&gt;
&lt;li&gt;å…±äº«æ˜¾å­˜
&lt;ul&gt;
&lt;li&gt;å®¹å™¨åŒ…å«GPUæ˜¾å­˜çš„ä¸€å°éƒ¨åˆ†&lt;/li&gt;
&lt;li&gt;vGPUåˆ†é…çš„æ˜¯GPUçš„ç‰©ç†å†…å­˜&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å…±äº«è®¡ç®—èµ„æº
&lt;ul&gt;
&lt;li&gt;å…±äº«è®¡ç®—èµ„æºæ„å‘³ç€æ¯ä¸ªå®¹å™¨éƒ½æ‹¥æœ‰GPUçº¿ç¨‹çš„ä¸€éƒ¨åˆ†ä»¥å¹¶è¡Œæ‰§è¡Œè®¡ç®—ã€‚&lt;/li&gt;
&lt;li&gt;VGPUçš„è®¡ç®—èµ„æºç”±GPUçš„åˆ©ç”¨ç‡è¡¡é‡ï¼ˆé‡‡æ ·æ—¶æ®µå†…ï¼Œ å®¹å™¨ä½¿ç”¨GPUçš„æ—¶é—´æ¯”ä¾‹ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ€»ç»“ï¼šæœ¬æ–‡åšäº†å¦‚ä¸‹è´¡çŒ®
&lt;ul&gt;
&lt;li&gt;æå‡ºäº†GaiaGPUï¼šä¸€ç§åœ¨å®¹å™¨é—´é€æ˜å…±äº«æ˜¾å­˜ä¸ç®—åŠ›çš„æ–¹æ³•&lt;/li&gt;
&lt;li&gt;é‡‡ç”¨å¼¹æ€§åˆ†é…å’ŒåŠ¨æ€åˆ†é…çš„æ–¹å¼æé«˜äº†èµ„æºçš„åˆ©ç”¨ç‡&lt;/li&gt;
&lt;li&gt;è¿›è¡Œäº†å››ä¸ªå®éªŒæ¥éªŒè¯GaiaGPUçš„æ€§èƒ½ã€‚ç»“æœï¼šå®ç°äº†å®¹å™¨é—´èµ„æºçš„åˆ†é…å’Œéš”ç¦»çš„åŒæ—¶ï¼Œå¹³å‡åªå¢åŠ äº†1.015%çš„å¼€é”€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;related-work&#34;&gt;Related Work&lt;/h3&gt;
&lt;h4 id=&#34;gpuè™šæ‹ŸåŒ–&#34;&gt;GPUè™šæ‹ŸåŒ–&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¢«åº”ç”¨äºåœ¨å¤šä¸ªè™šæ‹Ÿç¯å¢ƒä¹‹é—´åˆ†äº«GPUï¼Œ æå¤§åœ°æé«˜äº†åº”ç”¨æ€§èƒ½&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç°å­˜çš„å¤šæ•°GPUè™šæ‹ŸåŒ–æŠ€æœ¯åŸºäºVMï¼Œä¸»è¦æœ‰ä¸‰ç§è™šæ‹ŸåŒ–GPU&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;API remoting
&lt;ul&gt;
&lt;li&gt;vCUDA å’Œ rCUDA&lt;/li&gt;
&lt;li&gt;åˆ›å»ºGPUçš„å°è£…åº“-&amp;gt;åŠ«æŒGPUè°ƒç”¨-&amp;gt;å°†é‡å®šå‘åˆ°host&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.geeksforgeeks.org/difference-between-full-virtualization-and-paravirtualization/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;para and full  virtualization&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;GPUvm&lt;/li&gt;
&lt;li&gt;GPUvmå°†GPUæ˜¾å­˜å’ŒMMIOï¼ˆå­˜å‚¨å™¨æ˜ å°„è¾“å…¥è¾“å‡ºï¼‰åˆ†æˆå‡ ç‰‡ï¼Œå°†ç‰‡åˆ†ç»™VM&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¡¬ä»¶æ”¯æŒçš„è™šæ‹ŸåŒ–
&lt;ul&gt;
&lt;li&gt;NVIDIA GRID&lt;/li&gt;
&lt;li&gt;ç¡¬ä»¶è™šæ‹ŸåŒ–ï¼Œåˆ›å»ºè™šæ‹ŸGPUï¼ŒæŒ‚åœ¨å®¹å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸VMç›¸æ¯”ï¼Œ å®¹å™¨ä½¿ç”¨ä¸»æœºçš„æ“ä½œç³»ç»Ÿ-&amp;gt;å®¹å™¨å¯ä»¥ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„GPUé©±åŠ¨-&amp;gt;æ€§èƒ½æ¥è¿‘åŸç”Ÿç¯å¢ƒ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NVIDIA GRID
&lt;ul&gt;
&lt;li&gt;éœ€è¦ç‰¹å®šçš„ç¡¬ä»¶å’Œä¸è™šæ‹ŸGPUè¦æœ‰ç›¸åŒçš„èµ„æºé…ç½®&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªå®¹å™¨åªèƒ½åˆ†é…ä¸€ä¸ªè™šæ‹ŸGPU&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;NVIDIA Docker
&lt;ul&gt;
&lt;li&gt;ä½¿å¾—Dockeré•œåƒå¯ä»¥ä½¿ç”¨GPU&lt;/li&gt;
&lt;li&gt;å…è®¸GPUé©±åŠ¨å¯¹CUDAé•œåƒä¸æ„ŸçŸ¥&lt;/li&gt;
&lt;li&gt;æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œçš„å°è£…-&amp;gt;å½“å®¹å™¨å¯åŠ¨æ—¶å¯ä»¥æŒ‚è½½driverçš„ç”¨æˆ·æ€ç»„ä»¶å’ŒGPUè®¾å¤‡æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;ä¸èƒ½å…±äº«ï¼šåªèƒ½æŠŠä¸€æ•´ä¸ªGPUåˆ†é…ç»™ä¸€ä¸ªå®¹å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ConvGPU
&lt;ul&gt;
&lt;li&gt;å®¹å™¨é—´å…±äº«GPUæ˜¾å­˜&lt;/li&gt;
&lt;li&gt;å®ƒæ‹¦æˆªäº†CUDAåº“æ¥ç®¡ç†æ¯ä¸ªé•œåƒæ˜¾å­˜çš„åˆ†é…å’Œå›æ”¶&lt;/li&gt;
&lt;li&gt;ä»…æ”¯æŒåˆ†äº«æ˜¾å­˜&lt;/li&gt;
&lt;li&gt;è€Œä¸”åªèƒ½è™šæ‹ŸåŒ–å•ä¸ªç‰©ç†GPU&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GaiaGPU&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;è½¯ä»¶å±‚è™šæ‹ŸåŒ–ï¼Œæ²¡æœ‰ç¡¬ä»¶é™åˆ¶&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªè™šæ‹ŸGPUçš„èµ„æºå¯ä»¥æ˜¯ä¸ä¸€æ ·çš„&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªå®¹å™¨å¯ä»¥åˆ†é…å¤šä¸ªè™šæ‹ŸGPU&lt;/li&gt;
&lt;li&gt;å¯ä»¥åŒæ—¶å…±äº«æ˜¾å­˜å’Œè®¡ç®—èµ„æº&lt;/li&gt;
&lt;li&gt;å¯ä»¥è™šæ‹ŸåŒ–å¤šä¸ªç‰©ç†GPU&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;device-plugin&#34;&gt;Device Plugin&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;è‡´åŠ›äºå¾è˜å„ç§è®¡ç®—èµ„æºï¼ˆGPUsï¼Œ NICsï¼Œ FPGAsï¼‰ä¾›é›†ç¾¤ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;æ— éœ€æ”¹å˜k8sçš„æ ¸å¿ƒä»£ç &lt;/li&gt;
&lt;li&gt;å·¥ä½œæµ
&lt;ul&gt;
&lt;li&gt;èµ„æºå‘ç°
&lt;ul&gt;
&lt;li&gt;å®ç°Device Plugin&lt;/li&gt;
&lt;li&gt;é€šè¿‡gRPCå°†deviceæ³¨å†Œåˆ°Kubelet&lt;/li&gt;
&lt;li&gt;æˆåŠŸæ³¨å†Œåï¼Œdevice pluginå‘é€è®¾å¤‡åˆ—è¡¨&lt;/li&gt;
&lt;li&gt;Kubeletè´Ÿè´£å°†è¿™ä¸ªæ‰©å±•èµ„æºæ¨å¹¿ç»™Master&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;èµ„æºåˆ†é…
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·åœ¨å®¹å™¨çš„specificationä¸­è¯·æ±‚è®¾å¤‡&lt;/li&gt;
&lt;li&gt;masterçš„scheduleré€‰æ‹©ä¸€ä¸ªk8sèŠ‚ç‚¹çš„device pluginå‘é€deviceè¯·æ±‚&lt;/li&gt;
&lt;li&gt;device pluginåˆ†é…å¯¹åº”çš„è®¾å¤‡ç»™å®¹å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828115537.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828115537.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;img&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;img&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Vaucher&lt;/strong&gt;é€šè¿‡åˆ©ç”¨è®¾å¤‡æ’ä»¶æ¡†æ¶æ¥å®ç°SGXï¼ˆSoftware Guard Extensionsï¼‰è®¾å¤‡è™šæ‹ŸåŒ–ï¼Œ
&lt;ul&gt;
&lt;li&gt;è¯¥æ’ä»¶æ¡†æ¶ä¿®æ”¹äº†Kubeletå’ŒSGXä»£ç ä»¥é™åˆ¶è™šæ‹ŸSGXè®¾å¤‡çš„è®¾å¤‡å†…å­˜çš„ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;ä»…å¤„ç†å†…å­˜èµ„æº&lt;/li&gt;
&lt;li&gt;å¯¹å†…å­˜æ–½åŠ ä¸¥é‡é™åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GaiaGPU&lt;/strong&gt;ä¹Ÿé‡‡ç”¨äº†device pluginæ¡†æ¶ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«èµ„æº
&lt;ul&gt;
&lt;li&gt;å¯¹èµ„æºé‡‡ç”¨å¼¹æ€§é™åˆ¶è€Œä¸æ˜¯ç¡¬é™åˆ¶-&amp;gt;æ¥æ”¹å–„åˆ©ç”¨ç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;design-and-implementation&#34;&gt;Design And Implementation&lt;/h3&gt;
&lt;h4 id=&#34;è®¾è®¡ä¸å®ç°&#34;&gt;è®¾è®¡ä¸å®ç°&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç›®æ ‡ï¼šåœ¨å®¹å™¨é—´å…±äº«æ˜¾å­˜ä¸è®¡ç®—èµ„æºï¼Œä½¿ç”¨æœ€å°çš„æˆæœ¬è·å¾—æœ€å¤§çš„æå‡&lt;/li&gt;
&lt;li&gt;æŒ‘æˆ˜ï¼š
&lt;ul&gt;
&lt;li&gt;é€æ˜æ€§ï¼š
&lt;ul&gt;
&lt;li&gt;GaiaGPUä¸åº”è¯¥ä¿®æ”¹k8sçš„ä»£ç æˆ–è€…å®¹å™¨é•œåƒ&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å…±äº«GPUå°±å¦‚åŒä½¿ç”¨ç‰©ç†GPUä¸€æ ·&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä½å¼€é”€
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å…±äº«GPUçš„æ€§èƒ½å°½å¯èƒ½æ¥è¿‘ä½¿ç”¨ç‰©ç†GPU&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;éš”ç¦»
&lt;ul&gt;
&lt;li&gt;GaiaGPUåº”è¯¥ç®¡ç†GPUèµ„æºåœ¨æ¯ä¸ªå®¹å™¨çš„åˆ†é…ä¸å›æ”¶&lt;/li&gt;
&lt;li&gt;å…±äº«GPUæ—¶å®¹å™¨ä¹‹é—´å®Œå…¨éš”ç¦»&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç»“æ„ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828143547.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828143547.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220828143547571&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220828143547571&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;ä¸¤å±‚èµ„æºç®¡ç†
&lt;ul&gt;
&lt;li&gt;hostå±‚ï¼š
&lt;ul&gt;
&lt;li&gt;GPU Managerè´Ÿè´£åˆ›å»ºvGPUs&lt;/li&gt;
&lt;li&gt;GPU Scheduler è´Ÿè´£åˆ†é…ç‰©ç†GPUèµ„æºåˆ°vGPUs&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®¹å™¨å±‚
&lt;ul&gt;
&lt;li&gt;vGPU Libraryè´Ÿè´£ç®¡ç†å…·ä½“å®¹å™¨çš„GPUèµ„æº&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç»„ä»¶
&lt;ul&gt;
&lt;li&gt;GPU Manager
&lt;ul&gt;
&lt;li&gt;device pluginï¼šè¿è¡Œåœ¨hostä¸Šè´Ÿè´£åˆ›å»ºvGPUsï¼Œä½¿ç”¨gRPCä¸Kubeleté€šä¿¡&lt;/li&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828171002.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828171002.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220828171002587&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220828171002587&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;Registerï¼šGPU Managerå°†è‡ªèº«æ³¨å†Œåˆ°Kubeletä»¥é€šçŸ¥å…¶å­˜åœ¨&lt;/li&gt;
&lt;li&gt;ListAndWatchï¼šæˆåŠŸæ³¨å†Œåï¼ŒKubeletè°ƒç”¨ListAndWatchè·å–è®¾å¤‡ä¿¡æ¯List
&lt;ul&gt;
&lt;li&gt;æ˜¾å­˜ï¼š256M ä½œä¸ºä¸€ä¸ªå•å…ƒï¼Œ æ¯ä¸ªå•å…ƒéƒ½è¢«ç§°ä½œä¸€ä¸ªvmemoryè®¾å¤‡&lt;/li&gt;
&lt;li&gt;è®¡ç®—èµ„æºï¼šä¸€ä¸ªGPUè¢«åˆ†ä½œ100ä»½vprocessorè®¾å¤‡ï¼Œ æ¯ä¸ªvprocessoréƒ½æœ‰ç™¾åˆ†ä¹‹ä¸€çš„åˆ©ç”¨ç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Allocateï¼š
&lt;ul&gt;
&lt;li&gt;æ˜ å°„è¿‡ç¨‹
&lt;ul&gt;
&lt;li&gt;Kubeletå‘é€éšæœºé€‰æ‹©çš„è®¾å¤‡IDsåˆ°GPU Manager&lt;/li&gt;
&lt;li&gt;GPU Manageræ ¹æ®å¾—åˆ°çš„è®¾å¤‡IDsè®¡ç®—æ‰€éœ€çš„ç‰©ç†GPUèµ„æº&lt;/li&gt;
&lt;li&gt;GPU Manage å‘é€ä¸€ä¸ªè¯·æ±‚åˆ° GPU Scheduler&lt;/li&gt;
&lt;li&gt;GPU Scheduler è¿”å›è¦åˆ†é…ç»™å®¹å™¨çš„ç‰©ç†GPU&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ˜ å°„å®Œæˆåï¼ŒGPU managerè¿”å›ä¸€ä¸ªallocateResponseï¼Œ åŒ…å«è·å–åˆ†é…åˆ°çš„è®¾å¤‡çš„Configurations
&lt;ul&gt;
&lt;li&gt;å®¹å™¨çš„ç¯å¢ƒå˜é‡&lt;/li&gt;
&lt;li&gt;æŒ‚è½½åˆ°å®¹å™¨çš„ç›®å½•å’Œæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;åˆ†é…çš„è®¾å¤‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Kubeletå°†è¿™äº›é…ç½®å‘é€åˆ°å®¹å™¨è¿è¡Œæ—¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;GPU Scheduler
&lt;ul&gt;
&lt;li&gt;è´Ÿè´£å¤„ç†GPU Managerå‘æ¥çš„è°ƒåº¦è¯·æ±‚&lt;/li&gt;
&lt;li&gt;åŸºäºæ‹“æ‰‘æ ‘åˆ†é…GPUï¼Œæ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯hostï¼Œ æ ‘çš„å¶èŠ‚ç‚¹æ˜¯ç‰©ç†GPU&lt;/li&gt;
&lt;li&gt;å½“æ‰€éœ€è¦çš„èµ„æºå°‘äºä¸€ä¸ªç‰©ç†GPUï¼Œåˆ†é…ç­–ç•¥ä¼šæœ€å¤§ç¨‹åº¦å‡å°‘èµ„æºç¢ç‰‡&lt;/li&gt;
&lt;li&gt;å½“æ‰€éœ€çš„èµ„æºç­‰äºä¸€ä¸ªç‰©ç†GPUæ—¶ï¼Œé‡‡ç”¨äº†æœ€å°åŒ–å•å¶èŠ‚ç‚¹ï¼ˆå³æ²¡æœ‰å…„å¼Ÿå§å¦¹èŠ‚ç‚¹çš„å¶å­èŠ‚ç‚¹ï¼‰çš„åˆ†é…ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;å½“æ‰€éœ€çš„èµ„æºä¸æ­¢ä¸€ä¸ªç‰©ç†GPUæ—¶ï¼Œåˆ†é…ç­–ç•¥çš„ç›®æ ‡æ˜¯æœ€å¤§ç¨‹åº¦åœ°é™ä½GPUçš„é€šä¿¡æˆæœ¬ã€‚é€šä¿¡æˆæœ¬å–å†³äºä¸¤ä¸ªGPUçš„è¿æ¥æ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;vGPU Manager
&lt;ul&gt;
&lt;li&gt;è¿è¡Œåœ¨hostï¼Œä¼ é€’å®¹å™¨é…ç½®å¹¶ä¸”ç›‘ç®¡åˆ†é…äº†vGPUsçš„å®¹å™¨&lt;/li&gt;
&lt;li&gt;å½“å®¹å™¨ç”³è¯·GPUèµ„æºæ—¶ï¼ŒGPU Managerå°†é…ç½®å‘é€ç»™vGPU Managerï¼Œä¾‹å¦‚
&lt;ul&gt;
&lt;li&gt;éœ€è¦çš„GPUèµ„æº&lt;/li&gt;
&lt;li&gt;è¯¥å®¹å™¨çš„name&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ¥æ”¶åˆ°é…ç½®åï¼Œåœ¨ä¸»æœºä¸Šä¸ºå®¹å™¨å‘½åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„è·¯å¾„
&lt;ul&gt;
&lt;li&gt;è·¯å¾„åä¸ºå®¹å™¨å&lt;/li&gt;
&lt;li&gt;è¿™ä¸ªè·¯å¾„åŒ…å«åœ¨allocateResponseé‡Œ&lt;/li&gt;
&lt;li&gt;å®¹å™¨çš„é…ç½®ä¹ŸåŒ…å«åœ¨è¿™ä¸ªè·¯å¾„é‡Œï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡Kubeletä¼ é€’åˆ°å®¹å™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;vGPU Manager å’Œ vGPU Libraryæ˜¯ æœåŠ¡å™¨-å®¢æˆ·ç«¯æ¨¡å¼
&lt;ul&gt;
&lt;li&gt;vGPU Manager ç»´æŠ¤ä¸€ä¸ªæ´»ç€çš„ä¸”åˆ†é…äº†GPUèµ„æºçš„å®¹å™¨çš„list&lt;/li&gt;
&lt;li&gt;ä¼šå®šæœŸæ£€æŸ¥è¿™äº›å®¹å™¨æ˜¯å¦å­˜æ´»&lt;/li&gt;
&lt;li&gt;å¦‚æœå®¹å™¨æ­»äº†ï¼Œä»listä¸­ç§»é™¤è¿™ä¸ªå®¹å™¨çš„ä¿¡æ¯ï¼Œå¹¶ä¸”åˆ é™¤ç›®å½•&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;vGPU Library
&lt;ul&gt;
&lt;li&gt;è¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œç®¡ç†å®¹å™¨çš„GPUèµ„æº&lt;/li&gt;
&lt;li&gt;åœ¨å®¹å™¨ç¬¬ä¸€æ¬¡æ‰§è¡ŒGPUç¨‹åºæ—¶è¢«åŠ è½½&lt;/li&gt;
&lt;li&gt;å¯åŠ¨åvGPU Libraray å‘ vGPU Manageræ³¨å†Œè‡ªèº«&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨&lt;strong&gt;LD_LIBRARY_PATH&lt;/strong&gt;æœºåˆ¶æ‹¦æˆªCUDAåº“ä¸­å†…å­˜ä¸è®¡ç®—ç›¸å…³çš„API
&lt;ul&gt;
&lt;li&gt;LD_LIBRARY_PATHæ˜¯ä¸€ä¸ªlinuxç³»ç»Ÿçš„ç¯å¢ƒå˜é‡&lt;/li&gt;
&lt;li&gt;å¯ä»¥å½±å“ç¨‹åºçš„runtime link&lt;/li&gt;
&lt;li&gt;å…è®¸æŸäº›è·¯å¾„å…ˆäºstandard set of directoriesï¼ˆï¼Ÿæ ‡å‡†åº“ç›®å½•ï¼Ÿï¼‰åŠ è½½&lt;/li&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828222019.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828222019.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220828222012346&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220828222012346&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å½“å®¹å™¨éœ€è¦çš„GPUèµ„æºè¶…å‡ºå®ƒç”³è¯·çš„èµ„æºæ—¶ï¼Œä¸ºäº†é¿å…è€—å°½æ•´ä¸ªGPUï¼Œæœ‰ä¸¤ç§èµ„æºé™åˆ¶ç­–ç•¥
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬é™åˆ¶ï¼ˆhard limiitï¼‰&lt;/strong&gt;ï¼šå¦‚æœå®¹å™¨èµ„æºæ¶ˆè€—é‡è¶…è¿‡é…é¢ï¼Œå°±ä¸å†ç»™è¯¥å®¹å™¨åˆ†é…èµ„æº&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼¹æ€§é™åˆ¶ï¼ˆelastic limitï¼‰&lt;/strong&gt;ï¼šå¦‚æœå®¹å™¨èµ„æºæ¶ˆè€—é‡è¶…è¿‡é…é¢ï¼Œä½†æ˜¯ç³»ç»Ÿä¸­è¿˜æœ‰ç©ºé—²èµ„æºï¼Œé‚£ä¹ˆè¯¥å®¹å™¨ä»ç„¶èƒ½å¤Ÿå¾—åˆ°æ›´å¤šçš„èµ„æº&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å†…å­˜èµ„æºçš„é™åˆ¶é‡‡ç”¨ç¡¬é™åˆ¶ç­–ç•¥ï¼Œ å› ä¸º
&lt;ul&gt;
&lt;li&gt;å†…å­˜èµ„æºå¤§å°èƒ½å†³å®šä¸€ä¸ªç¨‹åºèƒ½å¦è¿è¡Œï¼Œä½†å¯¹è¿è¡Œçš„æ•ˆç‡å½±å“è¾ƒå°&lt;/li&gt;
&lt;li&gt;GPUæ˜¯è®¡ç®—è®¾å¤‡ï¼Œå®ƒä»¬é‡‡ç”¨ä¸€æ¬¡æ€§èµ„æºåˆ†é…ç­–ç•¥ã€‚ä»…åœ¨è·å–æ‰€æœ‰å†…å­˜èµ„æºåæ‰å¯ä»¥æ‰§è¡Œåº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”åœ¨å®Œæˆå†…å­˜ä¹‹å‰ä¸ä¼šé‡Šæ”¾ã€‚å¦‚æœä½¿ç”¨å¼¹æ€§å†…å­˜åˆ†é…ï¼Œåˆ™å…·æœ‰è¾ƒå¤§å†…å­˜éœ€æ±‚çš„åº”ç”¨ç¨‹åºå°†é¥¿æ­»&lt;/li&gt;
&lt;li&gt;æ’¤å›è¿‡åº¦åˆ†é…çš„å†…å­˜èµ„æºçš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡æŠ›å‡ºout-of-memory exceptionæ¥æ€æ­»è¯¥è¿‡ç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è®¡ç®—èµ„æºé‡‡ç”¨å¼¹æ€§é™åˆ¶ç­–ç•¥ï¼Œå› ä¸º
&lt;ul&gt;
&lt;li&gt;è®¡ç®—èµ„æºå¯¹ç¨‹åºè¿è¡Œçš„å½±å“å¾ˆå¤§&lt;/li&gt;
&lt;li&gt;è®¡ç®—èµ„æºï¼ˆGPU çº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œä¹‹åä¼šç«‹åˆ»é‡Šæ”¾æ‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ€»ç»“ï¼š
&lt;ul&gt;
&lt;li&gt;Step 1ï¼šGPU Managerå‘Kubeletæ³¨å†Œè‡ªèº«ï¼Œå¹¶æŠ¥å‘ŠvGPUçš„ä¿¡æ¯ï¼ˆListAndWatchï¼‰&lt;/li&gt;
&lt;li&gt;Step 2ï¼šKubeletæ¥æ”¶åˆ°æ¥è‡ªMasterçš„åˆ›å»ºä¸€ä¸ªGPUå®¹å™¨çš„è¯·æ±‚&lt;/li&gt;
&lt;li&gt;Step 3ï¼šKubeletå‘é€ä¸€ä¸ªallocateRequeståˆ°GPU Manager&lt;/li&gt;
&lt;li&gt;Step 4ï¼šGPU Managerå‘é€ä¸€ä¸ªvGPUè°ƒåº¦è¯·æ±‚åˆ°GPU Schedulerï¼ŒGPU Scheduleræ ¹æ®è°ƒåº¦ç­–ç•¥é€‰æ‹©å®é™…æä¾›èµ„æºçš„ç‰©ç†GPUã€‚å¦‚æœè°ƒåº¦æˆåŠŸè¿”å›ä¸€ä¸ªåŒ…å«è¯¥ç‰©ç†GPUçš„ä¿¡æ¯çš„reponse&lt;/li&gt;
&lt;li&gt;Step 5ï¼šGPU Managerå°†å®¹å™¨é…ç½®ä¿¡æ¯å‘é€åˆ°vGPU Manager&lt;/li&gt;
&lt;li&gt;Step 6ï¼šGPU Managerå°†å®¹å™¨ç¯å¢ƒå˜é‡ï¼ŒæŒ‚è½½ä¿¡æ¯å’Œè®¾å¤‡ä¿¡æ¯é€šè¿‡allocateResponseè¿”å›ç»™Kubelet&lt;/li&gt;
&lt;li&gt;Step 7ï¼šKubeletæ ¹æ®allocateResponseåˆ›å»ºå¹¶ä¸”åˆå§‹åŒ–ä¸€ä¸ªå®¹å™¨&lt;/li&gt;
&lt;li&gt;Step 8ï¼švGPU Libraryå‘vGPU Manageræ³¨å†Œè‡ªèº«å¹¶ä¸”ç®¡ç†å…¶æ‰€åœ¨å®¹å™¨çš„GPUèµ„æº&lt;/li&gt;
&lt;li&gt;Step 9ï¼švGPU ManageræŒç»­ç›‘æ§GPUå®¹å™¨çŠ¶æ€&lt;/li&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828143547.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828143547.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220828143547571&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220828143547571&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ä¼˜åŒ–&#34;&gt;ä¼˜åŒ–&lt;/h4&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å®¹å™¨çš„èµ„æºä¸ä»…ä¼šå½±å“åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œè€Œä¸”è¿˜ä¼šç¡®å®šåº”ç”¨ç¨‹åºçš„çŠ¶æ€&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·åœ¨åˆ›å»ºå®¹å™¨æ—¶æ— æ³•å‡†ç¡®ä¼°ç®—æ‰€éœ€çš„èµ„æº&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œæˆ‘ä»¬æä¾›ä¸¤ç§æ–¹æ³•æ¥æ›´æ”¹è¿è¡Œæ—¶å®¹å™¨çš„èµ„æºã€‚å¼¹æ€§èµ„æºåˆ†é…ä¼šæš‚æ—¶ä¿®æ”¹å®¹å™¨çš„è®¡ç®—èµ„æºé™åˆ¶ï¼Œè€ŒåŠ¨æ€èµ„æºåˆ†é…æ°¸ä¹…æ”¹å˜äº†å®¹å™¨çš„èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¼¹æ€§åˆ†é…ç­–ç•¥&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç›®çš„æ˜¯ä½¿ç”¨é—²ç½®çš„è®¡ç®—èµ„æºä»¥æé«˜èµ„æºåˆ©ç”¨ç‡&lt;/li&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828224059.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828224059.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220828224059056&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220828224059056&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;nanosleep()æ˜¯Linuxå†…æ ¸å‡½æ•°ï¼Œä¼šæŒ‚èµ·å½“å‰çº¿ç¨‹ç­‰å¾…ä¸€æ®µæ—¶é—´æˆ–è€…ç›´åˆ°æ¥æ”¶åˆ°è°ƒç”¨å½“å‰çº¿ç¨‹çš„ä¿¡å·ï¼ˆLine 2ï¼‰&lt;/li&gt;
&lt;li&gt;ä¸ºäº†é˜²æ­¢è¿‡è½½ï¼Œ $GU_{max}$ é»˜è®¤çš„æœ€å¤§å€¼æ˜¯90% ï¼ˆLine 3ï¼‰&lt;/li&gt;
&lt;li&gt;å¦‚æœç‰©ç†GPUè®¡ç®—å¡ä»ç„¶æœ‰ç©ºé—²èµ„æºï¼Œä¹Ÿå°±æ˜¯è¯´&lt;em&gt;GU free &amp;gt; 0&lt;/em&gt;ï¼Œå³ä½¿å®¹å™¨çš„èµ„æºè¯·æ±‚å·²ç»è¶…å‡ºå…¶é…é¢ï¼ŒvGPU Libraryä¹Ÿä¼šç»§ç»­ç»™å®¹å™¨åˆ†é…è®¡ç®—èµ„æºï¼ˆLine 4-5ï¼‰ã€‚&lt;strong&gt;å¦‚æœç³»ç»Ÿæ²¡æœ‰å‰©ä½™çš„ç©ºé—²èµ„æºï¼ˆ*GU free &amp;lt;= 0*ï¼‰å¹¶ä¸”å®¹å™¨çš„æ¶ˆè€—çš„èµ„æºå¤§äºå…¶é…é¢ï¼ŒvGPU Libraryä¼šé€æ¸æ”¶å›è¶…é¢ï¼ˆover-allocatedï¼‰èµ„æº&lt;/strong&gt;ï¼ˆLine 6-7ï¼‰&lt;/li&gt;
&lt;li&gt;è¶…é¢èµ„æºçš„å›æ”¶é‡‡ç”¨éæŠ¢å å¼ç­–ç•¥ï¼ˆnon-preemptive strategyï¼‰ï¼Œå°±æ˜¯è¯´ä¼šç­‰åˆ°å®¹å™¨ä¸­å ç”¨çº¿ç¨‹çš„æ ¸å‡½æ•°æ‰§è¡Œå®Œåå†å›æ”¶çº¿ç¨‹èµ„æºã€‚&lt;em&gt;&lt;strong&gt;CU cores*å¯ä»¥è¢«ç†è§£ä¸ºä¸€ç§tokenï¼Œå®¹å™¨æ‰§è¡Œæ ¸å‡½æ•°æ—¶éœ€è¦æ¶ˆè€—è¯¥tokenï¼Œå½“æ ¸å‡½æ•°æ‰§è¡Œå®Œæˆé‡Šæ”¾çº¿ç¨‹èµ„æºæ—¶å®¹å™¨åˆå›é‡æ–°æ‹¥æœ‰è¯¥token&lt;/strong&gt;ã€‚&lt;em&gt;CU cores&lt;/em&gt;çš„åˆå§‹å€¼ç­‰äºå®¹å™¨çš„è®¡ç®—èµ„æºé…é¢ï¼Œ&lt;em&gt;CU cores&lt;/em&gt;ä¸ºé›¶æ—¶ï¼ˆç³»ç»Ÿæ²¡æœ‰ç©ºé—²çš„èµ„æºï¼Œå¹¶ä¸”è¯¥å®¹å™¨çš„è®¡ç®—èµ„æºé…é¢éƒ½æ­£åœ¨è¢«ç”¨äºæ‰§è¡Œæ ¸å‡½æ•°ï¼‰ï¼ŒvGPU Libraryä¸ä¼šå†ç»™å®¹å™¨åˆ†é…ä»»ä½•è®¡ç®—èµ„æºï¼Œç›´åˆ°å®¹å™¨çš„&lt;/em&gt;CU cores&lt;em&gt;å¤§äºé›¶ï¼ˆå…¶ä»–å®¹å™¨é‡Šæ”¾äº†ç©ºé—²èµ„æºï¼Œæˆ–è€…è¯¥å®¹å™¨æœ‰æ ¸å‡½æ•°å®Œæˆé‡Šæ”¾äº†èµ„æºï¼Œå®¹å™¨é‡æ–°è·å¾—&lt;/em&gt;CU cores*ï¼‰&lt;/li&gt;
&lt;li&gt;å¼¹æ€§åˆ†é…çš„æ ·ä¾‹
&lt;ul&gt;
&lt;li&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828233026.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220828233026.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220828233026263&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220828233026263&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;é¦–å…ˆï¼Œå®¹å™¨Aç”³è¯·äº†0.3ä¸ªGPUï¼Œå¹¶ä¸”è¢«GPU Schedulerè°ƒåº¦åˆ°äº†ä¸€ä¸ªå®Œå…¨ç©ºé—²çš„GPUä¸Š&lt;/li&gt;
&lt;li&gt;ç”±äºGPUå®Œå…¨ç©ºé—²ï¼Œæ‰€ä»¥å®¹å™¨Aä¼šé€æ¸å ç”¨æ‰€æœ‰çš„ç©ºé—²èµ„æºï¼Œé»˜è®¤æœ€å¤§å¯å ç”¨90%&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶å®¹å™¨Bç”³è¯·äº†0.7ä¸ªGPUï¼Œä¹Ÿè¢«è°ƒåº¦åˆ°äº†æ­¤GPUä¸Šï¼Œä½†æ˜¯ç”±äºå®¹å™¨Aå ç”¨äº†æ‰€æœ‰çš„ç©ºé—²èµ„æºï¼Œæ‰€ä»¥éœ€è¦ä»å®¹å™¨Aå›æ”¶è¶…é¢çº¿ç¨‹èµ„æºå¹¶åˆ†é…ç»™å®¹å™¨B&lt;/li&gt;
&lt;li&gt;é‡å¤ç»è¿‡å‡ æ¬¡èµ„æºçš„é‡æ–°åˆ†é…ï¼Œå®¹å™¨Aå’Œå®¹å™¨Bæ‰€å ç”¨çš„èµ„æºä¸å…¶èµ„æºé…é¢ç›¸åŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŠ¨æ€åˆ†é…ç­–ç•¥&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŠ¨æ€èµ„æºåˆ†é…ä¼šä¿®æ”¹å®¹å™¨èµ„æºï¼ŒåŒ…æ‹¬å†…å­˜å’Œè®¡ç®—èµ„æºï¼Œè€Œæ— éœ€åœæ­¢å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;åŠ¨æ€èµ„æºåˆ†é…æ—¨åœ¨è§£å†³ä¸¤ä¸ªé—®é¢˜
&lt;ul&gt;
&lt;li&gt;åœ¨ç¡¬é™åˆ¶ä¸‹æ›´æ–°å®¹å™¨çš„å†…å­˜å’Œè®¡ç®—èµ„æº&lt;/li&gt;
&lt;li&gt;åœ¨å¼¹æ€§é™åˆ¶ä¸‹å°†å†…å­˜èµ„æºæ·»åŠ åˆ°å®¹å™¨ä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;vGPU Library é€šè¿‡å°†å®¹å™¨çš„èµ„æºé…ç½®ä¸å®¹å™¨çš„å®é™…ä½¿ç”¨è¿›è¡Œæ¯”è¾ƒæ¥é™åˆ¶å®¹å™¨èµ„æº&lt;/li&gt;
&lt;li&gt;è¦æ°¸ä¹…æ›´æ”¹å®¹å™¨çš„èµ„æºï¼šä¿®æ”¹å®¹å™¨çš„èµ„æºé…ç½®â€”&amp;gt;é€šçŸ¥GPU Scheduler-&amp;gt;æ›´æ–°ç›¸åº”çš„ç‰©ç†GPUåˆ†é…&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;experiments&#34;&gt;Experiments&lt;/h3&gt;
&lt;p&gt;&amp;hellip;&lt;/p&gt;
&lt;h3 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;&amp;hellip;&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è®ºæ–‡åœ°å€ &lt;a href=&#34;https://ieeexplore.ieee.org/abstract/document/8672318&#34;&gt;https://ieeexplore.ieee.org/abstract/document/8672318&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Githubå¼€æºä»£ç  &lt;a href=&#34;https://github.com/tkestack/gpu-manager&#34;&gt;https://github.com/tkestack/gpu-manager&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>ã€Kubernetesã€‘ubuntuå®‰è£…k8sé›†ç¾¤</title>
        <link>https://tweakzx.github.io/p/kubernetesubuntu%E5%AE%89%E8%A3%85k8s%E9%9B%86%E7%BE%A4/</link>
        <pubDate>Mon, 13 Jun 2022 14:57:42 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/kubernetesubuntu%E5%AE%89%E8%A3%85k8s%E9%9B%86%E7%BE%A4/</guid>
        <description>&lt;img src="https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/20220823230439.png" alt="Featured image of post ã€Kubernetesã€‘ubuntuå®‰è£…k8sé›†ç¾¤" /&gt;&lt;h1 id=&#34;åœ¨ubuntuä¸Šk8sé›†ç¾¤éƒ¨ç½²å®è·µ&#34;&gt;åœ¨ubuntuä¸Šk8sé›†ç¾¤éƒ¨ç½²å®è·µ&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;centos ä¸Šå®‰è£…å»ºè®®çœ‹ &lt;a class=&#34;link&#34; href=&#34;https://segmentfault.com/a/1190000037682150&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;åç«¯ - CentOS æ­å»º K8Sï¼Œä¸€æ¬¡æ€§æˆåŠŸï¼Œæ”¶è—äº†ï¼_ä¸ªäººæ–‡ç«  - SegmentFault æ€å¦&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä¸€æœºå™¨é…ç½®&#34;&gt;ä¸€ã€æœºå™¨é…ç½®&lt;/h2&gt;
&lt;h3 id=&#34;é…ç½®ä¸»æœºå&#34;&gt;é…ç½®ä¸»æœºå&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo hostnamectl set-hostname &lt;span class=&#34;s2&#34;&gt;&amp;#34;k8s-master&amp;#34;&lt;/span&gt;    // Run this &lt;span class=&#34;nb&#34;&gt;command&lt;/span&gt; on masternode
cat /etc/hostname
sudo hostnamectl set-hostname &lt;span class=&#34;s2&#34;&gt;&amp;#34;k8s-node1&amp;#34;&lt;/span&gt;Â Â Â Â  // Run this &lt;span class=&#34;nb&#34;&gt;command&lt;/span&gt; on node-0
sudo hostnamectl set-hostname &lt;span class=&#34;s2&#34;&gt;&amp;#34;k8s-node2&amp;#34;&lt;/span&gt;Â Â Â Â  // Run this &lt;span class=&#34;nb&#34;&gt;command&lt;/span&gt; on node-1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é…ç½®etchosts&#34;&gt;é…ç½®/etc/hosts&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo vi /etc/hosts 

10.1.13.106    k8s-master

&lt;span class=&#34;c1&#34;&gt;#10.1.13.107    k8s-node1&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;#10.1.13.108    k8s-node1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é…ç½®å…å¯†ç™»å½•&#34;&gt;é…ç½®å…å¯†ç™»å½•&lt;/h3&gt;
&lt;p&gt;æƒ³è®©æœºå™¨ A è®¿é—®æœºå™¨ Bï¼Œå°±æŠŠæœºå™¨ A çš„å…¬é’¥æ”¾åˆ°æœºå™¨ B çš„&lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt; æ–‡ä»¶é‡Œå°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬åœ¨&lt;code&gt;worker&lt;/code&gt;ä¸Šç”Ÿæˆä¸€ä¸ªå¯†é’¥ï¼Œè¾“å…¥ä¸‹è¿°å‘½ä»¤å&lt;strong&gt;ä¸€è·¯å›è½¦&lt;/strong&gt;å³å¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ssh-keygen
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åç™»å½•&lt;code&gt;master&lt;/code&gt;ï¼Œå¹¶ä¾æ¬¡è¾“å…¥ä¸‹è¿°ä¸¤æ¡å‘½ä»¤å°†å…¶å¤åˆ¶å¹¶å†™å…¥åˆ°&lt;code&gt;master&lt;/code&gt;çš„&lt;code&gt;authorized_keys&lt;/code&gt;ä¸­ï¼Œæ³¨æ„æˆ‘ä¸‹é¢çš„&lt;code&gt;scp&lt;/code&gt;å‘½ä»¤ä¸­ä½¿ç”¨äº†&lt;code&gt;worker&lt;/code&gt;åˆ«åï¼Œè¦æå‰è¿›è¡Œé…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¤åˆ¶åˆ° master ä¸»æœº&lt;/span&gt;
scp root@worker:~/.ssh/id_rsa.pub /home
&lt;span class=&#34;c1&#34;&gt;# å†™å…¥åˆ° authorized_keys ä¸­&lt;/span&gt;
cat /home/id_rsa.pub &amp;gt;&amp;gt; ~/.ssh/authorized_keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åå†æ¬¡ä½¿ç”¨&lt;code&gt;ssh worker&lt;/code&gt;ç™»å½•å°±å¯ä»¥å‘ç°ç›´æ¥è¿æ¥ä¸Šè€Œä¸éœ€è¦å¯†ç äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…³é—­é˜²ç«å¢™&#34;&gt;å…³é—­é˜²ç«å¢™&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo systemctl stop firewalld
sudo systemctl disable firewalld
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç¦ç”¨swap&#34;&gt;ç¦ç”¨swap&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªswapå…¶å®å¯ä»¥ç±»æ¯”æˆ windows ä¸Šçš„è™šæ‹Ÿå†…å­˜ï¼Œå®ƒå¯ä»¥è®©æœåŠ¡å™¨åœ¨å†…å­˜åƒæ»¡çš„æƒ…å†µä¸‹å¯ä»¥ä¿æŒä½æ•ˆè¿è¡Œï¼Œè€Œä¸æ˜¯ç›´æ¥å¡æ­»ã€‚ä½†æ˜¯ k8s çš„è¾ƒæ–°ç‰ˆæœ¬éƒ½è¦æ±‚å…³é—­swapã€‚æ‰€ä»¥å’±ä»¬ç›´æ¥åŠ¨æ‰‹ï¼Œä¿®æ”¹/etc/fstabæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo vi /etc/fstab
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼ŒæŠŠç¬¬äºŒæ¡ç”¨#æ³¨é‡Šæ‰å°±å¥½äº†ï¼Œæ³¨æ„ç¬¬ä¸€æ¡åˆ«æ³¨é‡Šäº†ï¼Œä¸ç„¶é‡å¯ä¹‹åç³»ç»Ÿæœ‰å¯èƒ½ä¼šæŠ¥file system read-onlyé”™è¯¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;nv&#34;&gt;UUID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;e2048966-750b-4795-a9a2-7b477d6681bf /   ext4    &lt;span class=&#34;nv&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;remount-ro &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;    &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# /dev/fd0        /media/floppy0  auto    rw,user,noauto,exec,utf8 0       0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åè¾“å…¥rebooté‡å¯å³å¯ï¼Œé‡å¯åä½¿ç”¨topå‘½ä»¤æŸ¥çœ‹ä»»åŠ¡ç®¡ç†å™¨ï¼Œå¦‚æœçœ‹åˆ°å¦‚ä¸‹KiB Swapåå‡ä¸º 0 å°±è¯´æ˜å…³é—­æˆåŠŸäº†ã€‚&lt;/p&gt;
&lt;p&gt;å…³é—­swapä¹‹åä½¿ç”¨topå‘½ä»¤çœ‹åˆ° KiB Swap å…¨éƒ¨ä¸º0&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20220613000133107.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20220613000133107.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220613000133107&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220613000133107&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢è¯´çš„æ˜¯æ°¸ä¹…å…³é—­swapå†…å­˜ï¼Œå…¶å®ä¹Ÿå¯ä»¥æš‚æ—¶å…³é—­ï¼Œä½¿ç”¨swapoff -aå‘½ä»¤å³å¯ï¼Œæ•ˆæœä¼šåœ¨é‡å¯åæ¶ˆå¤±ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç¦ç”¨selinux&#34;&gt;ç¦ç”¨Selinux&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt install selinux-utils
setenforce &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç¡®ä¿æ—¶åŒºå’Œæ—¶é—´æ­£ç¡®&#34;&gt;ç¡®ä¿æ—¶åŒºå’Œæ—¶é—´æ­£ç¡®&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo timedatectl set-timezone Asia/Shanghai
sudo systemctl restart rsyslog
sudo apt-get install ntpdate â€“y
sudo ntpdate time.windows.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é…ç½®netbridgebridge-nf-call-iptables&#34;&gt;é…ç½®net.bridge.bridge-nf-call-iptables&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;cat &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt;EOF | sudo tee /etc/modules-load.d/k8s.conf
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;br_netfilter
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;

cat &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt;EOF | sudo tee /etc/sysctl.d/k8s.conf
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;net.bridge.bridge-nf-call-ip6tables = 1
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;net.bridge.bridge-nf-call-iptables = 1
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;

sudo sysctl --system
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è®¾ç½®rp_filterçš„å€¼&#34;&gt;è®¾ç½®rp_filterçš„å€¼&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo vi /etc/sysctl.d/10-network-security.conf

&lt;span class=&#34;c1&#34;&gt;# å°†ä¸‹é¢ä¸¤ä¸ªå‚æ•°çš„å€¼ä»2ä¿®æ”¹ä¸º1&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# net.ipv4.conf.default.rp_filter=1&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# net.ipv4.conf.all.rp_filter=1&lt;/span&gt;

sudo sysctl --system
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;äºŒå®‰è£…docker&#34;&gt;äºŒã€å®‰è£…docker&lt;/h2&gt;
&lt;p&gt;docker æ˜¯ k8s çš„åŸºç¡€ï¼Œåœ¨å®‰è£…å®Œæˆä¹‹åä¹Ÿéœ€è¦ä¿®æ”¹ä¸€äº›é…ç½®æ¥é€‚é… k8s ï¼Œæ‰€ä»¥æœ¬ç« åˆ†ä¸º &lt;strong&gt;docker çš„å®‰è£…&lt;/strong&gt; ä¸ &lt;strong&gt;docker çš„é…ç½®&lt;/strong&gt; ä¸¤éƒ¨åˆ†ã€‚å¦‚æœä½ å·²ç»å®‰è£…å¹¶ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´çš„ docker äº†è¯ï¼Œå»ºè®®ä½¿ç”¨&lt;code&gt;docker -v&lt;/code&gt;æŸ¥çœ‹å·²å®‰è£…çš„ docker ç‰ˆæœ¬ï¼Œå¹¶åœ¨ k8s å®˜ç½‘ä¸ŠæŸ¥è¯¢é€‚åˆè¯¥ç‰ˆæœ¬çš„ k8s è¿›è¡Œå®‰è£…ã€‚è¿™ä¸€æ­¥ä¸¤å°ä¸»æœºéƒ½éœ€è¦è¿›è¡Œå®‰è£…ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å®‰è£…docker&#34;&gt;å®‰è£…docker&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt install docker.io

sudo apt install docker.io&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;18.09.1-0ubuntu1 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å¯åŠ¨docker&#34;&gt;å¯åŠ¨docker&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo systemctl start docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é…ç½®docker&#34;&gt;é…ç½®docker&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo mkdir -p /etc/docker

sudo tee /etc/docker/daemon.json &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt;-&amp;#39;EOF&amp;#39;
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;{
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  &amp;#34;registry-mirrors&amp;#34;: [&amp;#34;https://n73pm3wf.mirror.aliyuncs.com&amp;#34;],
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  &amp;#34;exec-opts&amp;#34;: [ &amp;#34;native.cgroupdriver=systemd&amp;#34; ]
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;}
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;

sudo systemctl daemon-reload
sudo systemctl restart docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è®¾ç½®å¼€æœºè‡ªå¯åŠ¨&#34;&gt;è®¾ç½®å¼€æœºè‡ªå¯åŠ¨&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ sudo systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; docker
æˆ–
$ sudo systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; docker.service --now
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;éªŒè¯docker&#34;&gt;éªŒè¯docker&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;systemctl status docker
docker --version
docker info &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep Cgroup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¿®æ”¹åçš„ docker cgroup çŠ¶æ€ï¼Œå‘ç°å˜ä¸º&lt;code&gt;systemd&lt;/code&gt;å³ä¸ºä¿®æ”¹æˆåŠŸã€‚&lt;/p&gt;
&lt;h3 id=&#34;é‡å¯dockerå½“æœ‰é…ç½®æ”¹åŠ¨åæ‰§è¡Œ&#34;&gt;é‡å¯dockerï¼ˆå½“æœ‰é…ç½®æ”¹åŠ¨åæ‰§è¡Œï¼‰&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo pkill -SIGHUP dockerd
sudo systemctl restart docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å¸è½½docker&#34;&gt;å¸è½½docker&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt-get remove docker.io
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä¸‰å®‰è£…k8s&#34;&gt;ä¸‰ã€å®‰è£…k8s&lt;/h2&gt;
&lt;h3 id=&#34;å®‰è£…k8s&#34;&gt;å®‰è£…k8s&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä½¿å¾— apt æ”¯æŒ ssl ä¼ è¾“&lt;/span&gt;
apt-get update &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y apt-transport-https
&lt;span class=&#34;c1&#34;&gt;# ä¸‹è½½ gpg å¯†é’¥   è¿™ä¸ªéœ€è¦rootç”¨æˆ·å¦åˆ™ä¼šæŠ¥é”™&lt;/span&gt;
curl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; apt-key add - 
&lt;span class=&#34;c1&#34;&gt;# æ·»åŠ  k8s é•œåƒæº è¿™ä¸ªéœ€è¦rootç”¨æˆ·å¦åˆ™ä¼šæŠ¥é”™&lt;/span&gt;
cat &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt;EOF &amp;gt;/etc/apt/sources.list.d/kubernetes.list
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;deb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# æ›´æ–°æºåˆ—è¡¨&lt;/span&gt;
apt-get update

&lt;span class=&#34;c1&#34;&gt;# ä¸‹è½½ kubectlï¼Œkubeadmä»¥åŠ kubelet&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# å®‰è£…æœ€æ–°ç‰ˆæœ¬&lt;/span&gt;
apt-get install -y kubelet kubeadm kubectl
&lt;span class=&#34;c1&#34;&gt;# å®‰è£…æŒ‡å®šç‰ˆæœ¬&lt;/span&gt;
apt-get install -y &lt;span class=&#34;nv&#34;&gt;kubelet&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1.15.1-00 &lt;span class=&#34;nv&#34;&gt;kubeadm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1.15.1-00 &lt;span class=&#34;nv&#34;&gt;kubectl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1.15.1-00
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ é™¤å·²å®‰è£…çš„k8s&#34;&gt;åˆ é™¤å·²å®‰è£…çš„k8s&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt-get remove -y --allow-change-held-packages kubeadm kubectl kubelet
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æŸ¥è¯¢å¯å®‰è£…ç‰ˆæœ¬&#34;&gt;æŸ¥è¯¢å¯å®‰è£…ç‰ˆæœ¬&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;apt-cache madison kubeadm
apt-cache madison kubelet
apt-cache madison kubectl
apt-cache madison kubernetes-cni
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è®¾ç½®ä¸éšç³»ç»Ÿæ›´æ–°è€Œæ›´æ–°&#34;&gt;è®¾ç½®ä¸éšç³»ç»Ÿæ›´æ–°è€Œæ›´æ–°&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo apt-mark hold kubelet kubeadm kubectl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å››åˆå§‹åŒ–master&#34;&gt;å››ã€åˆå§‹åŒ–master&lt;/h2&gt;
&lt;h3 id=&#34;kubeadm-init&#34;&gt;kubeadm init&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubeadm init &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--apiserver-advertise-address&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;10.10.0.2 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--kubernetes-version&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1.15.1 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--image-repository registry.cn-hangzhou.aliyuncs.com/google_containers &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--service-cidr&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;10.96.0.0/16 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--pod-network-cidr&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;10.244.0.0/16
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‚æ•°è§£é‡Šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;ndash;kubernetes-versionï¼šæŒ‡å®škubernetesçš„ç‰ˆæœ¬ï¼Œä¸ä¸Šé¢kubeletï¼Œkubeadmï¼Œkubectlå·¥å…·ç‰ˆæœ¬ä¿æŒä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&amp;ndash;apiserver-advertise-addressï¼šapiserveræ‰€åœ¨çš„èŠ‚ç‚¹(master)çš„ipã€‚&lt;/li&gt;
&lt;li&gt;&amp;ndash;image-repository=registry.aliyuncs.com/google_containersï¼šç”±äºå›½å¤–åœ°å€æ— æ³•è®¿é—®ï¼Œæ‰€ä»¥ä½¿ç”¨é˜¿é‡Œäº‘ä»“åº“åœ°å€&lt;/li&gt;
&lt;li&gt;&amp;ndash;server-cidrï¼šserviceä¹‹é—´è®¿é—®ä½¿ç”¨çš„ç½‘ç»œipæ®µ&lt;/li&gt;
&lt;li&gt;&amp;ndash;pod-network-cidrï¼špodä¹‹é—´ç½‘ç»œè®¿é—®ä½¿ç”¨çš„ç½‘ç»œip,ä¸ä¸‹æ–‡éƒ¨ç½²çš„CNIç½‘ç»œç»„ä»¶ymlä¸­ä¿æŒä¸€è‡´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆå§‹åŒ–æˆåŠŸä¹‹åä½ å°†çœ‹åˆ°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;Your Kubernetes control-plane has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube
  sudo cp -i /etc/kubernetes/admin.conf &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube/config
  sudo chown &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;id -u&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;:&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;id -g&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube/config

Alternatively, &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; you are the root user, you can run:

  &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;KUBECONFIG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/admin.conf

You should now deploy a pod network to the cluster.
Run &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubectl apply -f [podnetwork].yaml&amp;#34;&lt;/span&gt; with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

Then you can join any number of worker nodes by running the following on each as root:

kubeadm join 10.10.0.2:6443 --token juojiv.q4gwfmkj4cwgscnt &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;        --discovery-token-ca-cert-hash sha256:381b61262d3b174cfce0e5cfbd0b4b171e270c506d82c4d82334d0a4e2c2ac47
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆå§‹åŒ–å¤±è´¥&#34;&gt;åˆå§‹åŒ–å¤±è´¥&lt;/h3&gt;
&lt;p&gt;é‡ç½®ä¹‹åé‡æ–°åˆå§‹åŒ–&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubeadm reset
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è®°å¾—ä¿å­˜kubeadm-join-å‘½ä»¤&#34;&gt;è®°å¾—ä¿å­˜kubeadm join å‘½ä»¤&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubeadm join 10.10.0.2:6443 --token qc7drh.47mloh5ierij84xi &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;        --discovery-token-ca-cert-hash sha256:90f147ef85ae06d9a46bed91d64109abbd697b6878ab9ca16a376e11816f9a0d 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœå¿˜è®°å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤é‡æ–°ç”Ÿæˆ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubeadm token create --print-join-command
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é…ç½®kubectl&#34;&gt;é…ç½®kubectl&lt;/h3&gt;
&lt;p&gt;æŒ‰ç…§ä¸Šå›¾ä¸­çš„å‘½ä»¤é…ç½®ï¼Œå¯ä»¥ç›´æ¥ä»å‘½ä»¤è¡Œä¸­å¤åˆ¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;érootç”¨æˆ·&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt; mkdir -p &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube
 sudo cp -i /etc/kubernetes/admin.conf &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube/config
 sudo chown &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;id -u&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;:&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;id -g&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube/config

&lt;span class=&#34;c1&#34;&gt;# æŸ¥çœ‹å·²åŠ å…¥çš„èŠ‚ç‚¹&lt;/span&gt;
kubectl get nodes
&lt;span class=&#34;c1&#34;&gt;# æŸ¥çœ‹é›†ç¾¤çŠ¶æ€&lt;/span&gt;
kubectl get cs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;rootç”¨æˆ·&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;KUBECONFIG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/admin.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;éƒ¨ç½²ç½‘ç»œ&#34;&gt;éƒ¨ç½²ç½‘ç»œ&lt;/h3&gt;
&lt;p&gt;ç½‘ç»œæ’ä»¶å¯ä»¥é€‰æ‹©calicoæˆ–flannelã€‚è¿™é‡Œä½¿ç”¨Flannelä½œä¸ºKuberneteså®¹å™¨ç½‘ç»œæ–¹æ¡ˆï¼Œè§£å†³å®¹å™¨è·¨ä¸»æœºç½‘ç»œé€šä¿¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éƒ¨ç½²flannelç½‘ç»œ&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œæ³¨æ„ä¿®æ”¹ä¸‹å›¾ä¸­çš„Networkï¼Œä¸kubeadm intiä¸­çš„&amp;ndash;pod-network-cidr 10.244.0.0/16å‚æ•°ä¿æŒä¸€è‡´ï¼Œç„¶å&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl apply -f kube-flannel.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20220613013117789.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20220613013117789.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220613013117789&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220613013117789&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å°†ä¼šçœ‹åˆ°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;podsecuritypolicy.policy/psp.flannel.unprivileged created
clusterrole.rbac.authorization.k8s.io/flannel created
clusterrolebinding.rbac.authorization.k8s.io/flannel created
serviceaccount/flannel created
configmap/kube-flannel-cfg created
daemonset.apps/kube-flannel-ds created
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹podçŠ¶æ€ï¼Œåº”è¯¥å…¨éƒ¨ä¸ºrunningã€‚å¯èƒ½éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl get pod --all-namespaces -o wide
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20220613012658569.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20220613012658569.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220613012658569&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220613012658569&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éƒ¨ç½²calicoç½‘ç»œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹è½½ymlæ–‡ä»¶&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;wget  https://docs.projectcalico.org/v3.11/manifests/calico.yaml

vi calico.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;#ä¿®æ”¹CALICO_IPV4POOL_CIDRï¼Œä¸º10.244.0.0/16ï¼ˆè¦ä¸kubeadm intiä¸­çš„&amp;ndash;pod-network-cidr 10.244.0.0/16å‚æ•°ä¿æŒä¸€è‡´ï¼Œé»˜è®¤ä¸º192.168.0.0/16&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl apply -f calico.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;äº”æ·»åŠ workerèŠ‚ç‚¹&#34;&gt;äº”ã€æ·»åŠ workerèŠ‚ç‚¹&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ä¹‹å‰ä¿å­˜çš„kubeadm joinå‘½ä»¤&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubeadm join 10.10.0.2:6443 --token ryyy8k.pr8u7cjm4btqdx4v --discovery-token-ca-cert-hash sha256:6b596c66745b162190475b63686ca46c60cc4f39473
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶ååœ¨masterèŠ‚ç‚¹ä¸Šï¼ŒæŸ¥çœ‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl get nodes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20220613010009663.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20220613010009663.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220613010009663&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220613010009663&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&#34;å…­éªŒè¯&#34;&gt;å…­ã€éªŒè¯&lt;/h2&gt;
&lt;h3 id=&#34;åˆ›å»ºnginx&#34;&gt;åˆ›å»ºnginx&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl create deployment nginx-web --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;nginx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è·å–podä¿¡æ¯&#34;&gt;è·å–podä¿¡æ¯&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl get pod -o wide
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20220613013920336.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20220613013920336.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20220613013920336&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20220613013920336&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°è¯¥èŠ‚ç‚¹çš„ipä¸º10.244.1.2&lt;/p&gt;
&lt;h3 id=&#34;æµ‹è¯•nginx&#34;&gt;æµ‹è¯•nginx&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;root@k8s-master:/home# curl http://10.244.1.2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;Welcome to nginx!&amp;lt;/title&amp;gt;
&amp;lt;style&amp;gt;
html &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; color-scheme: light dark&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
body &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; width: 35em&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; margin: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; auto&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
font-family: Tahoma, Verdana, Arial, sans-serif&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;h1&amp;gt;Welcome to nginx!&amp;lt;/h1&amp;gt;
&amp;lt;p&amp;gt;If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For online documentation and support please refer to
&amp;lt;a &lt;span class=&#34;nv&#34;&gt;href&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;http://nginx.org/&amp;#34;&lt;/span&gt;&amp;gt;nginx.org&amp;lt;/a&amp;gt;.&amp;lt;br/&amp;gt;
Commercial support is available at
&amp;lt;a &lt;span class=&#34;nv&#34;&gt;href&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;http://nginx.com/&amp;#34;&lt;/span&gt;&amp;gt;nginx.com&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Thank you &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; using nginx.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ é™¤pod&#34;&gt;åˆ é™¤pod&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl delete pod nginx-web-xxxxxx -n nginx-web
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä¸ƒåˆ é™¤èŠ‚ç‚¹&#34;&gt;ä¸ƒã€åˆ é™¤èŠ‚ç‚¹&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œç¡®å®šæƒ³è¦æ¸…ç©ºçš„èŠ‚ç‚¹çš„åç§°ã€‚å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºé›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl get nodes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå‘Šè¯‰ Kubernetes æ¸…ç©ºèŠ‚ç‚¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl drain &amp;lt;node name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸€æ—¦å®ƒè¿”å›ï¼ˆæ²¡æœ‰æŠ¥é”™ï¼‰ï¼Œ ä½ å°±å¯ä»¥ä¸‹çº¿æ­¤èŠ‚ç‚¹ï¼ˆæˆ–è€…ç­‰ä»·åœ°ï¼Œå¦‚æœåœ¨äº‘å¹³å°ä¸Šï¼Œåˆ é™¤æ”¯æŒè¯¥èŠ‚ç‚¹çš„è™šæ‹Ÿæœºï¼‰ã€‚ å¦‚æœè¦åœ¨ç»´æŠ¤æ“ä½œæœŸé—´å°†èŠ‚ç‚¹ç•™åœ¨é›†ç¾¤ä¸­ï¼Œåˆ™éœ€è¦è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl uncordon &amp;lt;node name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åå‘Šè¯‰ Kubernetesï¼Œå®ƒå¯ä»¥ç»§ç»­åœ¨æ­¤èŠ‚ç‚¹ä¸Šè°ƒåº¦æ–°çš„ Podsã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€Golangã€‘è‡ªåŠ¨æœºçš„å®ç°</title>
        <link>https://tweakzx.github.io/p/golang%E8%87%AA%E5%8A%A8%E6%9C%BA%E7%9A%84%E5%AE%9E%E7%8E%B0/</link>
        <pubDate>Sat, 12 Mar 2022 16:59:39 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/golang%E8%87%AA%E5%8A%A8%E6%9C%BA%E7%9A%84%E5%AE%9E%E7%8E%B0/</guid>
        <description>&lt;h2 id=&#34;é¢˜ç›®æè¿°&#34;&gt;é¢˜ç›®æè¿°&lt;/h2&gt;
&lt;p&gt;è¯·ä½ æ¥å®ç°ä¸€ä¸ª myAtoi(string s) å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆç±»ä¼¼ C/C++ ä¸­çš„ atoi å‡½æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å‡½æ•° myAtoi(string s) çš„ç®—æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¯»å…¥å­—ç¬¦ä¸²å¹¶ä¸¢å¼ƒæ— ç”¨çš„å‰å¯¼ç©ºæ ¼&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼ˆå‡è®¾è¿˜æœªåˆ°å­—ç¬¦æœ«å°¾ï¼‰ä¸ºæ­£è¿˜æ˜¯è´Ÿå·ï¼Œè¯»å–è¯¥å­—ç¬¦ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ ç¡®å®šæœ€ç»ˆç»“æœæ˜¯è´Ÿæ•°è¿˜æ˜¯æ­£æ•°ã€‚ å¦‚æœä¸¤è€…éƒ½ä¸å­˜åœ¨ï¼Œåˆ™å‡å®šç»“æœä¸ºæ­£ã€‚&lt;/li&gt;
&lt;li&gt;è¯»å…¥ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œç›´åˆ°åˆ°è¾¾ä¸‹ä¸€ä¸ªéæ•°å­—å­—ç¬¦æˆ–åˆ°è¾¾è¾“å…¥çš„ç»“å°¾ã€‚å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†å°†è¢«å¿½ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;å°†å‰é¢æ­¥éª¤è¯»å…¥çš„è¿™äº›æ•°å­—è½¬æ¢ä¸ºæ•´æ•°ï¼ˆå³ï¼Œ&amp;ldquo;123&amp;rdquo; -&amp;gt; 123ï¼Œ &amp;ldquo;0032&amp;rdquo; -&amp;gt; 32ï¼‰ã€‚å¦‚æœæ²¡æœ‰è¯»å…¥æ•°å­—ï¼Œåˆ™æ•´æ•°ä¸º 0 ã€‚å¿…è¦æ—¶æ›´æ”¹ç¬¦å·ï¼ˆä»æ­¥éª¤ 2 å¼€å§‹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ•´æ•°æ•°è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ [âˆ’231,  231 âˆ’ 1] ï¼Œéœ€è¦æˆªæ–­è¿™ä¸ªæ•´æ•°ï¼Œä½¿å…¶ä¿æŒåœ¨è¿™ä¸ªèŒƒå›´å†…ã€‚å…·ä½“æ¥è¯´ï¼Œå°äº âˆ’231 çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º âˆ’231 ï¼Œå¤§äº 231 âˆ’ 1 çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º 231 âˆ’ 1 ã€‚&lt;/li&gt;
&lt;li&gt;è¿”å›æ•´æ•°ä½œä¸ºæœ€ç»ˆç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æœ¬é¢˜ä¸­çš„ç©ºç™½å­—ç¬¦åªåŒ…æ‹¬ç©ºæ ¼å­—ç¬¦ &#39; &#39; ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é™¤å‰å¯¼ç©ºæ ¼æˆ–æ•°å­—åçš„å…¶ä½™å­—ç¬¦ä¸²å¤–ï¼Œè¯·å‹¿å¿½ç•¥ ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¤ºä¾‹ 1ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¾“å…¥ï¼šs = &amp;ldquo;42&amp;rdquo;
è¾“å‡ºï¼š42
è§£é‡Šï¼šåŠ ç²—çš„å­—ç¬¦ä¸²ä¸ºå·²ç»è¯»å…¥çš„å­—ç¬¦ï¼Œæ’å…¥ç¬¦å·æ˜¯å½“å‰è¯»å–çš„å­—ç¬¦ã€‚
ç¬¬ 1 æ­¥ï¼š&amp;ldquo;42&amp;rdquo;ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰
^
ç¬¬ 2 æ­¥ï¼š&amp;ldquo;42&amp;rdquo;ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºè¿™é‡Œä¸å­˜åœ¨ &amp;lsquo;-&amp;rsquo; æˆ–è€… &amp;lsquo;+&#39;ï¼‰
^
ç¬¬ 3 æ­¥ï¼š&amp;ldquo;42&amp;rdquo;ï¼ˆè¯»å…¥ &amp;ldquo;42&amp;rdquo;ï¼‰
^
è§£æå¾—åˆ°æ•´æ•° 42 ã€‚
ç”±äº &amp;ldquo;42&amp;rdquo; åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 42 ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç¤ºä¾‹ 2ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¾“å…¥ï¼šs = &amp;quot;   -42&amp;quot;
è¾“å‡ºï¼š-42
è§£é‡Šï¼š
ç¬¬ 1 æ­¥ï¼š&amp;quot;   -42&amp;quot;ï¼ˆè¯»å…¥å‰å¯¼ç©ºæ ¼ï¼Œä½†å¿½è§†æ‰ï¼‰
^
ç¬¬ 2 æ­¥ï¼š&amp;quot;   -42&amp;quot;ï¼ˆè¯»å…¥ &amp;lsquo;-&amp;rsquo; å­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœåº”è¯¥æ˜¯è´Ÿæ•°ï¼‰
^
ç¬¬ 3 æ­¥ï¼š&amp;quot;   -42&amp;quot;ï¼ˆè¯»å…¥ &amp;ldquo;42&amp;rdquo;ï¼‰
^
è§£æå¾—åˆ°æ•´æ•° -42 ã€‚
ç”±äº &amp;ldquo;-42&amp;rdquo; åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º -42 ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç¤ºä¾‹ 3ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¾“å…¥ï¼šs = &amp;ldquo;4193 with words&amp;rdquo;
è¾“å‡ºï¼š4193
è§£é‡Šï¼š
ç¬¬ 1 æ­¥ï¼š&amp;ldquo;4193 with words&amp;rdquo;ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºæ²¡æœ‰å‰å¯¼ç©ºæ ¼ï¼‰
^
ç¬¬ 2 æ­¥ï¼š&amp;ldquo;4193 with words&amp;rdquo;ï¼ˆå½“å‰æ²¡æœ‰è¯»å…¥å­—ç¬¦ï¼Œå› ä¸ºè¿™é‡Œä¸å­˜åœ¨ &amp;lsquo;-&amp;rsquo; æˆ–è€… &amp;lsquo;+&#39;ï¼‰
^
ç¬¬ 3 æ­¥ï¼š&amp;ldquo;4193 with words&amp;rdquo;ï¼ˆè¯»å…¥ &amp;ldquo;4193&amp;rdquo;ï¼›ç”±äºä¸‹ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¯»å…¥åœæ­¢ï¼‰
^
è§£æå¾—åˆ°æ•´æ•° 4193 ã€‚
ç”±äº &amp;ldquo;4193&amp;rdquo; åœ¨èŒƒå›´ [-231, 231 - 1] å†…ï¼Œæœ€ç»ˆç»“æœä¸º 4193 ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æç¤ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;0 &amp;lt;= s.length &amp;lt;= 200&lt;/li&gt;
&lt;li&gt;s ç”±è‹±æ–‡å­—æ¯ï¼ˆå¤§å†™å’Œå°å†™ï¼‰ã€æ•°å­—ï¼ˆ0-9ï¼‰ã€&amp;rsquo; &amp;lsquo;ã€&#39;+&#39;ã€&#39;-&amp;rsquo; å’Œ &amp;lsquo;.&amp;rsquo; ç»„æˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/string-to-integer-atoi&lt;/p&gt;
&lt;h2 id=&#34;é¢˜è§£&#34;&gt;é¢˜è§£&lt;/h2&gt;
&lt;p&gt;å¤§å®¶å¯ä»¥è‡ªè¡Œå»çœ‹leetcodeçš„å®˜æ–¹é¢˜è§£ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªè‡ªåŠ¨æœºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ç¬¬ä¸€æ¬¡ç”¨Goæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥å†³å®šè®°å½•ä¸‹æ¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Automaton&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;sign&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; 
    &lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt;   &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; 
    &lt;span class=&#34;nx&#34;&gt;table&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt; 
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Automaton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;//å› ä¸ºGoä¸èƒ½è®¾ç½®ç±»å‹å˜é‡çš„åˆå§‹å€¼ï¼ˆæˆ‘æ²¡æ‰¾åˆ°ç›¸å…³ä»£ç ï¼‰ï¼Œæ‰€ä»¥æˆ‘ç”¨äº†åˆå§‹åŒ–å‡½æ•°æ¥ä»£æ›¿
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;start&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sign&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;table&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;s&#34;&gt;&amp;#34;start&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;start&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;signed&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;in_number&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
        &lt;span class=&#34;s&#34;&gt;&amp;#34;signed&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;in_number&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
        &lt;span class=&#34;s&#34;&gt;&amp;#34;in_number&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;in_number&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
        &lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Automaton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//å®ç°çŠ¶æ€è½¬ç§»çš„æ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;table&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;get_col&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;in_number&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; 
            &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sign&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MaxInt32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MinInt32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;signed&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sign&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Automaton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_col&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//è·å¾—è¾“å…¥å­—ç¬¦çš„ç±»å‹
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;+&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;9&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Automaton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_ans&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//è·å¾—ç»“æœ
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sign&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;myAtoi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Automaton&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;get_ans&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;min&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title>ã€Golangã€‘Goè¯­è¨€ä¹‹æ—…</title>
        <link>https://tweakzx.github.io/p/golanggo%E8%AF%AD%E8%A8%80%E4%B9%8B%E6%97%85/</link>
        <pubDate>Tue, 22 Feb 2022 17:20:32 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/golanggo%E8%AF%AD%E8%A8%80%E4%B9%8B%E6%97%85/</guid>
        <description>&lt;img src="https://go.dev/images/gophers/biplane.svg" alt="Featured image of post ã€Golangã€‘Goè¯­è¨€ä¹‹æ—…" /&gt;&lt;h1 id=&#34;æ—…è¡Œèµ·ç‚¹&#34;&gt;æ—…è¡Œèµ·ç‚¹&lt;/h1&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://tour.go-zh.org/welcome/1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go è¯­è¨€ä¹‹æ—… (go-zh.org)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šæ–¹é“¾æ¥æ˜¯ä¸€ä¸ªGoè¯­è¨€å­¦ä¹ çš„Playgroundï¼Œå¿«ç‚¹å‡»å®ƒï¼Œå¼€å¯ä¸€åœºGoè¯­è¨€ä¹‹æ—…å§&lt;/p&gt;
&lt;h1 id=&#34;æ—…è¡Œå¼€å§‹&#34;&gt;æ—…è¡Œå¼€å§‹&lt;/h1&gt;
&lt;h2 id=&#34;ç»ƒä¹ å¾ªç¯ä¸å‡½æ•°&#34;&gt;ç»ƒä¹ ï¼šå¾ªç¯ä¸å‡½æ•°&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†ç»ƒä¹ å‡½æ•°ä¸å¾ªç¯ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå¹³æ–¹æ ¹å‡½æ•°ï¼šç”¨ç‰›é¡¿æ³•å®ç°å¹³æ–¹æ ¹å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;è®¡ç®—æœºé€šå¸¸ä½¿ç”¨å¾ªç¯æ¥è®¡ç®— x çš„å¹³æ–¹æ ¹ã€‚ä»æŸä¸ªçŒœæµ‹çš„å€¼ z å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ® zÂ² ä¸ x çš„è¿‘ä¼¼åº¦æ¥è°ƒæ•´ zï¼Œäº§ç”Ÿä¸€ä¸ªæ›´å¥½çš„çŒœæµ‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;z -= (z*z - x) / (2*z)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡å¤è°ƒæ•´çš„è¿‡ç¨‹ï¼ŒçŒœæµ‹çš„ç»“æœä¼šè¶Šæ¥è¶Šç²¾ç¡®ï¼Œå¾—åˆ°çš„ç­”æ¡ˆä¹Ÿä¼šå°½å¯èƒ½æ¥è¿‘å®é™…çš„å¹³æ–¹æ ¹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æä¾›çš„ &lt;code&gt;func Sqrt&lt;/code&gt; ä¸­å®ç°å®ƒã€‚æ— è®ºè¾“å…¥æ˜¯ä»€ä¹ˆï¼Œå¯¹ z çš„ä¸€ä¸ªæ°å½“çš„çŒœæµ‹ä¸º 1ã€‚ è¦å¼€å§‹ï¼Œè¯·é‡å¤è®¡ç®— 10 æ¬¡å¹¶éšä¹‹æ‰“å°æ¯æ¬¡çš„ z å€¼ã€‚è§‚å¯Ÿå¯¹äºä¸åŒçš„å€¼ xï¼ˆ1ã€2ã€3 &amp;hellip;ï¼‰ï¼Œ ä½ å¾—åˆ°çš„ç­”æ¡ˆæ˜¯å¦‚ä½•é€¼è¿‘ç»“æœçš„ï¼ŒçŒœæµ‹æå‡çš„é€Ÿåº¦æœ‰å¤šå¿«ã€‚&lt;/p&gt;
&lt;p&gt;æç¤ºï¼šç”¨ç±»å‹è½¬æ¢æˆ–æµ®ç‚¹æ•°è¯­æ³•æ¥å£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªæµ®ç‚¹æ•°å€¼ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;z := 1.0
z := float64(1)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åï¼Œä¿®æ”¹å¾ªç¯æ¡ä»¶ï¼Œä½¿å¾—å½“å€¼åœæ­¢æ”¹å˜ï¼ˆæˆ–æ”¹å˜éå¸¸å°ï¼‰çš„æ—¶å€™é€€å‡ºå¾ªç¯ã€‚è§‚å¯Ÿè¿­ä»£æ¬¡æ•°å¤§äºè¿˜æ˜¯å°äº 10ã€‚ å°è¯•æ”¹å˜ z çš„åˆå§‹çŒœæµ‹ï¼Œå¦‚ x æˆ– x/2ã€‚ä½ çš„å‡½æ•°ç»“æœä¸æ ‡å‡†åº“ä¸­çš„ &lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/pkg/math/#Sqrt&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;math.Sqrt&lt;/a&gt; æ¥è¿‘å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ï¼ˆ&lt;em&gt;æ³¨ï¼š&lt;/em&gt; å¦‚æœä½ å¯¹è¯¥ç®—æ³•çš„ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œä¸Šé¢çš„ zÂ² âˆ’ x æ˜¯ zÂ² åˆ°å®ƒæ‰€è¦åˆ°è¾¾çš„å€¼ï¼ˆå³ xï¼‰çš„è·ç¦»ï¼Œ é™¤ä»¥çš„ 2z ä¸º zÂ² çš„å¯¼æ•°ï¼Œæˆ‘ä»¬é€šè¿‡ zÂ² çš„å˜åŒ–é€Ÿåº¦æ¥æ”¹å˜ z çš„è°ƒæ•´é‡ã€‚ è¿™ç§é€šç”¨æ–¹æ³•å«åš&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%e7%89%9b%e9%a1%bf%e6%b3%95&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ç‰›é¡¿æ³•&lt;/a&gt;ã€‚ å®ƒå¯¹å¾ˆå¤šå‡½æ•°ï¼Œç‰¹åˆ«æ˜¯å¹³æ–¹æ ¹è€Œè¨€éå¸¸æœ‰æ•ˆã€‚ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;math&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Sqrt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Abs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&amp;gt;&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.000001&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sqrt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»ƒä¹ åˆ‡ç‰‡&#34;&gt;ç»ƒä¹ ï¼šåˆ‡ç‰‡&lt;/h2&gt;
&lt;p&gt;å®ç° &lt;code&gt;Pic&lt;/code&gt;ã€‚å®ƒåº”å½“è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º &lt;code&gt;dy&lt;/code&gt; çš„åˆ‡ç‰‡ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º &lt;code&gt;dx&lt;/code&gt;ï¼Œå…ƒç´ ç±»å‹ä¸º &lt;code&gt;uint8&lt;/code&gt; çš„åˆ‡ç‰‡ã€‚å½“ä½ è¿è¡Œæ­¤ç¨‹åºæ—¶ï¼Œå®ƒä¼šå°†æ¯ä¸ªæ•´æ•°è§£é‡Šä¸ºç°åº¦å€¼ï¼ˆå¥½å§ï¼Œå…¶å®æ˜¯è“åº¦å€¼ï¼‰å¹¶æ˜¾ç¤ºå®ƒæ‰€å¯¹åº”çš„å›¾åƒã€‚&lt;/p&gt;
&lt;p&gt;å›¾åƒçš„é€‰æ‹©ç”±ä½ æ¥å®šã€‚å‡ ä¸ªæœ‰è¶£çš„å‡½æ•°åŒ…æ‹¬ &lt;code&gt;(x+y)/2&lt;/code&gt;, &lt;code&gt;x*y&lt;/code&gt;, &lt;code&gt;x^y&lt;/code&gt;, &lt;code&gt;x*log(y)&lt;/code&gt; å’Œ &lt;code&gt;x%(y+1)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆæç¤ºï¼šéœ€è¦ä½¿ç”¨å¾ªç¯æ¥åˆ†é… &lt;code&gt;[][]uint8&lt;/code&gt; ä¸­çš„æ¯ä¸ª &lt;code&gt;[]uint8&lt;/code&gt;ï¼›è¯·ä½¿ç”¨ &lt;code&gt;uint8(intValue)&lt;/code&gt; åœ¨ç±»å‹ä¹‹é—´è½¬æ¢ï¼›ä½ å¯èƒ½ä¼šç”¨åˆ° &lt;code&gt;math&lt;/code&gt; åŒ…ä¸­çš„å‡½æ•°ã€‚ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;golang.org/x/tour/pic&amp;#34;&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Pic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dy&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[][]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;picture&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([][]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;picture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;line&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
		&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;picture&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;line&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;picture&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;pic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»ƒä¹ æ˜ å°„&#34;&gt;ç»ƒä¹ ï¼šæ˜ å°„&lt;/h2&gt;
&lt;p&gt;å®ç° &lt;code&gt;WordCount&lt;/code&gt;ã€‚å®ƒåº”å½“è¿”å›ä¸€ä¸ªæ˜ å°„ï¼Œå…¶ä¸­åŒ…å«å­—ç¬¦ä¸² &lt;code&gt;s&lt;/code&gt; ä¸­æ¯ä¸ªâ€œå•è¯â€çš„ä¸ªæ•°ã€‚å‡½æ•° &lt;code&gt;wc.Test&lt;/code&gt; ä¼šå¯¹æ­¤å‡½æ•°æ‰§è¡Œä¸€ç³»åˆ—æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶è¾“å‡ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;ä½ ä¼šå‘ç° &lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/pkg/strings/#Fields&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;strings.Fields&lt;/a&gt; å¾ˆæœ‰å¸®åŠ©ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;golang.org/x/tour/wc&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;strings&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;WordCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;words&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;words&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;c1&#34;&gt;//v,ok := ans[w]
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ans&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;wc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WordCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»ƒä¹ æ–æ³¢çº³å¥‘é—­åŒ…&#34;&gt;ç»ƒä¹ ï¼šæ–æ³¢çº³å¥‘é—­åŒ…&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬ç”¨å‡½æ•°åšäº›å¥½ç©çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;å®ç°ä¸€ä¸ª &lt;code&gt;fibonacci&lt;/code&gt; å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªå‡½æ•°ï¼ˆé—­åŒ…ï¼‰ï¼Œè¯¥é—­åŒ…è¿”å›ä¸€ä¸ª&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%e6%96%90%e6%b3%a2%e9%82%a3%e5%a5%91%e6%95%b0%e5%88%97&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ–æ³¢çº³å¥‘æ•°åˆ—&lt;/a&gt; &lt;code&gt;(0, 1, 1, 2, 3, 5, ...)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// è¿”å›ä¸€ä¸ªâ€œè¿”å›intçš„å‡½æ•°â€
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fibonacci&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;first&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; 
	&lt;span class=&#34;nx&#34;&gt;second&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;//æ ¹æ®å…¬å¼å€’æ¨å‡ºçš„firstå’Œsecond
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;first&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;second&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;first&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;second&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;second&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;first&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;//æ–æ³¢é‚£å¥‘å…¬å¼
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;second&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fibonacci&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»ƒä¹ stringer&#34;&gt;ç»ƒä¹ ï¼šStringer&lt;/h2&gt;
&lt;p&gt;é€šè¿‡è®© &lt;code&gt;IPAddr&lt;/code&gt; ç±»å‹å®ç° &lt;code&gt;fmt.Stringer&lt;/code&gt; æ¥æ‰“å°ç‚¹å·åˆ†éš”çš„åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œ&lt;code&gt;IPAddr{1, 2, 3, 4}&lt;/code&gt; åº”å½“æ‰“å°ä¸º &lt;code&gt;&amp;quot;1.2.3.4&amp;quot;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;IPAddr&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// TODO: ç»™ IPAddr æ·»åŠ ä¸€ä¸ª &amp;#34;String() string&amp;#34; æ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;IPAddr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%v.%v.%v.%v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;hosts&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IPAddr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;s&#34;&gt;&amp;#34;loopback&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;127&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
		&lt;span class=&#34;s&#34;&gt;&amp;#34;googleDNS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;hosts&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%v: %v\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»ƒä¹ é”™è¯¯&#34;&gt;ç»ƒä¹ ï¼šé”™è¯¯&lt;/h2&gt;
&lt;p&gt;ä»&lt;a class=&#34;link&#34; href=&#34;https://tour.go-zh.org/flowcontrol/8&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ä¹‹å‰çš„ç»ƒä¹ &lt;/a&gt;ä¸­å¤åˆ¶ &lt;code&gt;Sqrt&lt;/code&gt; å‡½æ•°ï¼Œä¿®æ”¹å®ƒä½¿å…¶è¿”å› &lt;code&gt;error&lt;/code&gt; å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Sqrt&lt;/code&gt; æ¥å—åˆ°ä¸€ä¸ªè´Ÿæ•°æ—¶ï¼Œåº”å½“è¿”å›ä¸€ä¸ªé nil çš„é”™è¯¯å€¼ã€‚å¤æ•°åŒæ ·ä¹Ÿä¸è¢«æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;type ErrNegativeSqrt float64
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¹¶ä¸ºå…¶å®ç°&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;func (e ErrNegativeSqrt) Error() string
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ–¹æ³•ä½¿å…¶æ‹¥æœ‰ &lt;code&gt;error&lt;/code&gt; å€¼ï¼Œé€šè¿‡ &lt;code&gt;ErrNegativeSqrt(-2).Error()&lt;/code&gt; è°ƒç”¨è¯¥æ–¹æ³•åº”è¿”å› &lt;code&gt;&amp;quot;cannot Sqrt negative number: -2&amp;quot;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„:&lt;/strong&gt; åœ¨ &lt;code&gt;Error&lt;/code&gt; æ–¹æ³•å†…è°ƒç”¨ &lt;code&gt;fmt.Sprint(e)&lt;/code&gt; ä¼šè®©ç¨‹åºé™·å…¥æ­»å¾ªç¯ã€‚å¯ä»¥é€šè¿‡å…ˆè½¬æ¢ &lt;code&gt;e&lt;/code&gt; æ¥é¿å…è¿™ä¸ªé—®é¢˜ï¼š&lt;code&gt;fmt.Sprint(float64(e))&lt;/code&gt;ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹ &lt;code&gt;Sqrt&lt;/code&gt; å‡½æ•°ï¼Œä½¿å…¶æ¥å—ä¸€ä¸ªè´Ÿæ•°æ—¶ï¼Œè¿”å› &lt;code&gt;ErrNegativeSqrt&lt;/code&gt; å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ErrNegativeSqrt&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ErrNegativeSqrt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;cannot Sqrt negative number: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Sqrt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ErrNegativeSqrt&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ErrNegativeSqrt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;e&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sqrt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Sqrt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»ƒä¹ reader&#34;&gt;ç»ƒä¹ ï¼šReader&lt;/h2&gt;
&lt;p&gt;å®ç°ä¸€ä¸ª &lt;code&gt;Reader&lt;/code&gt; ç±»å‹ï¼Œå®ƒäº§ç”Ÿä¸€ä¸ª ASCII å­—ç¬¦ &lt;code&gt;&#39;A&#39;&lt;/code&gt; çš„æ— é™æµã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;golang.org/x/tour/reader&amp;#34;&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MyReader&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// TODO: ç»™ MyReader æ·»åŠ ä¸€ä¸ª Read([]byte) (int, error) æ–¹æ³•
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mr&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MyReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;A&amp;#39;&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Validate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MyReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»ƒä¹ rot13reader&#34;&gt;ç»ƒä¹ ï¼šrot13Reader&lt;/h2&gt;
&lt;p&gt;æœ‰ç§å¸¸è§çš„æ¨¡å¼æ˜¯ä¸€ä¸ª &lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/pkg/io/#Reader&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;io.Reader&lt;/code&gt;&lt;/a&gt; åŒ…è£…å¦ä¸€ä¸ª &lt;code&gt;io.Reader&lt;/code&gt;ï¼Œç„¶åé€šè¿‡æŸç§æ–¹å¼ä¿®æ”¹å…¶æ•°æ®æµã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œ&lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/pkg/compress/gzip/#NewReader&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;code&gt;gzip.NewReader&lt;/code&gt;&lt;/a&gt; å‡½æ•°æ¥å—ä¸€ä¸ª &lt;code&gt;io.Reader&lt;/code&gt;ï¼ˆå·²å‹ç¼©çš„æ•°æ®æµï¼‰å¹¶è¿”å›ä¸€ä¸ªåŒæ ·å®ç°äº† &lt;code&gt;io.Reader&lt;/code&gt; çš„ &lt;code&gt;*gzip.Reader&lt;/code&gt;ï¼ˆè§£å‹åçš„æ•°æ®æµï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç¼–å†™ä¸€ä¸ªå®ç°äº† &lt;code&gt;io.Reader&lt;/code&gt; å¹¶ä»å¦ä¸€ä¸ª &lt;code&gt;io.Reader&lt;/code&gt; ä¸­è¯»å–æ•°æ®çš„ &lt;code&gt;rot13Reader&lt;/code&gt;ï¼Œé€šè¿‡åº”ç”¨ &lt;a class=&#34;link&#34; href=&#34;http://en.wikipedia.org/wiki/ROT13&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;rot13&lt;/a&gt; ä»£æ¢å¯†ç å¯¹æ•°æ®æµè¿›è¡Œä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rot13Reader&lt;/code&gt; ç±»å‹å·²ç»æä¾›ã€‚å®ç° &lt;code&gt;Read&lt;/code&gt; æ–¹æ³•ä»¥æ»¡è¶³ &lt;code&gt;io.Reader&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;io&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;os&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;strings&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rot13Reader&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rot&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rot13Reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;m&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;M&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
				&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;n&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;z&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;N&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39;Z&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
				&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;13&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;NewReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Lbh penpxrq gur pbqr!&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rot13Reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Copy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stdout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»ƒä¹ å›¾åƒ&#34;&gt;ç»ƒä¹ ï¼šå›¾åƒ&lt;/h2&gt;
&lt;p&gt;è¿˜è®°å¾—ä¹‹å‰ç¼–å†™çš„&lt;a class=&#34;link&#34; href=&#34;https://tour.go-zh.org/moretypes/18&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å›¾ç‰‡ç”Ÿæˆå™¨&lt;/a&gt; å—ï¼Ÿæˆ‘ä»¬å†æ¥ç¼–å†™å¦å¤–ä¸€ä¸ªï¼Œä¸è¿‡è¿™æ¬¡å®ƒå°†ä¼šè¿”å›ä¸€ä¸ª &lt;code&gt;image.Image&lt;/code&gt; çš„å®ç°è€Œéä¸€ä¸ªæ•°æ®åˆ‡ç‰‡ã€‚&lt;/p&gt;
&lt;p&gt;å®šä¹‰ä½ è‡ªå·±çš„ &lt;code&gt;Image&lt;/code&gt; ç±»å‹ï¼Œå®ç°&lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/pkg/image/#Image&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¿…è¦çš„æ–¹æ³•&lt;/a&gt;å¹¶è°ƒç”¨ &lt;code&gt;pic.ShowImage&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Bounds&lt;/code&gt; åº”å½“è¿”å›ä¸€ä¸ª &lt;code&gt;image.Rectangle&lt;/code&gt; ï¼Œä¾‹å¦‚ &lt;code&gt;image.Rect(0, 0, w, h)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ColorModel&lt;/code&gt; åº”å½“è¿”å› &lt;code&gt;color.RGBAModel&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;At&lt;/code&gt; åº”å½“è¿”å›ä¸€ä¸ªé¢œè‰²ã€‚ä¸Šä¸€ä¸ªå›¾ç‰‡ç”Ÿæˆå™¨çš„å€¼ &lt;code&gt;v&lt;/code&gt; å¯¹åº”äºæ­¤æ¬¡çš„ &lt;code&gt;color.RGBA{v, v, 255, 255}&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;golang.org/x/tour/pic&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;image/color&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Image&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;pixels&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[][]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Bounds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Rectangle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Rect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ColorModel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RGBAModel&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;self&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;At&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;pixels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;RGBA&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Pic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dy&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[][]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([][]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;dx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;^&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;img&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Pic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;pic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;ShowImage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»ƒä¹ ç­‰ä»·äºŒå‰æŸ¥æ‰¾æ ‘&#34;&gt;ç»ƒä¹ ï¼šç­‰ä»·äºŒå‰æŸ¥æ‰¾æ ‘&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;1.&lt;/strong&gt; å®ç° &lt;code&gt;Walk&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.&lt;/strong&gt; æµ‹è¯• &lt;code&gt;Walk&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å‡½æ•° &lt;code&gt;tree.New(k)&lt;/code&gt; ç”¨äºæ„é€ ä¸€ä¸ªéšæœºç»“æ„çš„å·²æ’åºäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå®ƒä¿å­˜äº†å€¼ &lt;code&gt;k&lt;/code&gt;, &lt;code&gt;2k&lt;/code&gt;, &lt;code&gt;3k&lt;/code&gt;, &amp;hellip;, &lt;code&gt;10k&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªæ–°çš„ä¿¡é“ &lt;code&gt;ch&lt;/code&gt; å¹¶ä¸”å¯¹å…¶è¿›è¡Œæ­¥è¿›ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;go Walk(tree.New(1), ch)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åä»ä¿¡é“ä¸­è¯»å–å¹¶æ‰“å° 10 ä¸ªå€¼ã€‚åº”å½“æ˜¯æ•°å­— &lt;code&gt;1, 2, 3, ..., 10&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.&lt;/strong&gt; ç”¨ &lt;code&gt;Walk&lt;/code&gt; å®ç° &lt;code&gt;Same&lt;/code&gt; å‡½æ•°æ¥æ£€æµ‹ &lt;code&gt;t1&lt;/code&gt; å’Œ &lt;code&gt;t2&lt;/code&gt; æ˜¯å¦å­˜å‚¨äº†ç›¸åŒçš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.&lt;/strong&gt; æµ‹è¯• &lt;code&gt;Same&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Same(tree.New(1), tree.New(1))&lt;/code&gt; åº”å½“è¿”å› &lt;code&gt;true&lt;/code&gt;ï¼Œè€Œ &lt;code&gt;Same(tree.New(1), tree.New(2))&lt;/code&gt; åº”å½“è¿”å› &lt;code&gt;false&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Tree&lt;/code&gt; çš„æ–‡æ¡£å¯åœ¨&lt;a class=&#34;link&#34; href=&#34;https://godoc.org/golang.org/x/tour/tree#Tree&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;è¿™é‡Œ&lt;/a&gt;æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;golang.org/x/tour/tree&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Walk æ­¥è¿› tree t å°†æ‰€æœ‰çš„å€¼ä» tree å‘é€åˆ° channel chã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Walk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Tree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nf&#34;&gt;dfs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nb&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;dfs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Tree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nf&#34;&gt;dfs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Value&lt;/span&gt;
	&lt;span class=&#34;nf&#34;&gt;dfs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Same æ£€æµ‹æ ‘ t1 å’Œ t2 æ˜¯å¦å«æœ‰ç›¸åŒçš„å€¼ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Same&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;t2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Tree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;ch1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Walk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Walk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;t2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ch1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// ch1 å…³é—­å   forå¾ªç¯è‡ªåŠ¨è·³å‡º
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ch2&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Same&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;tree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»ƒä¹ web-çˆ¬è™«&#34;&gt;ç»ƒä¹ ï¼šWeb çˆ¬è™«&lt;/h2&gt;
&lt;p&gt;åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šä½¿ç”¨ Go çš„å¹¶å‘ç‰¹æ€§æ¥å¹¶è¡ŒåŒ–ä¸€ä¸ª Web çˆ¬è™«ã€‚&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹ &lt;code&gt;Crawl&lt;/code&gt; å‡½æ•°æ¥å¹¶è¡Œåœ°æŠ“å– URLï¼Œå¹¶ä¸”ä¿è¯ä¸é‡å¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æç¤º&lt;/em&gt;ï¼šä½ å¯ä»¥ç”¨ä¸€ä¸ª map æ¥ç¼“å­˜å·²ç»è·å–çš„ URLï¼Œä½†æ˜¯è¦æ³¨æ„ map æœ¬èº«å¹¶ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;sync&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Fetcher&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// Fetch è¿”å› URL çš„ body å†…å®¹ï¼Œå¹¶ä¸”å°†åœ¨è¿™ä¸ªé¡µé¢ä¸Šæ‰¾åˆ°çš„ URL æ”¾åˆ°ä¸€ä¸ª slice ä¸­ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nf&#34;&gt;Fetch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;urls&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// Crawl ä½¿ç”¨ fetcher ä»æŸä¸ª URL å¼€å§‹é€’å½’çš„çˆ¬å–é¡µé¢ï¼Œç›´åˆ°è¾¾åˆ°æœ€å¤§æ·±åº¦ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;CrawlRecord&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;   &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;mux&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Mutex&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WaitGroup&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;CrawlRecord&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Crawl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;depth&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fetcher&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Fetcher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// TODO: å¹¶è¡Œçš„æŠ“å– URLã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// TODO: ä¸é‡å¤æŠ“å–é¡µé¢ã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// ä¸‹é¢å¹¶æ²¡æœ‰å®ç°ä¸Šé¢ä¸¤ç§æƒ…å†µï¼š
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;depth&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	&lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mux&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mux&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	
	&lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;urls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fetcher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Fetch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;found: %s %q\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;urls&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mux&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Crawl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;depth&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fetcher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;mux&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nf&#34;&gt;Crawl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fetcher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;cr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;wg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Wait&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// fakeFetcher æ˜¯è¿”å›è‹¥å¹²ç»“æœçš„ Fetcherã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fakeFetcher&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fakeResult&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fakeResult&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;urls&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fakeFetcher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Fetch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;urls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Errorf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;not found: %s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// fetcher æ˜¯å¡«å……åçš„ fakeFetcherã€‚
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fetcher&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fakeFetcher&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fakeResult&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;s&#34;&gt;&amp;#34;The Go Programming Language&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/pkg/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
			&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/cmd/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/pkg/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fakeResult&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;s&#34;&gt;&amp;#34;Packages&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
			&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/cmd/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
			&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/pkg/fmt/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
			&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/pkg/os/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/pkg/fmt/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fakeResult&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;s&#34;&gt;&amp;#34;Package fmt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
			&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/pkg/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/pkg/os/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fakeResult&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;s&#34;&gt;&amp;#34;Package os&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
			&lt;span class=&#34;s&#34;&gt;&amp;#34;https://golang.org/pkg/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;æ—…è¡Œç»ˆç‚¹&#34;&gt;æ—…è¡Œç»ˆç‚¹&lt;/h1&gt;
&lt;p&gt;ä½ å¯ä»¥ä»&lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/doc/install/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å®‰è£… Go&lt;/a&gt; å¼€å§‹ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget -c https://dl.google.com/go/go1.14.2.linux-amd64.tar.gz -O - | sudo tar -xz -C /usr/local
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;vim /etc/profile
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;export PATH=$PATH:/usr/local/go/bin
export GOPROXY=https://goproxy.cn,direct
export GO111MODULE=on
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;source ~/.profile
go version
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸€æ—¦å®‰è£…äº† Goï¼ŒGo &lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/doc/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ–‡æ¡£&lt;/a&gt;æ˜¯ä¸€ä¸ªæå¥½çš„ åº”å½“ç»§ç»­é˜…è¯»çš„å†…å®¹ã€‚ å®ƒåŒ…å«äº†å‚è€ƒã€æŒ‡å—ã€è§†é¢‘ç­‰ç­‰æ›´å¤šèµ„æ–™ã€‚&lt;/p&gt;
&lt;p&gt;äº†è§£å¦‚ä½•ç»„ç»‡ Go ä»£ç å¹¶åœ¨å…¶ä¸Šå·¥ä½œï¼Œå‚é˜…&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/watch?v=XCsL89YtqCs&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ­¤è§†é¢‘&lt;/a&gt;ï¼Œæˆ–è€…é˜…è¯»&lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/doc/code.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¦‚ä½•ç¼–å†™ Go ä»£ç &lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ éœ€è¦æ ‡å‡†åº“æ–¹é¢çš„å¸®åŠ©ï¼Œè¯·å‚è€ƒ&lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/pkg/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;åŒ…æ‰‹å†Œ&lt;/a&gt;ã€‚å¦‚æœæ˜¯è¯­è¨€æœ¬èº«çš„å¸®åŠ©ï¼Œé˜…è¯»&lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/ref/spec&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;è¯­è¨€è§„èŒƒ&lt;/a&gt;æ˜¯ä»¶ä»¤äººæ„‰å¿«çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;è¿›ä¸€æ­¥æ¢ç´¢ Go çš„å¹¶å‘æ¨¡å‹ï¼Œå‚é˜… &lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/watch?v=f6kdp27TYZs&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go å¹¶å‘æ¨¡å‹&lt;/a&gt;(&lt;a class=&#34;link&#34; href=&#34;https://talks.go-zh.org/2012/concurrency.slide&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¹»ç¯ç‰‡&lt;/a&gt;)ä»¥åŠ&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/watch?v=QDDwwePbDtw&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ·±å…¥ Go å¹¶å‘æ¨¡å‹&lt;/a&gt;(&lt;a class=&#34;link&#34; href=&#34;https://talks.go-zh.org/2013/advconc.slide&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¹»ç¯ç‰‡&lt;/a&gt;)å¹¶é˜…è¯»&lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/doc/codewalk/sharemem/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;é€šè¿‡é€šä¿¡å…±äº«å†…å­˜&lt;/a&gt;çš„ä»£ç ä¹‹æ—…ã€‚&lt;/p&gt;
&lt;p&gt;æƒ³è¦å¼€å§‹ç¼–å†™ Web åº”ç”¨ï¼Œè¯·å‚é˜…&lt;a class=&#34;link&#34; href=&#34;https://vimeo.com/53221558&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ä¸€ä¸ªç®€å•çš„ç¼–ç¨‹ç¯å¢ƒ&lt;/a&gt;(&lt;a class=&#34;link&#34; href=&#34;https://talks.go-zh.org/2012/simple.slide&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¹»ç¯ç‰‡&lt;/a&gt;)å¹¶é˜…è¯»&lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/doc/articles/wiki/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ç¼–å†™ Web åº”ç”¨&lt;/a&gt;çš„æŒ‡å—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/doc/codewalk/functions/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å‡½æ•°ï¼šGo ä¸­çš„ä¸€ç­‰å…¬æ°‘&lt;/a&gt;å±•ç¤ºäº†æœ‰è¶£çš„å‡½æ•°ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.go-zh.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go åšå®¢&lt;/a&gt;æœ‰ç€ä¼—å¤šå…³äº Go çš„æ–‡ç« å’Œä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.mikespook.com/tag/golang/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mikespook çš„åšå®¢&lt;/a&gt;ä¸­æœ‰å¤§é‡ä¸­æ–‡çš„å…³äº Go çš„æ–‡ç« å’Œç¿»è¯‘ã€‚&lt;/p&gt;
&lt;p&gt;å¼€æºç”µå­ä¹¦ &lt;a class=&#34;link&#34; href=&#34;https://github.com/astaxie/build-web-application-with-golang&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go Web ç¼–ç¨‹&lt;/a&gt;å’Œ &lt;a class=&#34;link&#34; href=&#34;https://github.com/Unknwon/the-way-to-go_ZH_CN&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go å…¥é—¨æŒ‡å—&lt;/a&gt;èƒ½å¤Ÿå¸®åŠ©ä½ æ›´åŠ æ·±å…¥çš„äº†è§£å’Œå­¦ä¹  Go è¯­è¨€ã€‚&lt;/p&gt;
&lt;p&gt;è®¿é—® &lt;a class=&#34;link&#34; href=&#34;https://go-zh.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;go-zh.org&lt;/a&gt; äº†è§£æ›´å¤šå†…å®¹ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€è®ºæ–‡ç¬”è®°ã€‘PolarDB-Serverlessè®ºæ–‡é˜…è¯»æŠ¥å‘Š</title>
        <link>https://tweakzx.github.io/p/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0polardb-serverless%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E6%8A%A5%E5%91%8A/</link>
        <pubDate>Wed, 22 Dec 2021 14:17:12 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0polardb-serverless%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E6%8A%A5%E5%91%8A/</guid>
        <description>&lt;img src="https://2021.sigmod.org/images/2021sigmod-logo1.jpg" alt="Featured image of post ã€è®ºæ–‡ç¬”è®°ã€‘PolarDB-Serverlessè®ºæ–‡é˜…è¯»æŠ¥å‘Š" /&gt;&lt;h1 id=&#34;polardb-serverlessè®ºæ–‡é˜…è¯»æŠ¥å‘Š&#34;&gt;PolarDB Serverlessè®ºæ–‡é˜…è¯»æŠ¥å‘Š&lt;/h1&gt;
&lt;h2 id=&#34;æ‘˜è¦&#34;&gt;æ‘˜è¦&lt;/h2&gt;
&lt;p&gt;æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ä¸Šäº‘æ˜¯è¿‘æœŸå¾ˆç«çš„ç ”ç©¶è¶‹åŠ¿ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥è·å¾—æ›´é«˜çš„å¼¹æ€§ï¼Œå¯ç”¨æ€§ä»¥åŠæ›´ä½çš„æˆæœ¬ï¼Œä¼ ç»Ÿçš„ç‹¬å—çš„æ•°æ®åº“æ¶æ„å¾ˆéš¾æ»¡è¶³è¿™æ ·çš„è¦æ±‚ã€‚é«˜é€Ÿç½‘ç»œä¸æ–°çš„å†…å­˜æŠ€æœ¯ï¼ˆä¾‹å¦‚RDMAï¼‰çš„å‘å±•ï¼Œç»™åˆ†æ•£å¼æ•°æ®åº“å¸¦æ¥äº†å¯èƒ½ï¼šå®ƒå°†åŸå…ˆçš„ç‹¬å—çš„æœåŠ¡å™¨èµ„æºåˆ†ç¦»è§£è€¦åˆ°èµ„æºæ± ä¸­ï¼Œå†é€šè¿‡é«˜é€Ÿç½‘ç»œè¿æ¥èµ·æ¥ã€‚ä¸‹ä¸€ä»£çš„äº‘åŸç”Ÿæ•°æ®åº“å°±æ˜¯ä¸ºäº†åˆ†æ•£åŒ–çš„æ•°æ®ä¸­å¿ƒè€Œè®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;PolarDB Serverless éµå¾ªåˆ†æ•£å¼çš„è®¾è®¡èŒƒå¼è€Œè®¾è®¡ï¼Œè§£è€¦äº†è®¡ç®—èŠ‚ç‚¹çš„CPUï¼Œå†…å­˜ï¼Œå­˜å‚¨èµ„æºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¯ç§èµ„æºå¯ä»¥éšéœ€æ±‚è€Œç‹¬ç«‹çš„å¢é•¿æˆ–ç¼©å°ï¼Œä¿éšœå¯é æ€§çš„åŒæ—¶ï¼Œå¯ä»¥è¿›è¡Œå¤šç»´åº¦çš„æŒ‰éœ€ä¾›åº”ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ—¶é‡‡ç”¨äº†ä¼˜åŒ–ç­–ç•¥å¦‚ä¹è§‚é”å’Œé¢„å–ç­–ç•¥æ¥æ”¹å–„æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;è¿˜å¯ä»¥å®ç°æ›´å¿«çš„æ•…éšœæ¢å¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä»‹ç»&#34;&gt;ä»‹ç»&lt;/h2&gt;
&lt;h3 id=&#34;ä½¿ç”¨äº‘æ•°æ®åº“çš„ä¸‰ä¸ªå¥½å¤„&#34;&gt;ä½¿ç”¨äº‘æ•°æ®åº“çš„ä¸‰ä¸ªå¥½å¤„ï¼š&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‰éœ€ä»˜è´¹å¯ä»¥ä½¿å¾—ç”¨æˆ·å‡å°å¼€æ”¯ã€‚&lt;/li&gt;
&lt;li&gt;æ›´é«˜çš„èµ„æºå¼¹æ€§å¯ä»¥åº”å¯¹çŸ­æš‚çš„èµ„æºä½¿ç”¨é«˜å³°æœŸã€‚&lt;/li&gt;
&lt;li&gt;æ›´å¿«çš„å‡çº§ä¸æ›´å¿«çš„é”™è¯¯ä¿®å¤ã€‚å¿«é€Ÿçš„å‡çº§è¿­ä»£å¯ä»¥ä¿è¯äº§å“ç«äº‰åŠ›ï¼Œé”™è¯¯ä¿®å¤å¯ä»¥åœ¨ä¸å½±å“äº§å“å¯ç”¨æ€§çš„å‰æä¸‹è¿›è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç»å…¸çš„äº‘æ•°æ®åº“çš„æ¶æ„&#34;&gt;ç»å…¸çš„äº‘æ•°æ®åº“çš„æ¶æ„&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;monolithic machine ç‹¬å—çš„æœºå™¨
&lt;ul&gt;
&lt;li&gt;ç‰¹ç‚¹ï¼šæ‰€æœ‰çš„èµ„æºéƒ½æ˜¯ç´§è€¦åˆçš„&lt;/li&gt;
&lt;li&gt;é—®é¢˜ï¼š
&lt;ul&gt;
&lt;li&gt;åœ¨è¿›è¡Œæ•°æ®åº“å®ä¾‹åˆ°æœºå™¨çš„åˆ†å‘è¿‡ç¨‹ä¸­è¦è§£å†³ä¸€ä¸ªè£…ç®±é—®é¢˜&lt;/li&gt;
&lt;li&gt;æ€»æ˜¯æœ‰ç¢ç‰‡åŒ–çš„èµ„æºï¼Œéš¾ä»¥è¾¾åˆ°é«˜çš„ä½¿ç”¨ç‡&lt;/li&gt;
&lt;li&gt;è¿è¡Œæ—¶ä¸èƒ½æ ¹æ®è´Ÿè½½è°ƒæ•´èµ„æº&lt;/li&gt;
&lt;li&gt;èµ„æºé—´çš„å‘½è¿å…±äº«ï¼Œä¸€ä¸ªèµ„æºçš„æ•…éšœä¼šå¯¼è‡´å…¶ä»–èµ„æºçš„æ•…éšœï¼Œä¸èƒ½ç‹¬ç«‹é€æ˜åœ°ä¿®å¤æ•…éšœï¼Œå¯¼è‡´ä¿®å¤æ—¶é—´å¾ˆé•¿&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å­˜ç®—åˆ†ç¦»çš„æ¶æ„ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸¤ç§ï¼š
&lt;ul&gt;
&lt;li&gt;virtual machine with remote disk æ­è½½è¿œç¨‹ç¡¬ç›˜çš„è™šæ‹Ÿæœº&lt;/li&gt;
&lt;li&gt;shared storage å…±äº«å­˜å‚¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¼˜ç‚¹
&lt;ul&gt;
&lt;li&gt;DBaaSå¯ä»¥æé«˜å­˜å‚¨æ± çš„ä½¿ç”¨ç‡&lt;/li&gt;
&lt;li&gt;å…±äº«å­˜å‚¨å¯ä»¥è¿›ä¸€æ­¥å‡å°‘æˆæœ¬ï¼šåŸæ•°æ®ä¸åªè¯»å¤‡ä»½å¯ä»¥å…±äº«å­˜å‚¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é—®é¢˜
&lt;ul&gt;
&lt;li&gt;CPUå’Œå†…å­˜çš„è£…ç®±é—®é¢˜ä¾æ—§å­˜åœ¨&lt;/li&gt;
&lt;li&gt;ç¼ºä¹çµæ´»å¯æ”¾ç¼©çš„å†…å­˜èµ„æº&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªåªè¯»å¤‡ä»½åœ¨å†…å­˜ä¸­éƒ½è¦æœ‰å†—ä½™çš„å†…å­˜å¼€é”€&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°æ¶æ„åˆ†æ•£æ¶æ„disaggragation-architecture&#34;&gt;æœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°æ¶æ„ï¼Œåˆ†æ•£æ¶æ„ï¼ˆdisaggragation architecture)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è¿è¡Œåœ¨åˆ†æ•£çš„æ•°æ®ä¸­å¿ƒï¼ˆDDCï¼‰ï¼ŒCPUã€å†…å­˜å’Œå­˜å‚¨è§£è€¦ï¼Œèµ„æºé—´é€šè¿‡é«˜é€Ÿç½‘ç»œè¿æ¥&lt;/li&gt;
&lt;li&gt;æ•ˆæœ
&lt;ul&gt;
&lt;li&gt;æ¯ä¸€ç§èµ„æºéƒ½å¯ä»¥æé«˜å…¶åˆ©ç”¨ç‡ï¼Œå¯ä»¥ç‹¬ç«‹åœ°æ”¾ç¼©å…¶èµ„æºé‡&lt;/li&gt;
&lt;li&gt;è§£å†³äº†èµ„æºé—´çš„å‘½è¿å…±äº«é—®é¢˜ï¼Œèµ„æºæ•…éšœå¯ä»¥è¢«ç‹¬ç«‹ä¿®å¤&lt;/li&gt;
&lt;li&gt;æ•°æ®é¡µå¯ä»¥åœ¨è¿œç¨‹å†…å­˜æ± ä¸­è¢«å…±äº«ï¼Œæ‰€ä»¥è§£å†³äº†å¤‡ä»½çš„å†…å­˜å†—ä½™é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;äº‘åŸç”Ÿæ•°æ®åº“&#34;&gt;äº‘åŸç”Ÿæ•°æ®åº“&lt;/h3&gt;
&lt;p&gt;å¤šæ•°çš„äº‘æ•°æ®åº“æ˜¯åŸºäºå…±äº«å­˜å‚¨çš„æ¶æ„ï¼Œå†…å­˜å’ŒCPUç»‘æˆæœ€å°çš„èµ„æºå•å…ƒï¼Œåªèƒ½æŒ‰ç…§æœ€å°èµ„æºå•å…ƒçš„ç²’åº¦æ¥å¢é•¿å’Œé‡Šæ”¾èµ„æºï¼Œè¿™ä¼šå¸¦æ¥å¾ˆå¤šçš„èµ„æºæµªè´¹ã€‚&lt;/p&gt;
&lt;p&gt;PolarDB Serverlessåˆ™æ˜¯éµå¾ªåˆ†æ•£æ¶æ„çš„ä¸€ä¸ªäº‘åŸç”Ÿæ•°æ®åº“&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¼•å…¥äº†å¤šç§Ÿæˆ·å¯æ”¾ç¼©çš„å†…å­˜æ± ï¼Œå¯ä»¥è¿›è¡Œå†…å­˜é¡µçš„åˆ†é…ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;èŠ‚ç‚¹ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ª RW node(å­˜åŸæ•°æ®é¡µèŠ‚ç‚¹)&lt;/li&gt;
&lt;li&gt;å¤šä¸ª RO nodeï¼ˆå­˜åªè¯»å¤‡ä»½èŠ‚ç‚¹ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¢ä¸´çš„æŒ‘æˆ˜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ·»åŠ è¿œç¨‹å†…å­˜ä¹‹åï¼Œç³»ç»Ÿå¯ä»¥æ­£ç¡®åœ°å¤„ç†äº‹åŠ¡
&lt;ul&gt;
&lt;li&gt;å½“å†™åè¯»æ—¶ï¼Œç³»ç»Ÿä¸åº”è¯¥é”™è¿‡ä»»ä½•ä¸€ä¸ªupdateã€‚ä½¿ç”¨ç¼“å­˜å¤±æ•ˆæœºåˆ¶æ¥ä¿è¯å†™åæ‰€æœ‰åœ°èŠ‚ç‚¹ä¼šæ›´æ–°&lt;/li&gt;
&lt;li&gt;åœ¨æ›´æ–°B+æ ‘åœ°ç´¢å¼•çš„æ—¶å€™ï¼Œä½¿ç”¨global latchå…¨å±€é¡µé”æ¥ä¿è¯ROèŠ‚ç‚¹ä¸èƒ½çœ‹åˆ°ä¸ä¸€è‡´çš„ç´¢å¼•ç»“æ„&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è¯»è§†å›¾æ¥ç¡®ä¿ROèŠ‚ç‚¹ä¸ä¼šè¯»åˆ°æœªæäº¤çš„äº‹åŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é«˜æ•ˆåœ°æ‰§è¡Œäº‹åŠ¡
&lt;ul&gt;
&lt;li&gt;å¹¿æ³›ä½¿ç”¨äº†RDMAæ“ä½œï¼Œå°¤å…¶æ˜¯one-sided RDMA verbs&lt;/li&gt;
&lt;li&gt;ä¸ºäº†æé«˜å¹¶å‘ï¼Œä½¿ç”¨äº†ä¹è§‚é”&lt;/li&gt;
&lt;li&gt;å­˜å‚¨æ–¹é¢ä½¿ç”¨äº†page materialization offloadingæŠ€æœ¯ï¼Œä½¿ç”¨redoæ—¥å¿—ç”Ÿæˆpage&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨äº†é¢„å–æ¥æé«˜æœ¬åœ°å‘½ä¸­ç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ„å»ºå¯ä¿¡ç³»ç»Ÿ
&lt;ul&gt;
&lt;li&gt;å¯¹ä¸åŒçš„èŠ‚ç‚¹éƒ½è®¾è®¡äº†ç­–ç•¥æ¥å¤„ç†å•ç‚¹æ•…éšœ&lt;/li&gt;
&lt;li&gt;å› ä¸ºå†…å­˜å’Œå­˜å‚¨çš„çŠ¶æ€æ˜¯è§£è€¦çš„ï¼Œæ‰€ä»¥ä¿®å¤å´©æºƒçš„é€Ÿåº¦æ¯”ç‹¬å—æ¶æ„è¦å¿«5.3å€&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;/h2&gt;
&lt;h3 id=&#34;polardb&#34;&gt;PolarDB&lt;/h3&gt;
&lt;p&gt;PolarDBæ˜¯ä¸€ä¸ªåŸºäºå…±äº«å†…å­˜æ¶æ„äº‘åŸç”Ÿæ•°æ®åº“&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PolarFSæ˜¯ä¸€ä¸ªæŒä¹…åŒ–çš„åŸå­æ“ä½œçš„å¯ä¼¸ç¼©çš„åˆ†å¸ƒå¼å…±äº«å­˜å‚¨ã€‚æ˜¯ç»Ÿä¸€çš„å­˜å‚¨èµ„æºæ± ï¼Œå…¶æä¾›è™šæ‹Ÿçš„volumeï¼Œæ¯ä¸ªvolumeåˆ’åˆ†ä¸º10GBå¤§å°çš„chunkåˆ†å¸ƒåœ¨ä¸åŒçš„èŠ‚ç‚¹ã€‚æ¯ä¸ªvolumeæœ€å¤š10000ä¸ªchunkï¼Œå³100Tçš„å®¹é‡ã€‚æ¯ä¸ªchunkä¸‰å‰¯æœ¬ï¼Œç”¨parallel raftæä¾›çº¿æ€§ä¸€è‡´æ€§ã€‚&lt;/li&gt;
&lt;li&gt;RWå’ŒROèŠ‚ç‚¹ä¹‹é—´é€šè¿‡redoæ—¥å¿—æ¥åŒæ­¥å†…å­˜çŠ¶æ€ï¼Œé€šè¿‡LSNï¼ˆlog sequence numberï¼‰æ¥åè°ƒä¸€è‡´æ€§ã€‚RWå’ŒROèŠ‚ç‚¹ä¸Šæœ‰è´Ÿè´£å¤„ç†SQLè¯­å¥çš„å¤„ç†å™¨å’Œäº‹åŠ¡å¼•æ“ï¼ˆInnoDBï¼ŒX-Engineï¼‰ï¼Œä»¥åŠä¸€ä¸ªç¼“å­˜æ± æ¥æœåŠ¡æŸ¥è¯¢ä¸äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰å¤šä¸ªæ— çŠ¶æ€çš„ä»£ç†èŠ‚ç‚¹è´Ÿè´£é€æ˜çš„è´Ÿè½½å‡è¡¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211222201006368.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211222201006368.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20211222201006368&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20211222201006368&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;åˆ†æ•£åŒ–çš„æ•°æ®ä¸­å¿ƒddc&#34;&gt;åˆ†æ•£åŒ–çš„æ•°æ®ä¸­å¿ƒDDC&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¿æ¥æŠ€æœ¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨åˆ†æ•£åŒ–çš„æ•°æ®ä¸­å¿ƒï¼Œè®¡ç®—èŠ‚ç‚¹ã€å†…å­˜ç»“ç‚¹ä»¥åŠå­˜å‚¨èŠ‚ç‚¹éƒ½æ˜¯ç”±é«˜é€Ÿç½‘ç»œè¿æ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RDMAï¼ˆRemote Direct Memory Accessï¼‰æŠ€æœ¯ç»™å¤§å‹çš„DDCå¸¦æ¥äº†å¯èƒ½&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å±‚çº§ç»“æ„&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†ä¸ºä¸‰å±‚ï¼šspine layerã€leaf layerã€ToR layer&lt;/li&gt;
&lt;li&gt;æ¯ä¸€ä¸ªToRèŠ‚ç‚¹é“¾æ¥48å°ä¸»æœºï¼ŒToRçš„äº¤æ¢æœºåˆ†åˆ«è¿æ¥LeafèŠ‚ç‚¹çš„äº¤æ¢æœºï¼Œç„¶åLeafçš„äº¤æ¢æœºåˆå»é“¾æ¥Spineå±‚çš„äº¤æ¢æœºã€‚&lt;/li&gt;
&lt;li&gt;æ¯å°ä¸»æœºéƒ½ä¼šé…æœ‰åŒç«¯å£çš„RDMAç½‘å¡ï¼Œç”¨äºé“¾æ¥ä¸¤ä¸ªToRèŠ‚ç‚¹æ¥é¿å…å•ç‚¹æ•…éšœã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªleaf äº¤æ¢æœºç»„åŒ…å«äº’ä¸ºå¤‡ä»½çš„åŒæ—¶å·¥ä½œçš„å¤šä¸ªleafäº¤æ¢æœº&lt;/li&gt;
&lt;li&gt;ç”±ä¸€ä¸ªleafäº¤æ¢æœºç»„ç®¡ç†æ§åˆ¶çš„æ‰€æœ‰çš„äº¤æ¢æœºä¸æœåŠ¡å™¨ç§°ä¸ºä¸€ä¸ªPoDï¼ˆPoint of Deliveryï¼‰ã€‚ä¸€ä¸ªPoDæœ€å¤šæœ‰32ä¸ªleafäº¤æ¢æœºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;èµ„æºéƒ¨ç½²æ–¹å¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•ä¸ªæ•°æ®åº“å®ä¾‹æ‰€éœ€çš„å†…å­˜å’Œå­˜å‚¨ä¼šéƒ¨ç½²åœ¨ä¸€ä¸ªPoDä¸‹&lt;/li&gt;
&lt;li&gt;ä¸åŒå®ä¾‹éƒ¨ç½²åœ¨ä¸åŒçš„PoDä¸‹&lt;/li&gt;
&lt;li&gt;è®¡ç®—å’Œå†…å­˜èµ„æºæ€»æ˜¯å€¾å‘äºéƒ¨ç½²åœ¨åŒä¸€ä¸ªToRä¸‹ï¼Œä»¥è·å¾—æ›´ä½çš„å»¶è¿Ÿä¸æ›´å°‘çš„é¡µæŠ–åŠ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211222201043429.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211222201043429.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20211222201043429&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20211222201043429&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ— æœåŠ¡æ•°æ®åº“&#34;&gt;æ— æœåŠ¡æ•°æ®åº“&lt;/h3&gt;
&lt;p&gt;æ— æœåŠ¡æ•°æ®åº“æ˜¯äº‘åŸç”Ÿæ•°æ®åº“çš„é«˜å¼¹æ€§å˜ç§ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å®ç°èµ„æºçš„æŒ‰éœ€åˆ†é…&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‡ªåŠ¨æ‰©ç¼© auto-scaling
&lt;ul&gt;
&lt;li&gt;ç°å­˜çš„æ— æœåŠ¡æ•°æ®åº“çš„æ‰©ç¼©å®¹å› ä¸ºæ˜¯åŸºäºå…±äº«å­˜å‚¨çš„æ¶æ„ï¼Œæ‰€ä»¥æ‰©ç¼©å®¹å—åˆ°é™åˆ¶ã€‚ç”±äºå†…å­˜å’ŒCPUèµ„æºæ€»æ˜¯æ·±åº¦ç»‘å®šåœ¨ä¸€ä¸ªèµ„æºå•ä½ä¸Šï¼Œæ‰©ç¼©å®¹ä¹Ÿåªèƒ½æŒ‰ç…§èµ„æºå•ä½ä½œä¸ºè°ƒåŠ¨ç²’åº¦ã€‚æ‰€ä»¥CPUå’Œå†…å­˜èµ„æºæ€»æ˜¯ä¸èƒ½å¾—åˆ°å……åˆ†åˆ©ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;åˆ†ææ€§æ•°æ®åº“å¯¹å†…å­˜çš„è¦æ±‚æ¯”è¾ƒé«˜ï¼Œåªéœ€è¦å°‘é‡çš„CPUèµ„æºæ¥å®šæœŸåŒæ­¥æ›´æ–°æ•°æ®&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡æ€§æ•°æ®åº“å°‘é‡çš„å†…å­˜å°±å¯ä»¥ä¿è¯ç¼“å­˜å‘½ä¸­ç‡ï¼Œä½†éœ€è¦æ›´å¤šçš„CPUèµ„æºæ¥åº”å¯¹è®¿é—®çš„é«˜å³°æ—¶åˆ»&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨æš‚åœ auto-pause
&lt;ul&gt;
&lt;li&gt;ç°å­˜çš„æ— æœåŠ¡æ•°æ®åº“çš„è‡ªåŠ¨æš‚åœä¹Ÿæ˜¯å—é™çš„ï¼ŒCPUå’Œå†…å­˜èµ„æºå¿…é¡»è¢«åŒæ—¶é‡Šæ”¾&lt;/li&gt;
&lt;li&gt;åœ¨åˆ†æ•£å¼æ¶æ„ä¸‹ï¼ŒCPUå’Œå†…å­˜ä¸å†å…±äº«å‘½è¿ã€‚ä¸šåŠ¡ä½å³°æœŸï¼Œå†…å­˜å¯ä»¥ä¸å¿…é‡Šæ”¾ï¼Œé¿å…äº†é‡æ–°åŠ è½½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ‰©å®¹é€æ˜æ€§ scaling transparency
&lt;ul&gt;
&lt;li&gt;é€æ˜æ€§å³åœ¨æ‰©ç¼©å®¹çš„æ—¶å€™éœ€è¦ä¿è¯å®¢æˆ·çš„åœºæ™¯ä¸èƒ½ä¸­æ–­æˆ–è€…æ€§èƒ½å‡ºç°ä¸¥é‡å½±å“&lt;/li&gt;
&lt;li&gt;åˆ†æ•£å¼æ¶æ„ä¸‹ï¼Œä¸­é—´ä¸´æ—¶çŠ¶æ€å¦‚è„é¡µã€äº‹åŠ¡çŠ¶æ€å¦‚ç‰ˆæœ¬ä¿¡æ¯timestampã€é€»è¾‘é”ã€queryä¸­é—´ç»“æœéƒ½å¯ä»¥ä¿å­˜åœ¨å…±äº«å†…å­˜å±‚ï¼Œç»™å®ç°æ‰©ç¼©å®¹çš„é€æ˜æ€§æä¾›äº†æ›´å¥½çš„æ¡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;PolarDB Serverless ç›®å‰å°†è„é¡µå­˜åœ¨å…±äº«å†…å­˜é‡Œï¼Œå…¶ä»–çš„ä¸´æ—¶çŠ¶æ€æœŸå¾…åç»­çš„å·¥ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è®¾è®¡&#34;&gt;è®¾è®¡&lt;/h2&gt;
&lt;p&gt;PolarDB Serverless åŸºäºPolarDBå¼€å‘çš„åˆ†æ•£å¼æ¶æ„çš„äº‘åŸç”Ÿæ•°æ®åº“ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»„æˆï¼šå¤šä¸ªä»£ç†èŠ‚ç‚¹ï¼Œä¸€ä¸ªRWèŠ‚ç‚¹ï¼Œå¤šä¸ªROèŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨PolarFSæ¥åšå…±äº«å­˜å‚¨&lt;/li&gt;
&lt;li&gt;å’ŒPolarDBçš„æœ€å¤§ä¸åŒåœ¨äºä½¿ç”¨äº†è¿œç¨‹å†…å­˜æ± ï¼ˆå…±äº«å†…å­˜ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨å…±äº«å†…å­˜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¥½å¤„
&lt;ul&gt;
&lt;li&gt;RWå’ŒROå…±ç”¨æ•°æ®é¡µï¼Œçœå»äº†æ¯ä¸ªèŠ‚ç‚¹è‡ªå·±ä¿å­˜å‰¯æœ¬ï¼Œæé«˜äº†å†…å­˜çš„ä½¿ç”¨æ•ˆç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åå¤„ï¼ˆperformance penaltyï¼‰
&lt;ul&gt;
&lt;li&gt;è¿œç¨‹å†…å­˜çš„è®¿é—®é€Ÿåº¦è¿œè¿œä½äºæœ¬åœ°å†…å­˜ï¼›è§£å†³æ–¹æ¡ˆï¼šåˆ†å±‚å†…å­˜ç³»ç»Ÿå’Œé¢„å–æŠ€æœ¯&lt;/li&gt;
&lt;li&gt;ç§æœ‰æ•°æ®æ”¾åœ¨å…¬å…±èµ„æºä¸Šï¼Œéœ€è¦æœ‰è·¨èŠ‚ç‚¹çš„äº’æ–¥ä¿æŠ¤ï¼›è§£å†³æ–¹æ¡ˆï¼šå¹¿æ³›ä½¿ç”¨å•è¾¹çš„RDMAè°“è¯å’Œä¹è§‚åè®®æ¥é¿å…ä½¿ç”¨å…¨å±€é”ï¼ˆglobal latchï¼‰&lt;/li&gt;
&lt;li&gt;é¡µçš„ä¼ è¾“å’Œç½‘ç»œå¸¦æ¥äº†è´Ÿæ‹…ã€‚è§£å†³æ–¹æ¡ˆï¼šå…ˆå°†redo logå†™åˆ°å­˜å‚¨å±‚ï¼Œå†å¼‚æ­¥åœ°é€šè¿‡æ—¥å¿—å°†é¡µç‰©è´¨åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åˆ†æ•£åŒ–å†…å­˜&#34;&gt;åˆ†æ•£åŒ–å†…å­˜&lt;/h3&gt;
&lt;h4 id=&#34;è¿œç¨‹å†…å­˜è®¿é—®æ¥å£&#34;&gt;è¿œç¨‹å†…å­˜è®¿é—®æ¥å£&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;page_register&lt;/strong&gt;: é¡µçš„å¼•ç”¨è®¡æ•°å¢ä¸€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;page_unregister&lt;/strong&gt;: é¡µçš„å¼•ç”¨è®¡æ•°å‡ä¸€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;page_read&lt;/strong&gt;: ä½¿ç”¨å•è¾¹RDMAè°“è¯å°†é¡µä»è¿œç¨‹å†…å­˜è¯»å–åˆ°æœ¬åœ°&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;page_write&lt;/strong&gt;: ä½¿ç”¨å•è¾¹RDMAè°“è¯å°†é¡µä»æœ¬åœ°å†™åˆ°è¿œç¨‹å†…å­˜&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;page_invalidation&lt;/strong&gt;: ä½¿æ‰€æœ‰ROèŠ‚ç‚¹çš„æœ¬åœ°çš„å†…å­˜å‰¯æœ¬å¤±æ•ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è¿œç¨‹å†…å­˜ç®¡ç†&#34;&gt;è¿œç¨‹å†…å­˜ç®¡ç†&lt;/h4&gt;
&lt;p&gt;å†…å­˜çš„åˆ†é…å•å…ƒæ˜¯ä¸€ä¸ªslabï¼Œä¸€ä¸ªslabçš„å¤§å°æ˜¯1GB&lt;/p&gt;
&lt;p&gt;å‡ ç§æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Page Arrayï¼ˆPAï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ¯ä¸€ä¸ªslabç”±é¡µæ•°ç»„ç»„æˆï¼Œé¡µæ•°ç»„æ˜¯ç‰©ç†åœ°å€è¿ç»­çš„ç”±16KBçš„é¡µç»„æˆçš„æ•°ç»„ã€‚&lt;/li&gt;
&lt;li&gt;PAçš„åœ°å€ä¼šæ³¨å†Œåˆ°RDMAçš„ç½‘å¡ä¸Šï¼Œæ‰€ä»¥å¯ä»¥è¢«RDMAè¿œç¨‹è®¿é—®&lt;/li&gt;
&lt;li&gt;è´Ÿè´£æä¾›slabè®¿é—®çš„èŠ‚ç‚¹ä¹Ÿå«slab nodeï¼Œç¬¬ä¸€ä¸ªslab node ä¹Ÿå«home node&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Page Address Tableï¼ˆPATï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå­˜å‚¨æ¯ä¸€é¡µçš„ä½ç½®ï¼ˆslab id ä¸ç‰©ç†åœ°å€ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Page Invalidation Bitmap (PIB)&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªä½å›¾ï¼Œå¯¹åº”PATçš„æ¯ä¸€é¡¹è®°å½•invalidation bitï¼Œ0è¡¨ç¤ºå†…å­˜ä¸­çš„æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œ1è¡¨ç¤ºä¸æ˜¯æœ€æ–°ç‰ˆæœ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Page Reference Directory(PRD)&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªmapï¼Œå¯¹åº”äºæ¯ä¸ªPATé¡¹ï¼Œè®°å½•å¼•ç”¨äº†è¿™ä¸ªé¡µçš„èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Page Latch Table(PLT)&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹äºPATä¸­çš„æ¯ä¸€é¡¹ï¼Œç®¡ç†å…¶é¡µé”ï¼ˆpage latchï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ˜¯ä¸€ä¸ªå…¨å±€çš„ç‰©ç†é”ï¼Œç”¨äºå¤šä¸ªæ•°æ®åº“èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œä¿æŠ¤ä¸åŒæ­¥è¯»å†™&lt;/li&gt;
&lt;li&gt;å°¤å…¶ç”¨äºä¿æŠ¤B+æ ‘çš„ç»“æ„ä¸€è‡´æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;pageåˆ†é…è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•°æ®åº“å‘home node å‘é€page registerè¯·æ±‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™éå†slabæ‰¾åˆ°æœ‰ç©ºé—²çš„slabï¼Œå¦‚æœéƒ½æ²¡æœ‰ç©ºé—²åˆ™ä½¿ç”¨LRUç®—æ³•æ·˜æ±°æ‰ä¸€äº›page&lt;/li&gt;
&lt;li&gt;å†™å…¥åï¼Œå°†pageçš„ä¸ºä½ç½®ä¿¡æ¯å†™å…¥åˆ°PATï¼Œè¿”å›pageçš„è¿œç¨‹åœ°å€å’Œpage latch&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰©ç¼©å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰©å®¹ï¼šhome node è¯·æ±‚DBaaSåˆ†é…æ–°çš„slabï¼Œæ‰©å±•buffer poolï¼ŒPATï¼ŒPIBå’ŒPRD&lt;/li&gt;
&lt;li&gt;ç¼©å®¹ï¼špageé€šè¿‡LRUè¿›è¡Œæ·˜æ±°ï¼Œæ— ç”¨çš„slabå°†è¢«å›æ”¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æœ¬åœ°ç¼“å­˜&#34;&gt;æœ¬åœ°ç¼“å­˜&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä»¥pageä¸ºå•ä½å°†è¿œç¨‹å†…å­˜ç¼“å­˜åˆ°æœ¬åœ°&lt;/li&gt;
&lt;li&gt;å¦‚æœpageä¸åœ¨è¿œç¨‹å†…å­˜ä¸Šï¼Œè¿›ç¨‹ä¼šä»Polar FSè¯»å–å†…å®¹åˆ°æœ¬åœ°ç¼“å­˜ï¼Œç„¶åå†å†™å›åˆ°è¿œç¨‹å†…å­˜ã€‚ï¼ˆå­˜å‚¨å’Œå†…å­˜ä¸å‘ç”Ÿç›´æ¥æ¥è§¦ï¼‰&lt;/li&gt;
&lt;li&gt;ä¸æ˜¯æ‰€æœ‰çš„pageéƒ½è¦å†™å…¥è¿œç¨‹å†…å­˜ï¼Œä¾‹å¦‚å…¨è¡¨æ‰«æï¼Œè¿™äº›pageä¸å¤ªä¼šå†æ¬¡è®¿é—®&lt;/li&gt;
&lt;li&gt;æœ¬åœ°å‘ç”Ÿmissï¼Œè¿›ç¨‹è¦ç­‰å¾…è¯»å–è¿œç¨‹å†…å­˜ï¼ˆå¯ä»¥åˆ©ç”¨é¢„å–æŠ€æœ¯ï¼‰&lt;/li&gt;
&lt;li&gt;æœ¬åœ°çš„ç¼“å­˜å†™æ»¡åä½¿ç”¨LRUç®—æ³•è¿›è¡Œæ·˜æ±°ã€‚å¦‚æœpageæ²¡æœ‰ä¿®æ”¹è¿‡å¯ä»¥ç›´æ¥é‡Šæ”¾ã€‚å¦‚æœpageä¿®æ”¹è¿‡ï¼Œé‚£å°±å†™å›åå†é‡Šæ”¾ã€‚å¼•ç”¨è®¡æ•°å‡ä¸€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ç¼“å­˜ä¸€è‡´æ€§&#34;&gt;ç¼“å­˜ä¸€è‡´æ€§&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ROèŠ‚ç‚¹ä¸èƒ½ç›´æ¥è®¿é—®RWèŠ‚ç‚¹çš„æœ¬åœ°ç¼“å­˜ï¼Œåªèƒ½é€šè¿‡è·å–æœ€æ–°çš„redo logæ¥åœ¨æœ¬åœ°ç‰©è´¨åŒ–pageæ¥è·å–æœ€æ–°çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœRWèŠ‚ç‚¹å°†ä¿®æ”¹è¿‡çš„æ•°æ®å†™å›è¿œç¨‹å†…å­˜åï¼ŒROèŠ‚ç‚¹è‡ªç„¶æ˜¯ä¸éœ€è¦è¯»å–redo logï¼Œå¯æ˜¯ç³»ç»Ÿå¦‚æœæ¯æ¬¡ä¿®æ”¹éƒ½è¦ç«‹åˆ»å†™å›ï¼Œç½‘ç»œå¼€é”€ä¼šå¾ˆå¤§ã€‚æ‰€ä»¥RWèŠ‚ç‚¹ä¸ä¼šç«‹åˆ»å†™å›ï¼Œè€Œæ˜¯ä½¿ç”¨äº†é¡µå¤±æ•ˆçš„æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211225120332727.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211225120332727.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20211225120332727&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20211225120332727&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š
&lt;ol&gt;
&lt;li&gt;RWä¿®æ”¹pageåï¼Œè°ƒç”¨page_invalidation&lt;/li&gt;
&lt;li&gt;å‘é€è¯·æ±‚åˆ°home node&lt;/li&gt;
&lt;li&gt;PIBä¸­å¯¹åº”é¡µé¡¹è®¾ç½®ä¸º1&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢PRDï¼ŒæŸ¥çœ‹pageåœ¨å“ªäº›ROèŠ‚ç‚¹ä¸Šå­˜åœ¨&lt;/li&gt;
&lt;li&gt;å‘æ‰€æœ‰çš„å­˜åœ¨è¿™ä¸ªpageçš„ROå‘é€è¯·æ±‚ï¼Œå°†PIBè®¾ç½®ä¸º1&lt;/li&gt;
&lt;li&gt;è®¾ç½®PIBè¿‡æœŸæ˜¯ä¸€ä¸ªåŒæ­¥é˜»å¡æ“ä½œ&lt;/li&gt;
&lt;li&gt;åªæœ‰å…¨éƒ¨çš„ROèŠ‚ç‚¹è®¾ç½®æˆåŠŸæ‰è¿”å›æˆåŠŸ&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ‰ä¸ªROèŠ‚ç‚¹è¶…æ—¶ï¼Œé‚£ä¹ˆå°±æŠŠä»–è¸¢å‡ºé›†ç¾¤æ¥ä¿è¯è¯¥æ“ä½œæˆåŠŸ&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨å†™å›åˆ°Polar FSï¼ˆè¿œç¨‹å­˜å‚¨ï¼‰çš„æ—¶å€™ï¼ŒåŒæ ·ä¼šä½¿ç”¨page_invalidæ¥ä¿è¯è¿œç¨‹å†…å­˜ä¸­ä¸ä¼šå­˜åœ¨æ¯”è¿œç¨‹å­˜å‚¨ä¸­æ›´è€ç‰ˆæœ¬çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;bæ ‘ç»“æ„ä¸€è‡´æ€§&#34;&gt;B+æ ‘ç»“æ„ä¸€è‡´æ€§&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç‰©ç†ä¸€è‡´æ€§&lt;/p&gt;
&lt;p&gt;é—®é¢˜æ˜¯ï¼šå¤šçº¿ç¨‹è®¿é—®B+æ ‘çš„Indexçš„æ—¶å€™å¦‚ä½•åšåˆ°å¹¶å‘æ§åˆ¶&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åªæœ‰RWèŠ‚ç‚¹å¯ä»¥ä¿®æ”¹pageï¼Œæ‰€ä»¥ä¸éœ€è¦ç®¡ç†å¤šèŠ‚ç‚¹çš„å†™å†²çªã€‚ä½†æ˜¯SMOï¼ˆç»“æ„ä¿®æ”¹æ“ä½œï¼‰ä¼šåŒæ—¶ä¿®æ”¹å¤šä¸ªpageï¼Œå…¶ä»–èŠ‚ç‚¹åœ¨éå†B+æ ‘çš„æ—¶å€™ï¼Œä¸åŒçš„ROèŠ‚ç‚¹å¯èƒ½çœ‹åˆ°ä¸ä¸€è‡´çš„ç‰©ç†B+æ ‘ç»“æ„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬ä½¿ç”¨å…¨å±€é¡µé”æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨å…±äº«é”ï¼ˆSï¼‰å’Œæ’ä»–é”ï¼ˆXï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åŒºåˆ«äºæœ¬åœ°é¡µé”ï¼Œå…¨å±€é¡µé”ç”¨äºä¿è¯å¤šèŠ‚ç‚¹ä¸‹çš„B+æ ‘ç´¢å¼•ç»“æ„ä¸€è‡´æ€§ã€‚ä½¿ç”¨crabbhing/lock couplingç®—æ³•å®ç°&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰å‚ä¸SMOçš„èŠ‚ç‚¹ä¼šåŠ ä¸ŠXé”ï¼Œç›´åˆ°SMOç»“æŸã€‚ROèŠ‚ç‚¹è¯»å–çš„æ—¶å€™è¦æ£€æŸ¥PLTï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰Xé”ï¼Œå¹¶ä¸”å‘è¢«è¯»çš„é¡µä¸ŠåŠ Sé”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹äºRWèŠ‚ç‚¹è¦è¿›è¡Œçš„insertå’Œdeleteæ“ä½œï¼Œæˆ‘ä»¬é‡‡å–ä¸¤é˜¶æ®µåšæ³•&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡‡ç”¨ä¹è§‚å¹¶å‘æ§åˆ¶ï¼Œå‡è®¾æ²¡æœ‰SMOæ“ä½œï¼Œé‚£å°±åªéœ€è¦æœ¬åœ°çš„é”æ¥ä½œå•èŠ‚ç‚¹å¹¶å‘æ§åˆ¶ã€‚å¦‚æœç¡®å®ä¸éœ€è¦è¿›è¡ŒSMOï¼Œé‚£å°±é¡ºåˆ©æ’å…¥æˆ–è€…åˆ é™¤ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå‘ç°B+æ ‘çš„å¶å­èŠ‚ç‚¹ç›¸å¯¹ç©ºæˆ–è€…ç›¸å¯¹æ»¡ï¼Œå³å¾ˆæœ‰å¯èƒ½è¦å‘ç”ŸSMOæ“ä½œï¼Œå°±å¯ç”¨æ‚²è§‚ç­–ç•¥ï¼Œè¿™æ—¶å€™ä¼šå¯¹æ‰€æœ‰å¯èƒ½å‚ä¸SMOçš„pageåŠ ä¸ŠXé”ï¼Œç›´åˆ°SMOç»“æŸé‡Šæ”¾é”ã€‚è¿™æ ·é”çš„æ’åºå¯ä»¥ä¿è¯ROèŠ‚ç‚¹åªèƒ½çœ‹åˆ°SMOä¹‹å‰æˆ–è€…ä¹‹åçš„æ ‘ç»“æ„ï¼Œè€Œä¸ä¼šæ˜¯SMOçš„ä¸­é—´çŠ¶æ€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€»è¾‘ä¸€è‡´æ€§&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç›¸åŒçš„æ•°æ®å¯èƒ½ä¼šæœ‰å¤šä¸ªäº‹åŠ¡è¿›è¡Œå¹¶å‘å¤„ç†ï¼Œå¦‚ä½•ä¿è¯æ»¡è¶³ä¸åŒçš„å¿«ç…§éš”ç¦»çº§åˆ«ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¿«ç…§éš”ç¦»&#34;&gt;å¿«ç…§éš”ç¦»&lt;/h3&gt;
&lt;p&gt;PolarDB Serverless æä¾›åŸºäºMVCCçš„å¿«ç…§éš”ç¦»ã€‚äº‹åŠ¡çš„å®ç°æœºåˆ¶ï¼Œæ˜¯ç”±å¿«ç…§çš„æ—¶é—´æˆ³æ¥æ§åˆ¶äº‹åŠ¡èƒ½çœ‹åˆ°æ•°æ®çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚RWèŠ‚ç‚¹ä¼šç»´æŠ¤ä¸€ä¸ªä¸­å¿ƒåŒ–çš„çš„æ—¶é—´æˆ³å«CTSï¼Œæ¥ä¸ºæ‰€æœ‰æ•°æ®åº“èŠ‚ç‚¹åˆ†é…å…¨å±€å•è°ƒé€’å¢çš„æ—¶é—´æˆ³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ¬¡è¯»å†™äº‹åŠ¡éœ€è¦è·å–ä¸¤æ¬¡æ—¶é—´æˆ³ï¼ˆcts_readå’Œcts_commitï¼‰ï¼›æäº¤äº‹åŠ¡çš„æ—¶å€™æ‰€æœ‰è®°å½•å’Œundo logä¸­çš„è®°å½•éƒ½éœ€è¦é¢å¤–ç»´æŠ¤ä¸€ä¸ªåˆ—æ¥ä¿å­˜cts_commit;ä¸€ä¸ªè¯»å†™äº‹åŠ¡å†…çš„readæ€»ä¼šè¿”å›ä¸€ä¸ªcts_commitæ¯”cts_readè¦å°çš„è®°å½•;æ¯ä¸ªè®°å½•éƒ½ä¼šæœ‰ä¸€ä¸ªäº‹åŠ¡idå­—æ®µæ¥è®°å½•ä¿®æ”¹è¯¥è®°å½•çš„äº‹åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªåªè¯»äº‹åŠ¡åˆ™åªéœ€è¦åœ¨äº‹åŠ¡å¼€å§‹çš„æ—¶å€™è·å–cts_readæ—¶é—´æˆ³å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¯¹äºä¸€äº›æ¯”è¾ƒheavyçš„äº‹åŠ¡ï¼Œæ— æ³•è¿…é€Ÿå¯¹æ‰€æœ‰è®°å½•æ›´æ–°cts_commitï¼Œå› ä¸ºè¿™ä¼šåœ¨æäº¤äº‹åŠ¡çš„æ—¶å€™å¸¦æ¥å¤§é‡çš„éšæœºå†™ã€‚å› æ­¤è¿™ä¸ªcts_commitçš„æ›´æ–°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚è¿™å°±å¯¼è‡´äº†åœ¨å¹¶å‘äº‹åŠ¡å¤„ç†çš„æ—¶å€™ï¼Œæ— æ³•å¾—çŸ¥è¯¥è®°å½•çš„cts_commitæ˜¯å¦å·²ç»è¢«å†™æˆ–è€…æ˜¯å¦è¦è¢«å†™ï¼Œå³æ— æ³•å¾—çŸ¥å…ˆå‰çš„äº‹åŠ¡æ˜¯å¦å·²ç»å®Œæˆæˆ–è€…è¯¥è®°å½•æ˜¯å¦ä¸å…ˆå‰äº‹åŠ¡æœ‰å…³ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡æŸ¥è¯¢RWä¸Šçš„CTS Logæ•°æ®ç»“æ„ï¼Œå…¶æ˜¯ä¸€ä¸ªç¯å½¢æ•°ç»„ï¼šè®°å½•ç€æœ€è¿‘è‹¥å¹²ä¸ªçš„è¯»å†™äº‹åŠ¡çš„æäº¤æ—¶é—´æˆ³(cts_commit)ã€‚å¦‚æœå…ˆå‰äº‹åŠ¡æ²¡æœ‰å®Œæˆï¼Œè¿™ä¸ªæ•°ç»„ä¸Šçš„commit timestampå°±ä¼šä¸ºnullï¼Œæ¯å½“ä¸€ä¸ªèŠ‚ç‚¹è¯»å–åˆ°ä¸€ä¸ªcts_commitä¸ºç©ºçš„è®°å½•ï¼Œå°±å¯ä»¥å»æŸ¥è¯¢è¿™ä¸ªå…¨å±€çš„ç¯å½¢æ•°ç»„æ¥å¾—çŸ¥è¿™ä¸ªè®°å½•å¯¹åº”çš„äº‹åŠ¡æ˜¯å¦å·²ç»æäº¤äº†ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·è¦å»å…¨å±€æŸ¥è¿™ä¸ªæ—¶é—´æˆ³è¦å¯¹åº”ä¸€æ¬¡network requestï¼Œæœ¬ç³»ç»Ÿè¿˜æ˜¯é‡‡ç”¨RDMA æ¥åŠ é€Ÿç¯å½¢æ•°ç»„çš„è®¿é—®è·å–æ—¶é—´æˆ³çš„è¿‡ç¨‹ï¼ŒRDMA CASæŠ€æœ¯èƒ½å¤ŸåŸå­é€’å¢è·å–æ—¶é—´æˆ³ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°ç»„çš„åœ°å€ä¹Ÿä¼šè¢«æ³¨å†Œåˆ°RDMA çš„ç½‘å¡ä¸Šã€‚å’Œç”¨RPCç›¸æ¯”ï¼Œç›´æ¥èµ°ç½‘å¡ä¸éœ€è¦å ç”¨RWèŠ‚ç‚¹çš„CPUèµ„æºã€‚&lt;/p&gt;
&lt;h3 id=&#34;page-materialization-offloading&#34;&gt;Page Materialization Offloading&lt;/h3&gt;
&lt;p&gt;ä¼ ç»Ÿçš„DBä¼šå‘¨æœŸæ€§çš„å°†è„é¡µå†™å…¥åˆ°æŒä¹…æ€§çš„å­˜å‚¨ä¸­ã€‚Auroraæå‡ºäº†æ—¥å¿—å³æ•°æ®åº“çš„æ¦‚å¿µï¼Œé€šè¿‡ä½¿ç”¨redo logæ¥ç‰©è´¨åŒ–é¡µæ•°æ®æ¥è·å–æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®ã€‚Socratesåœ¨æ­¤åŸºç¡€ä¸Šï¼Œåˆ™åšåˆ°äº†å°†logä¸æ•°æ®åˆ†ç¦»å­˜å‚¨ã€‚&lt;/p&gt;
&lt;p&gt;PolarrDB Serverlesså’ŒSocratesç±»ä¼¼ï¼Œå°†logså’Œpagesåˆ†å¼€å­˜å‚¨åœ¨ä¸åŒçš„chunksä¸­ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;redo logså…ˆå­˜å‚¨åœ¨logs chunksä¸­&lt;/li&gt;
&lt;li&gt;å¼‚æ­¥å‘é€åˆ°page chunks&lt;/li&gt;
&lt;li&gt;ä¸ºäº†PolarFSç»„ä»¶çš„é‡ç”¨å’Œæœ€å°åŒ–æ›´æ”¹ï¼Œlogsä»…ä»…é€åˆ°leader nodeã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åleader node é‡åšå¹¶ä½¿ç”¨ParallelRaftä¿è¯å‰¯æœ¬çš„ä¸€è‡´æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è‡ªåŠ¨æ‰©ç¼©&#34;&gt;è‡ªåŠ¨æ‰©ç¼©&lt;/h3&gt;
&lt;p&gt;åœ¨ç‰ˆæœ¬çš„å‡çº§å’Œé‡å¯è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·å¯¹ServerlessæœåŠ¡æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œæ–­å¼€è¿æ¥ï¼Œäº‹åŠ¡ä¸­æ–­ï¼Œè¯·æ±‚è¶…æ—¶æ˜¯ä¸å…è®¸çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥åœ¨æœ¬ç³»ç»Ÿä¸­ï¼Œå½“å‘ç”Ÿç‰ˆæœ¬å‡çº§å’Œè·¨èŠ‚ç‚¹è¿ç§»çš„æ—¶å€™ï¼Œä»£ç†èŠ‚ç‚¹è´Ÿè´£ä¿æŒå®¢æˆ·ç«¯è¿æ¥ï¼Œå‘é€è¯·æ±‚åä¼šç­‰å¾…æ—§çš„RWèŠ‚ç‚¹å¤„ç†æ‰æ­£åœ¨è¿›è¡Œçš„äº‹åŠ¡ã€‚ä¹‹åæŠŠå°±èŠ‚ç‚¹çš„è„é¡µflushåˆ°å…±äº«çš„å†…å­˜æ± ä¸­ï¼Œå†å…³é—­å°±RWèŠ‚ç‚¹ã€‚æ–°çš„RWèŠ‚ç‚¹è¿æ¥å†…å­˜æ± ï¼Œé¢„çƒ­ç¼“å­˜ï¼Œé‡åšundo logæ¥æ„å»ºäº‹åŠ¡çš„åˆ—è¡¨ã€‚ä¹‹åä»£ç†èŠ‚ç‚¹å°†è¿æ¥è¿˜ç»™æ–°çš„RWèŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€§èƒ½ä¼˜åŒ–&#34;&gt;æ€§èƒ½ä¼˜åŒ–&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨åˆ†æ•£å¼æ¶æ„ä¼šå¸¦æ¥æ€§èƒ½çš„æŸå¤±ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ä¸€äº›æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µæ¥è¿›è¡Œä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¹è§‚é”&#34;&gt;ä¹è§‚é”&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ä¹è§‚é”å¯ä»¥å°½å¯èƒ½é¿å…å¹¶å‘æ“ä½œå¯¹å…¨å±€é”çš„è·å–ï¼Œè¿›è€Œæé«˜å¹¶è¡Œæ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;RWèŠ‚ç‚¹ä¼šç»´æŠ¤ä¸€ä¸ªSMO counterï¼Œæ¯æ¬¡å‘ç”ŸSMOçš„æ—¶å€™counter++ï¼›å¹¶ä¸”æ‰€æœ‰è¢«ä¿®æ”¹çš„Pageä¹Ÿä¼šç»´æŠ¤è¿™ä¸ªæ›´æ–°åçš„counterï¼ˆSMO RWï¼‰&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡queryæ‰§è¡Œçš„æ—¶å€™å»æ‹¿è¿™ä¸ªSMO counterï¼ˆSMO queryï¼‰ï¼Œä¸€æ—¦ROä¸Šçš„queryå‘ç°æŸä¸ªPageçš„SMO counteræ¯”SMO queryè¿˜è¦å¤§ï¼Œè¯´æ˜åœ¨queryæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿäº†SMOã€‚è¿™ä¸ªæ—¶å€™å°±è¦å›æ»šåˆ°æ‚²è§‚å¹¶å‘æ§åˆ¶ï¼Œå³è·å–å…¨å±€PLæ¥é”ä½æ•´ä¸ªB+ Treeçš„SMOæ›´æ–°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é¢„å–&#34;&gt;é¢„å–&lt;/h3&gt;
&lt;p&gt;åœ¨PolarDB Serverlessä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†æ‰¹å¤„ç†å¯†é’¥é¢„å¤„ç†(BKP)ã€‚BKPä»åˆ†è§£çš„å†…å­˜å’Œå­˜å‚¨ä¸­é¢„å–åŒ…å«æœ‰è¶£çš„å…ƒç»„çš„é¡µé¢ï¼Œä»¥éšè—è¿œç¨‹I/Oå»¶è¿Ÿã€‚BKPçš„æ¥å£æ¥å—ä¸€ç»„è¦é¢„å–çš„å¯†é’¥ã€‚å½“è°ƒç”¨è¯¥æ¥å£æ—¶ï¼Œå¼•æ“å°†å¯åŠ¨ä¸€ä¸ªåå°é¢„å–ä»»åŠ¡ï¼Œä»ç›®æ ‡ç´¢å¼•ä¸­æ£€ç´¢æ‰€éœ€çš„å¯†é’¥ï¼Œå¹¶åœ¨å¿…è¦æ—¶ä»è¿œç¨‹å†…å­˜/å­˜å‚¨ä¸­è·å–ç›¸åº”çš„æ•°æ®é¡µã€‚BKPè¿˜å¯ä»¥ä¼˜åŒ–åˆ†æå·¥ä½œè´Ÿè½½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®¹é”™ä¸æ¢å¤ç­–ç•¥&#34;&gt;å®¹é”™ä¸æ¢å¤ç­–ç•¥&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®åº“èŠ‚ç‚¹æ¢å¤&#34;&gt;æ•°æ®åº“èŠ‚ç‚¹æ¢å¤&lt;/h3&gt;
&lt;p&gt;æœ¬ç³»ç»Ÿé‡‡ç”¨çš„æ˜¯ARIESçš„æ¢å¤ç®—æ³•ï¼ˆAlgorithm for Recovery and Isolation Exploiting Semantics. ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ROèŠ‚ç‚¹çš„æ¢å¤ï¼šç”±äºé¡µæ•°æ®å†è¿œç¨‹å†…å­˜ä¸Šï¼Œæ‰€ä»¥å¯ä»¥è½»æ¾åœ°ä½¿ç”¨æ–°çš„ROèŠ‚ç‚¹ä»£æ›¿æ—§çš„ROèŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;RWèŠ‚ç‚¹çš„æ¢å¤
&lt;ul&gt;
&lt;li&gt;æ— é¢„æœŸçš„èŠ‚ç‚¹æ•…éšœ
&lt;ul&gt;
&lt;li&gt;RWèŠ‚ç‚¹æŒ‚æ‰ä¹‹åï¼Œé›†ç¾¤çš„managerï¼ˆCMï¼‰ä¼šé€šè¿‡å¿ƒè·³ä¿¡å·æ¢æµ‹åˆ°ï¼Œç„¶åROèŠ‚ç‚¹å°±å¯ä»¥æ™‹å‡ä¸ºRWèŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æœ‰é¢„æœŸçš„èŠ‚ç‚¹æ•…éšœ
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ç‰ˆæœ¬å‡çº§ï¼Œå‰æ–‡å·²ç»è®²è¿‡ï¼Œä¸å†èµ˜è¿°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å†…å­˜ç»“ç‚¹æ¢å¤&#34;&gt;å†…å­˜ç»“ç‚¹æ¢å¤&lt;/h3&gt;
&lt;p&gt;å†…å­˜èŠ‚ç‚¹çš„æ•°æ®ç¼“å­˜Pageï¼Œåœ¨æŠŠdirty pageå†™åˆ°å†…å­˜èŠ‚ç‚¹å‰ï¼Œå¯¹åº”çš„redo logå·²ç»flushåˆ°å­˜å‚¨å±‚äº†ï¼Œå› æ­¤å†…å­˜èŠ‚ç‚¹é‡å¯å¯ä»¥ç”¨PolarFSä¸Šçš„redologæ¥è¿›è¡Œæ¢å¤æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;home nodeä¸Šå› ä¸ºåŒ…å«é‡è¦çš„metadataå¦‚PATï¼ŒPIBï¼ŒPRDå’ŒPLTï¼›è¿™äº›æ•°æ®ä¼šåŒæ­¥å¤‡ä»½åœ¨ä»å‰¯æœ¬ï¼›home nodeè´Ÿè´£æ£€æµ‹slab nodeä¸Šçš„æ•…éšœï¼Œç„¶åhome nodeæ ¹æ®PATä¸Šçš„ä¿¡æ¯æ¥é‡å»ºé‡å¯çš„slab nodeå³å¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é›†ç¾¤æ¢å¤&#34;&gt;é›†ç¾¤æ¢å¤&lt;/h3&gt;
&lt;p&gt;åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œå½“ä¸»èŠ‚ç‚¹çš„æ‰€æœ‰å‰¯æœ¬éƒ½ä¸å¯ç”¨æ—¶ï¼Œéœ€è¦é€šè¿‡é›†ç¾¤æ¢å¤æ¥æ¢å¤æœåŠ¡ã€‚æ‰€æœ‰æ•°æ®åº“èŠ‚ç‚¹å’Œå†…å­˜èŠ‚ç‚¹å°†ä»æ¸…é™¤çŠ¶æ€é‡æ–°å¯åŠ¨ï¼Œæ‰€æœ‰å†…å­˜çŠ¶æ€å°†ä»å­˜å‚¨é‡æ–°å¯åŠ¨ã€‚åˆå§‹åŒ–åï¼ˆè¿æ¥åˆ°è¿œç¨‹å†…å­˜å’Œå­˜å‚¨å™¨ç­‰ï¼‰ï¼ŒRWèŠ‚ç‚¹æ‰§è¡Œä¹‹å‰æ‰€è¿°çš„å¹¶è¡ŒREDOæ¢å¤ï¼Œç„¶åæ‰«ææ’¤é”€å¤´ä»¥æŸ¥æ‰¾æ‰€æœ‰æœªå®Œæˆçš„äº‹åŠ¡ã€‚ä¹‹åï¼ŒRWèŠ‚ç‚¹å°†å¯åŠ¨æœåŠ¡ï¼Œå¹¶åœ¨åå°å›æ»šæœªæäº¤çš„äº‹åŠ¡ã€‚åœ¨é›†ç¾¤æ¢å¤è¿‡ç¨‹ä¸­ï¼Œç¼“å­˜åœ¨è¿œç¨‹å†…å­˜ä¸­çš„é¡µé¢å°†è¢«æ¸…é™¤ï¼Œå› æ­¤å®ƒå°†å¿å—å†·ç¼“å­˜é—®é¢˜ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€åˆ†å¸ƒå¼ä¸å¹¶è¡Œè®¡ç®—ã€‘å¹¶è¡Œä½œä¸š-3</title>
        <link>https://tweakzx.github.io/p/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E5%B9%B6%E8%A1%8C%E4%BD%9C%E4%B8%9A-3/</link>
        <pubDate>Tue, 14 Dec 2021 13:55:35 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E5%B9%B6%E8%A1%8C%E4%BD%9C%E4%B8%9A-3/</guid>
        <description>&lt;img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpmob0455c.pic27.websiteonline.cn%2Fupload%2Felinpack3000-1200_dps0.jpg&refer=http%3A%2F%2Fpmob0455c.pic27.websiteonline.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1642054231&t=55c0893a251868314596e23dae76a843" alt="Featured image of post ã€åˆ†å¸ƒå¼ä¸å¹¶è¡Œè®¡ç®—ã€‘å¹¶è¡Œä½œä¸š-3" /&gt;&lt;h2 id=&#34;1-hplhigh-performance-linpack&#34;&gt;1 HPLï¼ˆHigh Performance Linpack)&lt;/h2&gt;
&lt;p&gt;å‡è®¾è¦ä½¿ç”¨HPLç¨‹åºåœ¨4ä¸ªè¿›ç¨‹ä¸Šè§£ä¸€ä¸ª4096 * 4096çš„æ–¹ç¨‹ç»„ï¼ˆ4096 * 4096çš„çŸ©é˜µåŠ ä¸€åˆ—æ–¹ç¨‹ç»„çš„å³ç«¯é¡¹bï¼‰ï¼ŒæŒ‰ç…§è®²ä¹‰ç¬¬14é¡µæ‰€ç¤ºçš„block-cyclicæ–¹å¼å¯¹æ•°æ®è¿›è¡Œåˆ†é…ï¼ŒNB=512ã€‚4ä¸ªè¿›ç¨‹æŒ‰1 * 4å’Œ4 * 1ä¸¤ç§æ–¹å¼æ’å¸ƒã€‚é‚£ä¹ˆï¼Œåœ¨HPLçš„å›ä»£éƒ¨åˆ†ï¼ˆè®²ä¹‰48åˆ°55é¡µï¼‰ï¼ŒXçš„å„ä¸ªå…ƒç´ åˆ†åˆ«æ˜¯ç”±å“ªäº›è¿›ç¨‹ç®—å‡ºçš„ï¼Ÿä¾‹å¦‚ï¼ŒX[0..512]ç”±è¿›ç¨‹(3, 0)æ±‚å‡ºã€‚å†™å‡ºä¸¤ç§æ’å¸ƒæ–¹å¼ä¸‹Xçš„å„éƒ¨åˆ†åˆ†åˆ«ç”±å“ªäº›è¿›ç¨‹è®¡ç®—å¾—åˆ°ã€‚ï¼ˆ5åˆ†ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 * 4 æ’å¸ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211214170301242.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211214170301242.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20211214170301242&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20211214170301242&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;X&lt;/th&gt;
&lt;th&gt;è¿›ç¨‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;X[0..511]&lt;/td&gt;
&lt;td&gt;(0,0)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[512..1023]&lt;/td&gt;
&lt;td&gt;(0,1)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[1024..1535]&lt;/td&gt;
&lt;td&gt;(0,2)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[1536..2047]&lt;/td&gt;
&lt;td&gt;(0,3)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[2048..2559]&lt;/td&gt;
&lt;td&gt;(0,0)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[2560..3071]&lt;/td&gt;
&lt;td&gt;(0,1)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[3072..3583]&lt;/td&gt;
&lt;td&gt;(0,2)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[3584..4095]&lt;/td&gt;
&lt;td&gt;(0,3)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;4 * 1 æ’å¸ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211214170325158.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211214170325158.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20211214170325158&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20211214170325158&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;X&lt;/th&gt;
&lt;th&gt;è¿›ç¨‹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;X[0..511]&lt;/td&gt;
&lt;td&gt;(0,0)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[512..1023]&lt;/td&gt;
&lt;td&gt;(0,1)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[1024..1535]&lt;/td&gt;
&lt;td&gt;(0,2)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[1536..2047]&lt;/td&gt;
&lt;td&gt;(0,3)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[2048..2559]&lt;/td&gt;
&lt;td&gt;(0,0)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[2560..3071]&lt;/td&gt;
&lt;td&gt;(0,1)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[3072..3583]&lt;/td&gt;
&lt;td&gt;(0,2)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X[3584..4095]&lt;/td&gt;
&lt;td&gt;(0,3)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>ã€åˆ†å¸ƒå¼ä¸å¹¶è¡Œè®¡ç®—ã€‘CUDAåŠ é€Ÿè¯¾ç¨‹é¢˜ç›®</title>
        <link>https://tweakzx.github.io/p/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97cuda%E5%8A%A0%E9%80%9F%E8%AF%BE%E7%A8%8B%E9%A2%98%E7%9B%AE/</link>
        <pubDate>Mon, 13 Dec 2021 19:03:20 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97cuda%E5%8A%A0%E9%80%9F%E8%AF%BE%E7%A8%8B%E9%A2%98%E7%9B%AE/</guid>
        <description>&lt;img src="https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211215144717123.png" alt="Featured image of post ã€åˆ†å¸ƒå¼ä¸å¹¶è¡Œè®¡ç®—ã€‘CUDAåŠ é€Ÿè¯¾ç¨‹é¢˜ç›®" /&gt;&lt;h2 id=&#34;1-åŠ é€Ÿå‘é‡åŠ æ³•&#34;&gt;1 åŠ é€Ÿå‘é‡åŠ æ³•&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;assert.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaError_t&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;checkCuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaError_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaSuccess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;fprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stderr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;CUDA Runtime Error: %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaGetErrorString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaSuccess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;initWith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;num&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;__global__&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;addVectorsInto&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;initIndex&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threadIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blockIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blockDim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gridStride&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gridDim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blockDim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  
  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;initIndex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;gridStride&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
   &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;checkElementsAre&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;FAIL: array[%d] - %0.0f does not equal %0.0f&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;SUCCESS! All values added correctly.&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;cudaMallocManaged&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;cudaMallocManaged&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;cudaMallocManaged&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;initWith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;initWith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;initWith&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    
  &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threads_per_block&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;size_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;number_of_blocks&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threads_per_block&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threads_per_block&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    
  &lt;span class=&#34;n&#34;&gt;addVectorsInto&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;c1&#34;&gt;//addVectorsInto&amp;lt;&amp;lt;&amp;lt;number_of_blocks,threads_per_block&amp;gt;&amp;gt;&amp;gt;(c, a, b, N);
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  
  &lt;span class=&#34;n&#34;&gt;checkCuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaGetLastError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;checkCuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaDeviceSynchronize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;checkElementsAre&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;cudaFree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;cudaFree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;cudaFree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;2-åŠ é€Ÿsaxpy&#34;&gt;2 åŠ é€ŸSAXPY&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;assert.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#define N 2048 * 2048 &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// Number of elements in each vector
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;cm&#34;&gt;/*
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * Optimize this already-accelerated codebase. Work iteratively,
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * and use nsys to support your work.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * Aim to profile `saxpy` (without modifying `N`) running under
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * 20us.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * Some bugs have been placed in this codebase for your edification.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; */&lt;/span&gt;


&lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaError_t&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;checkCuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaError_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaSuccess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;fprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stderr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;CUDA Runtime Error: %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaGetErrorString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaSuccess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;__global__&lt;/span&gt; 
&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;saxpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blockIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blockDim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threadIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stride&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gridDim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blockDim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stride&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numberOfSMs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cudaGetDevice&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deviceId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cudaDeviceGetAttribute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;numberOfSMs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaDevAttrMultiProcessorCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    
    
    &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// The total number of bytes per vector
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;cudaMallocManaged&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cudaMallocManaged&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cudaMallocManaged&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    
    
    &lt;span class=&#34;c1&#34;&gt;// Initialize memory
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;2.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cudaMemPrefetchAsync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cudaMemPrefetchAsync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cudaMemPrefetchAsync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threads_per_block&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;256&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;number_of_blocks&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numberOfSMs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;saxpy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;number_of_blocks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threads_per_block&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;checkCuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaGetLastError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;checkCuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaDeviceSynchronize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    

    &lt;span class=&#34;c1&#34;&gt;// Print out the first and last 5 values of c for a quality check
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;c[%d] = %f, &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;c[%d] = %f, &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;


    &lt;span class=&#34;n&#34;&gt;cudaFree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaFree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaFree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;3-n-body&#34;&gt;3 N-body&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;math.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;#34;timer.h&amp;#34;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;#34;files.h&amp;#34;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#define SOFTENING 1e-9f
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;assert.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;inline&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaError_t&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;checkCuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaError_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaSuccess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;fprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stderr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;CUDA Runtime Error: %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaGetErrorString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;assert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaSuccess&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;cm&#34;&gt;/*
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * Each body contains x, y, and z coordinate positions,
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * as well as velocities in the x, y, and z directions.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; */&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;typedef&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;cm&#34;&gt;/*
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * Calculate the gravitational impact of all bodies in the system
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * on all others.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; */&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;__global__&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;bodyForce&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Body&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blockIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blockDim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threadIdx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stride&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gridDim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;blockDim&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stride&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Fx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Fy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Fz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;distSqr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dz&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SOFTENING&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invDist&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rsqrtf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;distSqr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
      &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invDist3&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invDist&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invDist&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invDist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

      &lt;span class=&#34;n&#34;&gt;Fx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invDist3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Fy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invDist3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Fz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;invDist3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vx&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Fx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vy&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Fy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vz&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Fz&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;


&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// The assessment will test against both 2&amp;lt;11 and 2&amp;lt;15.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// Feel free to pass the command line argument 15 when you gernate ./nbody report files
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nBodies&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nBodies&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;atoi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// The assessment will pass hidden initialized values to check for correctness.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// You should not make changes to these files, or else the assessment will not work.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;initialized_values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;solution_values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nBodies&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;initialized_values&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;files/initialized_4096&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;solution_values&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;files/solution_4096&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// nBodies == 2&amp;lt;&amp;lt;15
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;initialized_values&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;files/initialized_65536&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;solution_values&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;files/solution_65536&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;initialized_values&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;solution_values&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.01f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// Time step
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nIters&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// Simulation iterations
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bytes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nBodies&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;cudaMallocManaged&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;Body&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;read_values_from_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;initialized_values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;totalTime&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

  &lt;span class=&#34;cm&#34;&gt;/*
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;   * This simulation will run for 10 cycles of time, calculating gravitational
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;   * interaction amongst bodies, and adjusting their positions to reflect.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;   */&lt;/span&gt;

  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numberOfSMs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;cudaGetDevice&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deviceId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;cudaDeviceGetAttribute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;numberOfSMs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cudaDevAttrMultiProcessorCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;deviceId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threads_per_block&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;128&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;number_of_blocks&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;numberOfSMs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;25&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  
  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nIters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;StartTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;

  &lt;span class=&#34;cm&#34;&gt;/*
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;   * You will likely wish to refactor the work being done in `bodyForce`,
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;   * and potentially the work to integrate the positions.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;   */&lt;/span&gt;

    &lt;span class=&#34;n&#34;&gt;bodyForce&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threads_per_block&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;number_of_blocks&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nBodies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// compute interbody forces
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;checkCuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaGetLastError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;checkCuda&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cudaDeviceSynchronize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
  &lt;span class=&#34;cm&#34;&gt;/*
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;   * This position integration cannot occur until this round of `bodyForce` has completed.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;   * Also, the next round of `bodyForce` cannot begin until the integration is complete.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;   */&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nBodies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// integrate position
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;      &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vx&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vy&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;z&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vz&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tElapsed&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GetTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1000.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;totalTime&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tElapsed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;avgTime&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;totalTime&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nIters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;kt&#34;&gt;float&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;billionsOfOpsPerSecond&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1e-9&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nBodies&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nBodies&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;avgTime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;write_values_to_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;solution_values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;c1&#34;&gt;// You will likely enjoy watching this value grow as you accelerate the application,
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// but beware that a failure to correctly synchronize the device might result in
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// unrealistically high values.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%0.3f Billion Interactions / second&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;billionsOfOpsPerSecond&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;cudaFree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;4-è¯ä¹¦&#34;&gt;4 è¯ä¹¦&lt;/h2&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211215143330246.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211215143330246.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€åˆ†å¸ƒå¼ä¸å¹¶è¡Œè®¡ç®—ã€‘å¹¶è¡Œä½œä¸š-2</title>
        <link>https://tweakzx.github.io/p/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E5%B9%B6%E8%A1%8C%E4%BD%9C%E4%B8%9A-2/</link>
        <pubDate>Sat, 11 Dec 2021 18:01:26 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E5%B9%B6%E8%A1%8C%E4%BD%9C%E4%B8%9A-2/</guid>
        <description>&lt;img src="https://pic1.zhimg.com/v2-f9d2f5486443cc045996753d59f80a7e_1440w.jpg?source=172ae18b" alt="Featured image of post ã€åˆ†å¸ƒå¼ä¸å¹¶è¡Œè®¡ç®—ã€‘å¹¶è¡Œä½œä¸š-2" /&gt;&lt;h2 id=&#34;1-çŸ©é˜µå‘é‡ä¹˜æ³•6åˆ†&#34;&gt;1 çŸ©é˜µå‘é‡ä¹˜æ³•ï¼ˆ6åˆ†ï¼‰&lt;/h2&gt;
&lt;p&gt;çŸ©é˜µå‘é‡ä¹˜æ³•(gemv)å¦‚ä½•ç”¨OpenMPæˆ–pthreadå¯¹å…¶å¹¶è¡ŒåŒ–(OpenMPå’Œpthreadä»»é€‰ä¸€ç§å³å¯)ï¼Ÿå‡è®¾çŸ©é˜µæŒ‰è¡Œå­˜å‚¨ï¼ˆæ¯ä¸€è¡Œæ•°æ®æ˜¯è¿ç»­çš„ï¼‰ï¼Œå¤„ç†å™¨æœ‰32ä¸ªæ ¸ã€‚å¦‚æœçŸ©é˜µæ˜¯æŒ‰åˆ—å­˜å‚¨å‘¢ï¼Ÿå…·ä½“å®ç°å¦‚ä½•ä¿®æ”¹ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¯ç”¨è¯­è¨€&lt;strong&gt;è¯¦ç»†&lt;/strong&gt;æè¿°æˆ–å†™å‡ºä¼ªä»£ç &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æŒ‰è¡Œå­˜å‚¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;worker1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;row&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;row&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;innerProduct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Vec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;data_array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;row&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;pthread_create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;worker1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒ‰åˆ—å­˜å‚¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;worker2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;**&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;column&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Vec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;data_array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;column&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;pthread_create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threads&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;worker1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2-ç¨‹åºåˆ†æ4åˆ†&#34;&gt;2 ç¨‹åºåˆ†æï¼ˆ4åˆ†ï¼‰&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹ç¨‹åºè¿è¡Œæ—¶ä¼šå‡ºç°ä»€ä¹ˆç°è±¡ï¼Ÿå¯ä»¥å¦‚ä½•æ”¹å†™æ¥é¿å…æ­¤ç°è±¡å‘ç”Ÿï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;selected_thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;sem_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;start1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;start2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stop1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stop2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;worker1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  	&lt;span class=&#34;n&#34;&gt;sem_wait&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
  	&lt;span class=&#34;n&#34;&gt;sem_post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stop1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;worker2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;
	&lt;span class=&#34;n&#34;&gt;sem_wait&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;n&#34;&gt;sem_post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stop2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  	&lt;span class=&#34;n&#34;&gt;selected_thread&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
 	&lt;span class=&#34;n&#34;&gt;sem_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  
	&lt;span class=&#34;n&#34;&gt;sem_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  
	&lt;span class=&#34;n&#34;&gt;sem_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stop1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;   
	&lt;span class=&#34;n&#34;&gt;sem_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stop2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;   
 	&lt;span class=&#34;n&#34;&gt;pthread_create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;worker1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;n&#34;&gt;pthread_create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;worker2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;n&#34;&gt;sem_post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; 
 	&lt;span class=&#34;n&#34;&gt;sem_wait&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stop1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
 	&lt;span class=&#34;n&#34;&gt;sem_wait&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stop2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
 	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç­”ï¼š worker2ä¼šä¸€ç›´ç­‰å¾…ï¼Œç¨‹åºæ— æ³•ç»“æŸã€‚æ‰€ä»¥åœ¨ä¸»å‡½æ•°é‡ŒåŠ ä¸Šsem_post(&amp;amp;start2)ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€åˆ†å¸ƒå¼ä¸å¹¶è¡Œè®¡ç®—ã€‘å¹¶è¡Œä½œä¸š-1</title>
        <link>https://tweakzx.github.io/p/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E5%B9%B6%E8%A1%8C%E4%BD%9C%E4%B8%9A-1/</link>
        <pubDate>Fri, 10 Dec 2021 11:28:33 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E5%B9%B6%E8%A1%8C%E4%BD%9C%E4%B8%9A-1/</guid>
        <description>&lt;img src="https://img2.baidu.com/it/u=2900542081,1673808678&fm=26&fmt=auto" alt="Featured image of post ã€åˆ†å¸ƒå¼ä¸å¹¶è¡Œè®¡ç®—ã€‘å¹¶è¡Œä½œä¸š-1" /&gt;&lt;h2 id=&#34;1çŸ©é˜µå‘é‡ä¹˜æ³•4åˆ†&#34;&gt;1çŸ©é˜µå‘é‡ä¹˜æ³•ï¼ˆ4åˆ†ï¼‰&lt;/h2&gt;
&lt;p&gt;è®²ä¹‰55é¡µæ‰€ç¤ºç»“æœYï¼Œå¦‚æœè¦ä½œä¸ºä¸‹ä¸€æ¬¡çŸ©é˜µå‘é‡ä¹˜æ³•çš„è¾“å…¥Xï¼Œåˆ‡åˆ†åˆ°ä¸åŒçš„åˆ—è¿›ç¨‹ï¼Œå¹¶ä¸”å¤åˆ¶åˆ°æ¯ä¸€è¡Œè¿›ç¨‹ï¼Œåº”å¦‚ä½•æ“ä½œï¼Ÿå¯å†™å‡ºä¼ªä»£ç ï¼Œæˆ–ç”¨è¯­è¨€æè¿°ã€‚&lt;/p&gt;
&lt;p&gt;å³å›¾(a)ä¸­çš„Yï¼Œå˜æˆä¸‹å›¾(b)ä¸­çš„Xã€‚å‡è®¾æ¯è¡Œæœ‰Pä¸ªè¿›ç¨‹ï¼Œæ¯åˆ—ä¹Ÿæ˜¯Pä¸ªè¿›ç¨‹ï¼Œä¸€å…±P*Pä¸ªè¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211210120943046.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211210120943046.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20211210120943046&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20211210120943046&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼šè¿›ç¨‹$P_{ij}$å’Œæ‰€æ§åˆ¶çš„çŸ©é˜µè¿›è¡ŒçŸ©é˜µå‘é‡ä¹˜ä¹‹åï¼Œå°†ç»“æœå­˜å…¥è¿›ç¨‹$P_{ji}$ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ä»£ç å¡«ç©º3åˆ†&#34;&gt;2 ä»£ç å¡«ç©ºï¼ˆ3åˆ†ï¼‰&lt;/h2&gt;
&lt;p&gt;åœ¨æµ‹é‡ç¨‹åºæ€§èƒ½æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸è¦è®°å½•æ•´ä¸ªç¨‹åºæˆ–ç¨‹åºä¸­æŸä¸€éƒ¨åˆ†çš„è¿è¡Œæ—¶é—´ã€‚åœ¨MPIç¨‹åºä¸­ï¼Œç”±äºæ¯ä¸ªè¿›ç¨‹çš„è¿è¡Œæ—¶é—´ä¸åŒï¼Œä¸€èˆ¬éœ€è¦å–å„ä¸ªè¿›ç¨‹è¿è¡Œæ—¶é—´çš„&lt;strong&gt;æœ€å¤§å€¼&lt;/strong&gt;ï¼Œç„¶åç”±0å·è¿›ç¨‹ä¿å­˜å’Œæ‰“å°ï¼ˆå…¶ä»–è¿›ç¨‹ä¸éœ€è¦ä¿å­˜ï¼‰ã€‚ä»¥ä¸‹ç¨‹åºå®Œæˆäº†è¿™ä¸ªåŠŸèƒ½ï¼Œè¯·åœ¨æ¨ªçº¿å¤„å¡«ä¸Šå‡½æ•°è°ƒç”¨è¯­å¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;total_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rank&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
	&lt;span class=&#34;n&#34;&gt;MPI_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;n&#34;&gt;MPI_Comm_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;procs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;n&#34;&gt;MPI_Comm_rank&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rank&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;n&#34;&gt;time0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MPI_Wtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;//do some computation
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;n&#34;&gt;time1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MPI_Wtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;â€“&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

	&lt;span class=&#34;n&#34;&gt;_______________________________________________________________&lt;/span&gt;
        
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rank&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;n&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Total&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;execution&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;seconds&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;â€&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;total_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç­”ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;n&#34;&gt;MPI_Reduce&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;time1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;total_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MPI_DOUBLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MPI_MAX&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;3-ä»¥ä¸‹ç¨‹åºç›¸å½“äºå“ªä¸ªmpièšåˆæ“ä½œ3åˆ†&#34;&gt;3 ä»¥ä¸‹ç¨‹åºç›¸å½“äºå“ªä¸ªMPIèšåˆæ“ä½œï¼Ÿï¼ˆ3åˆ†ï¼‰&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define N 16384
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;send_buff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recv_buff&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;MPI_Status&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nprocs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;myid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;num_procs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;send_buff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;recv_buff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;MPI_Comm_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nprocs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;MPI_Comm_rank&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;myid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;//æ­¤å¤„çœç•¥send_buffä¸­æ•°æ®çš„åˆå§‹åŒ–
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recv_buff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;myid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;send_buff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;myid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;double&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nprocs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;myid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;n&#34;&gt;MPI_Sendrecv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;send_buff&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MPI_DOUBLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;400&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;recv_buff&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MPI_DOUBLE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;400&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MPI_COMM_WORLD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç­”ï¼šMPI_Alltoall()&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€åˆ†å¸ƒå¼ä¸å¹¶è¡Œè®¡ç®—ã€‘åˆ†å¸ƒå¼ä½œä¸š</title>
        <link>https://tweakzx.github.io/p/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E5%88%86%E5%B8%83%E5%BC%8F%E4%BD%9C%E4%B8%9A/</link>
        <pubDate>Tue, 07 Dec 2021 14:21:24 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E5%88%86%E5%B8%83%E5%BC%8F%E4%BD%9C%E4%B8%9A/</guid>
        <description>&lt;img src="https://img2.baidu.com/it/u=1163044150,1040852846&fm=26&fmt=auto" alt="Featured image of post ã€åˆ†å¸ƒå¼ä¸å¹¶è¡Œè®¡ç®—ã€‘åˆ†å¸ƒå¼ä½œä¸š" /&gt;&lt;h2 id=&#34;1-é€»è¾‘æ—¶é’Ÿä¸ä¸€è‡´å‰²é›†&#34;&gt;1 é€»è¾‘æ—¶é’Ÿä¸ä¸€è‡´å‰²é›†&lt;/h2&gt;
&lt;p&gt;ä¸‹å›¾ä¸­ï¼Œç›´çº¿ä¸Šå°é»‘ç‚¹ç»™å‡ºäº†æ—¶é’Ÿè®¡æ•°ï¼Œè¯·åˆ†åˆ«ç”¨Lamport é€»è¾‘æ—¶é’Ÿå’Œå‘é‡æ—¶é’Ÿç»™å›¾ä¸Šçš„äº‹ä»¶è®¾ç½®æ—¶é—´æˆ³ï¼Œå¹¶ç»™å‡ºä¸€è‡´å‰²é›†å’Œéä¸€è‡´å‰²é›†çš„ä¾‹å­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211207143003084.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211207143003084.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;äº‹ä»¶æ—¶é’Ÿè®¡æ•°&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;äº‹ä»¶æ—¶é’Ÿè®¡æ•°&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è®¾ç½®æ—¶é—´æˆ³&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Lamporté€»è¾‘æ—¶é’Ÿ&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211207155413530.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211207155413530.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;Lamporté€»è¾‘æ—¶é’Ÿ&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;Lamporté€»è¾‘æ—¶é’Ÿ&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘é‡æ—¶é’Ÿ&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211207160453425.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211207160453425.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;å‘é‡æ—¶é’Ÿ&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;å‘é‡æ—¶é’Ÿ&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‰²é›†çš„ä¾‹å­&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸€è‡´å‰²é›†&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211207165240421.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211207165240421.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;ä¸€è‡´å‰²é›†&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;ä¸€è‡´å‰²é›†&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éä¸€è‡´å‰²é›†&lt;/p&gt;
&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211207165430054.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211207165430054.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;éä¸€è‡´å‰²é›†&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;éä¸€è‡´å‰²é›†&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;åŒ…å«$e_1^2$è¿™ä¸ªæ¥æ”¶äº‹ä»¶ä½†æ˜¯ä¸åŒ…å«$e_3^1$è¿™ä¸ªå‘é€äº‹ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2-å¼‚æ­¥åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ•…éšœç±»å‹&#34;&gt;2 å¼‚æ­¥åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ•…éšœç±»å‹&lt;/h2&gt;
&lt;p&gt;è€ƒè™‘åœ¨å¼‚æ­¥åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨çš„ä¸¤ä¸ªé€šä¿¡æœåŠ¡ã€‚åœ¨æœåŠ¡Aä¸­ï¼Œæ¶ˆæ¯å¯èƒ½ä¸¢å¤±ã€è¢«å¤åˆ¶æˆ–å»¶è¿Ÿï¼Œæ ¡éªŒå’Œä»…åº”ç”¨åˆ°æ¶ˆæ¯å¤´ã€‚åœ¨æœåŠ¡Bä¸­ï¼Œæ¶ˆæ¯å¯èƒ½ä¸¢å¤±ã€å»¶è¿Ÿæˆ–å‘é€åœ°å¤ªå¿«ä»¥è‡´æ¥æ”¶æ–¹æ— æ³•å¤„ç†å®ƒï¼Œä½†åˆ°è¾¾ç›®çš„åœ°çš„æ¶ˆæ¯å…¶å†…å®¹ä¸€å®šæ­£ç¡®ã€‚æè¿°æ¯ä¸ªæœåŠ¡ä¼šæœ‰çš„æ•…éšœç±»å‹ã€‚æ ¹æ®å¯¹æœ‰æ•ˆæ€§å’Œå®Œæ•´æ€§çš„å½±å“å°†æ•…éšœåˆ†ç±»ã€‚æœåŠ¡Bèƒ½è¢«æè¿°æˆä¸€ä¸ªå¯é çš„é€šä¿¡æœåŠ¡å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡Aä¼šæœ‰çš„æ•…éšœç±»å‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é—æ¼æ•…éšœ
&lt;ul&gt;
&lt;li&gt;æ¶ˆæ¯ä¸¢å¤±&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ‹œå åº­æ•…éšœ
&lt;ul&gt;
&lt;li&gt;checksumä»…ä»…åº”ç”¨åˆ°æ¶ˆæ¯çš„headï¼Œæ¶ˆæ¯çš„bodyå¯èƒ½å‘ç”ŸæŸå&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯é‡å¤&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å› ä¸ºè¿™æ˜¯å¼‚æ­¥åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ‰€ä»¥ä¸ä¼šæœ‰æ—¶åºæ•…éšœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é—æ¼æ•…éšœçš„æ¶ˆæ¯ä¸¢å¤±ç ´åäº†æœ‰æ•ˆæ€§ã€‚æ‹œå åº­æ•…éšœçš„å¯èƒ½æŸåçš„æ¶ˆæ¯ä»¥åŠé‡å¤çš„æ¶ˆæ¯ç ´åäº†å®Œæ•´æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡Bä¼šæœ‰çš„æ•…éšœç±»å‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é—æ¼æ•…éšœ
&lt;ul&gt;
&lt;li&gt;æ¶ˆæ¯ä¸¢å¤±&lt;/li&gt;
&lt;li&gt;å‘é€åœ°å¤ªå¿«ä»¥è‡´æ¥æ”¶æ–¹æ— æ³•å¤„ç†å®ƒï¼Œæ¥æ”¶é—æ¼&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å› ä¸ºè¿™æ˜¯å¼‚æ­¥åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ‰€ä»¥ä¸ä¼šæœ‰æ—¶åºæ•…éšœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœåŠ¡Bæ»¡è¶³å®Œæ•´æ€§ï¼Œä½†æ˜¯æœåŠ¡Bæ¶ˆæ¯å‘ç”Ÿçš„é—æ¼æ•…éšœï¼Œä¸æ»¡è¶³æœ‰æ•ˆæ€§ï¼Œæ‰€ä»¥ä¸æ˜¯å¯é çš„é€šä¿¡æœåŠ¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-ricart-and-agrawala-ç®—æ³•&#34;&gt;3 Ricart and Agrawala ç®—æ³•&lt;/h2&gt;
&lt;p&gt;è¯·è¯æ˜Ricart-Agrawalaçš„äº’æ–¥ç®—æ³•æ»¡è¶³ME2å’ŒME3ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ME2:è¿›å…¥æˆ–é€€å‡ºä¸´ç•ŒåŒºçš„è¯·æ±‚æœ€ç»ˆéƒ½ä¼šæˆåŠŸ&lt;/p&gt;
&lt;p&gt;ME3:å¦‚æœä¸€ä¸ªè¿›å…¥ä¸´ç•ŒåŒºçš„è¯·æ±‚å‘ç”Ÿåœ¨å…ˆï¼Œé‚£ä¹ˆè¿›å…¥ä¸´ç•ŒåŒºä¹ŸæŒ‰æ­¤é¡ºåº&lt;/p&gt;
&lt;p&gt;Ricart-Agrawalaç®—æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹ç”³è¯·èµ„æºæ—¶å‘æ‰€æœ‰å…¶ä»–è¿›ç¨‹å‘å‡ºå¸¦æœ‰æ—¶é—´æˆ³çš„ç”³è¯·æŠ¥æ–‡ï¼›&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹æ”¶åˆ°ç”³è¯·æŠ¥æ–‡åï¼Œç­”å¤è¿™ä¸ªç”³è¯·ï¼Œå½“ä¸”ä»…å½“ï¼š1ï¼‰è‹¥ä¸åœ¨ä¸´ç•ŒåŒºå¹¶ä¸”è‡ªå·±æœªç”³è¯·è¿›å…¥ä¸´ç•ŒåŒº,æˆ–è€…2)è‡ªå·±è™½ç„¶å‘å‡ºäº†ç”³è¯·æŠ¥æ–‡ï¼Œä½†è‡ªå·±çš„æŠ¥æ–‡çš„æ—¶é—´æˆ³å¤§äºæ”¶åˆ°çš„ç”³è¯·æŠ¥æ–‡ã€‚å¦‚æœå·²ç»åœ¨ä¸´ç•ŒåŒºï¼Œæˆ–è€…è‡ªå·±çš„ç”³è¯·å‘é€åœ¨å‰ï¼Œåˆ™åœ¨å‡ºä¸´ç•ŒåŒºä¹‹å‰å°†æ‰€æœ‰çš„ç”³è¯·æŒ‚èµ·ã€‚&lt;/li&gt;
&lt;li&gt;ç”³è¯·èµ„æºçš„è¿›ç¨‹ä»…åœ¨æ”¶åˆ°å…¶å®ƒæ‰€æœ‰è¿›ç¨‹çš„å›ç­”æŠ¥æ–‡åæ‰è¿›å…¥ä¸´ç•ŒåŒºä½¿ç”¨èµ„æºï¼›&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨å®Œèµ„æºåï¼Œå®ƒå‘æ‰€æœ‰æŒ‚èµ·çš„ç”³è¯·å‘é€å›ç­”æŠ¥æ–‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¯æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯æ˜æ»¡è¶³ME2
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹$p_i$è¦è¿›å…¥ä¸´ç•ŒåŒºå‘å…¶ä»–è¿›ç¨‹å‘é€è¯·æ±‚ï¼Œä¸æƒ³è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ï¼Œæˆ–è€…å·²ç»å‘é€äº†è¯·æ±‚ä½†æ˜¯å‘é€æ—¶é—´æˆ³å¤§äºæ¥æ”¶è¯·æ±‚æ—¶é—´æˆ³$T_i$çš„è¿›ç¨‹éƒ½ä¼šå›å¤ã€‚æ‰€ä»¥è¿›ç¨‹$p_i$è¦ç­‰å¾…é€»è¾‘æ—¶é—´æˆ³$T_i$ä¹‹å‰å‘é€äº†è¯·æ±‚çš„è¿›ç¨‹ä»¥åŠæ­£åœ¨ä¸´ç•ŒåŒºçš„è¿›ç¨‹çš„ç­”å¤ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨é€»è¾‘æ—¶é—´æˆ³$T_i$ä¹‹å‰å‘å‡ºè¯·æ±‚çš„è¿›ç¨‹æ‰€ç­‰å¾…è¿›ç¨‹çš„æ•°é‡ä¾æ¬¡é€’å‡åˆ°1ã€‚ç­‰æ­£åœ¨ä¸´ç•ŒåŒºçš„è¿›ç¨‹ä½¿ç”¨å®Œèµ„æºå¹¶é€€å‡ºåï¼Œæ‰€æœ‰åœ¨ç­‰å¾…çš„è¿›ç¨‹æ‰€éœ€ç­‰å¾…è¿›ç¨‹æ•°é‡å…¨éƒ½å‡1ã€‚æ­¤æ—¶æœ‰ä¸€ä¸ªè¿›ç¨‹å¾—åˆ°äº†å…¨éƒ¨çš„ç­”å¤ï¼Œè¿›å…¥ä¸´ç•ŒåŒºã€‚&lt;/li&gt;
&lt;li&gt;æŒ‰ç…§è¿™ä¸ªè¿‡ç¨‹ï¼Œåªè¦å‰è¾¹çš„è¿›ç¨‹ä¾æ¬¡è¿›å…¥ä¸´ç•ŒåŒºå¹¶é€€å‡ºä¹‹åï¼Œè¿›ç¨‹$p_i$å°±å¯ä»¥æˆåŠŸè¿›å…¥ä¸´ç•ŒåŒºï¼Œæ¯•ç«Ÿæ²¡æœ‰è¿›ç¨‹å¯ä»¥æ’é˜Ÿï¼Œæ‰€éœ€ç­‰å¾…è¿›ç¨‹æ•°é‡åªèƒ½é€’å‡ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºä½¿ç”¨å®Œèµ„æºåé€€å‡ºä¸´ç•ŒåŒºä¸éœ€è¦ç­‰å¾…ç­”å¤ï¼Œæ‰€ä»¥å¯ä»¥æˆåŠŸé€€å‡ºã€‚æ‰€ä»¥ï¼Œæ»¡è¶³ME2ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¯æ˜æ»¡è¶³ME3
&lt;ul&gt;
&lt;li&gt;å½“è¿›$p_i$ç»™å…¶ä»–è¿›ç¨‹å‘é€è¿›å…¥ä¸´ç•ŒåŒºçš„ç”³è¯·æ—¶&lt;/li&gt;
&lt;li&gt;å¦‚æœè¿›ç¨‹$p_j$ä¹Ÿæƒ³è¿›å…¥ä¸´ç•ŒåŒºï¼Œå‘é€çš„ç”³è¯·çš„æ—¶é—´æˆ³å°äºæ”¶åˆ°çš„$T_i$ï¼Œé‚£ä¹ˆ$p_j$ä¸ä¼šå‘é€ç­”å¤ç»™$p_i$,è¿™æ ·$p_i$å°±å¿…é¡»ç­‰å¾…$p_j$è¿›å…¥å¹¶é€€å‡ºä¸´ç•ŒåŒºä¹‹åæ‰èƒ½å¾—åˆ°ç­”å¤ï¼Œæ‰æœ‰å¯èƒ½è¿›å…¥ä¸´ç•ŒåŒºã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè¿›ç¨‹$p_j$ä¹Ÿæƒ³è¿›å…¥ä¸´ç•ŒåŒºï¼Œå‘é€çš„ç”³è¯·çš„æ—¶é—´æˆ³å¤§äºæ”¶åˆ°çš„$T_i$ï¼Œé‚£ä¹ˆä»–ä¼šå›å¤$p_i$çš„ç”³è¯·ï¼Œ$p_i$æ— éœ€ç­‰å¾…$p_j$ï¼Œä¸”å½“$p_i$æ”¶åˆ°$p_j$çš„è¯·æ±‚ä¹‹åä¸ä¼šå›å¤ï¼Œ$p_j$ç­‰å¾…$p_i$ã€‚&lt;/li&gt;
&lt;li&gt;æ‰€ä»¥ï¼Œæ»¡è¶³ME3&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;4-æ”¹è¿›ricart-and-agrawala-ç®—æ³•&#34;&gt;4 æ”¹è¿›Ricart and Agrawala ç®—æ³•&lt;/h2&gt;
&lt;p&gt;åœ¨Ricart-Agrawalaçš„äº’æ–¥ç®—æ³•ä¸­ï¼ŒåŸå§‹å‡å®šç³»ç»Ÿçš„è¿›ç¨‹æ˜¯ä¸å‡ºæ•…éšœçš„ã€‚è¯·ä¿®æ”¹ç®—æ³•å¢åŠ å¤„ç†ä¸€ä¸ªè¿›ç¨‹å´©æºƒçš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;ç­”ï¼šå¦‚æœæœ‰è¿›ç¨‹å´©æºƒï¼Œé‚£ä¹ˆå®ƒæ°¸è¿œä¸ä¼šå›å¤ï¼Œåˆ™å‘é€è¯·æ±‚çš„è¿›ç¨‹éœ€è¦ä¸€ç›´ç›²ç­‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰€ä»¥æ¯å½“æ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹åè¦åšå‡ºç­”å¤ï¼Œå›å¤&lt;strong&gt;åŒæ„&lt;/strong&gt;ï¼Œå½“ä¸”ä»…å½“ï¼š1ï¼‰è‹¥ä¸åœ¨ä¸´ç•ŒåŒºå¹¶ä¸”è‡ªå·±æœªç”³è¯·è¿›å…¥ä¸´ç•ŒåŒº,æˆ–è€…2)è‡ªå·±è™½ç„¶å‘å‡ºäº†ç”³è¯·æŠ¥æ–‡ï¼Œä½†è‡ªå·±çš„æŠ¥æ–‡çš„æ—¶é—´æˆ³å¤§äºæ”¶åˆ°çš„ç”³è¯·æŠ¥æ–‡ã€‚æˆ–è€…å›å¤&lt;strong&gt;æ‹’ç»&lt;/strong&gt;ï¼Œå½“1ï¼‰è‡ªå·±å¤„åœ¨ä¸´ç•ŒåŒºï¼Œæˆ–è€…2ï¼‰è‡ªå·±çš„ä¸´ç•ŒåŒºç”³è¯·çš„é€»è¾‘æ—¶é—´æˆ³å°äºæ”¶åˆ°çš„ç”³è¯·ï¼ŒæŠŠå›å¤æ‹’ç»çš„è¿›ç¨‹ç¼“å­˜èµ·æ¥ï¼Œç­‰å¾…å›å¤ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè¶…å‡ºtimeoutæ²¡æœ‰æ”¶åˆ°ç­”å¤åˆ™è®¤ä¸ºæœºå™¨æ•…éšœï¼Œåªéœ€ç­‰å¾…å…¶ä½™çš„æœºå™¨å…¨éƒ¨å›å¤åŒæ„&lt;/li&gt;
&lt;li&gt;å½“ä¸€ä¸ªè¿›ç¨‹é€€å‡ºä¸´ç•ŒåŒºä¹‹åï¼Œè¦å‘æ‰€æœ‰å›å¤æ‹’ç»çš„è¿›ç¨‹å›å¤åŒæ„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;5æ”¹è¿›åŸºäºç¯çš„äº’æ–¥ç®—æ³•&#34;&gt;5æ”¹è¿›åŸºäºç¯çš„äº’æ–¥ç®—æ³•&lt;/h2&gt;
&lt;p&gt;æ”¹è¿›åŸºäºç¯çš„äº’æ–¥ç®—æ³•ä½¿å¾—å®ƒèƒ½æ£€æµ‹æƒæ ‡çš„ä¸¢å¤±å¹¶é‡æ–°ç”Ÿæˆæƒæ ‡ã€‚&lt;/p&gt;
&lt;p&gt;ç­”ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹å‘å‡ºç”³è¯·ä¹‹åï¼Œå¦‚æœé•¿æ—¶é—´æ²¡æœ‰æ‹¿åˆ°æƒæ ‡ï¼Œåˆ™å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å‘é€ä¸€ä¸ªè¯·æ±‚reqestç¡®è®¤æƒæ ‡æ˜¯å¦è¿˜åœ¨ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹æ”¶åˆ°äº†ç¡®è®¤æƒæ ‡å­˜åœ¨çš„è¯·æ±‚requestï¼Œå¦‚æœæƒæ ‡åœ¨è‡ªå·±æ‰‹é‡Œåˆ™å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å‘é€ä¸€ä¸ªexistï¼Œå¦‚æœæƒæ ‡ä¸åœ¨è‡ªå·±æ‰‹é‡Œï¼Œåˆ™å°†requstä¼ é€’ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹æ”¶åˆ°äº†ä¸€ä¸ªexistæ¶ˆæ¯åˆ™å°†å®ƒä¼ é€’åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;å¦‚æœå‘å‡ºç”³è¯·çš„è¿›ç¨‹æ”¶åˆ°requestè¯·æ±‚ï¼Œåˆ™è®¤ä¸ºæƒæ ‡ä¸¢å¤±ï¼Œé‡æ–°ç”Ÿæˆæƒæ ‡ã€‚å¦‚æœæ”¶åˆ°existï¼Œåˆ™è¯´æ˜ä¸€åˆ‡æ­£å¸¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;6-åŒå‘ç¯ç»“æ„çš„é€‰ä¸¾ç®—æ³•&#34;&gt;6 åŒå‘ç¯ç»“æ„çš„é€‰ä¸¾ç®—æ³•&lt;/h2&gt;
&lt;p&gt;åŸºäºç¯çš„é€‰ä¸¾ç®—æ³•æ˜¯å»ºç«‹åœ¨å•å‘ç¯çš„å‡è®¾ä¹‹ä¸Šçš„ï¼Œä¸ºäº†è·å¾—æ›´å¿«çš„é€‰ä¸¾é€Ÿåº¦ï¼Œç°é‡‡ç”¨åŒå‘ç¯ç»“æ„ï¼Œå³æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åŒæ—¶å‘é¡ºæ—¶é’ˆå’Œé€†æ—¶é’ˆä¸¤ä¸ªæ–¹å‘å‘é€é€‰ä¸¾æ¶ˆæ¯ï¼Œè¯·åˆ—å‡ºæ–°ç®—æ³•çš„é«˜å±‚æè¿°ï¼Œå¹¶ç”¨ä¸€ä¸ªå››èŠ‚ç‚¹çš„åŒå‘ç¯æ¥è¯´æ˜ä½ çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ç­”ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ€åˆï¼Œæ‰€æœ‰è¿›ç¨‹æ ‡è®°ä¸ºéå‚ä¸è€…ï¼Œä»»æ„ä¸€ä¸ªè¿›ç¨‹å‘èµ·é€‰ä¸¾ï¼Œå‘èµ·é€‰ä¸¾åï¼Œç½®è‡ªå·±ä¸ºå‚ä¸è€…ï¼ˆ$elected_i = âŠ¥$)ï¼Œå‘ä¸Šä¸‹æ¸¸å‘é€ä¸€ä¸ªé€‰ä¸¾æ¶ˆæ¯ï¼ŒåŒ…å«è‡ªå·±çš„æ ‡è¯†ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹æ”¶åˆ°é€‰ä¸¾æ¶ˆæ¯åï¼Œé‚£ä¹ˆæ¯”è¾ƒè‡ªå·±çš„æ ‡è¯†ç¬¦ä¸æ”¶åˆ°æ¶ˆæ¯ä¸­çš„æ ‡è¯†ç¬¦ï¼Œ
&lt;ul&gt;
&lt;li&gt;å¦‚æœè‡ªå·±çš„æ ‡è¯†ç¬¦å°äºæ¶ˆæ¯ä¸­çš„æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆé¡ºæ¶ˆæ¯æ¥çš„æ–¹å‘ä¼ é€’é€‰ä¸¾æ¶ˆæ¯ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœè‡ªå·±çš„æ ‡è¯†ç¬¦å¤§äºæ¶ˆæ¯ä¸­çš„æ ‡è¯†ç¬¦
&lt;ul&gt;
&lt;li&gt;å¦‚æœè‡ªå·±æ˜¯éå‚ä¸è€…ï¼Œå°†æ¶ˆæ¯ä¸­çš„æ ‡è¯†ç¬¦æ”¹ä¸ºè‡ªå·±æ ‡è¯†ç¬¦ï¼Œé¡ºæ¶ˆæ¯æ¥çš„æ–¹å‘ä¼ é€’é€‰ä¸¾æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè‡ªå·±æ˜¯å‚ä¸è€…ï¼Œåˆ™ä¸è½¬å‘æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¦‚æœè‡ªå·±çš„æ ‡è¯†ç¬¦ç­‰äºæ¶ˆæ¯ä¸­çš„æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆè¯´æ˜è‡ªå·±çš„æ ‡è¯†ç¬¦æœ€å¤§ï¼Œå¦‚æœè¿˜æœªå½“é€‰ï¼Œåˆ™å½“é€‰ä¸ºåè°ƒè€…ï¼Œå‘ä¸Šæ¸¸å’Œä¸‹æ¸¸å‘é€ä¸€ä¸ªå½“é€‰æ¶ˆæ¯ï¼ŒåŒ…å«è‡ªå·±çš„æ ‡è¯†ç¬¦P&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªè¿›ç¨‹æ”¶åˆ°ä¸€ä¸ªå½“é€‰æ¶ˆæ¯ï¼Œå¦‚æœè‡ªå·±æ˜¯å‚ä¸è€…ï¼Œè®¾ç½®$elected_i = P$ï¼Œç½®è‡ªå·±ä¸ºéå‚ä¸è€…ï¼Œå¹¶ä¸”æŒ‰ç…§æ¶ˆæ¯å‘é€çš„æ–¹å‘ä¼ é€’ç»™è‡ªå·±çš„é‚»å±…ï¼›å¦‚æœè‡ªå·±å·²ç»çŸ¥æ™“å½“é€‰æ¶ˆæ¯ï¼Œåˆ™ä¸è½¬å‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code class=&#34;language-pseudocode&#34; data-lang=&#34;pseudocode&#34;&gt;Init elected != âŠ¥ for process i (i = 1,2,...N)

in the process which start an election:
	function startElection():
		electingMSG &amp;lt;- MSG(type = &amp;quot;electing&amp;quot;, value = Local.id)
		Local.elected = &#39;âŠ¥&#39;
		send(msg = electingMSG ,direction = clockwise)
		send(msg = electingMSG , direction = counterclockwise)
	
in process i:
	function handleMSG(MSG msg, Direction direction):
		if msg.type = &amp;quot;electing&amp;quot;:
			if Local.id &amp;lt; msg.id:
				send(msg,direction)
				Local.elected = &#39;âŠ¥&#39;
			else if Local.id &amp;gt; msg.id:
				if Local.elected != &#39;âŠ¥&#39;:
					msg.value = Local.id
					send(msg, direction)
					Local.elected = &#39;âŠ¥&#39;
				end
			else
				if(process i is not Coordinator)
                	setCoordinator(process i)
                	Local.elected = &#39;âŠ¥&#39;
                	electdeMSG &amp;lt;- MSG(type = &amp;quot;elected&amp;quot;, value = Local.id)
                	send(msg = electedMSG, direction = clockwise)
                	send(msg = electedMSG, direction = counterclockwise)
                end
            end
		end      
			
		if msg.type = &amp;quot;elected&amp;quot;
			if Local.elected == &#39;âŠ¥&#39;:
				Local.elected = msg.value
				send(msg, direction)
			end
		end

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;figure 
	&gt;
	&lt;a href=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211209165145519.png&#34; &gt;
		&lt;img src=&#34;https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211209165145519.png&#34;
			
			
			
			loading=&#34;lazy&#34;
			alt=&#34;image-20211209165145519&#34;&gt;
	&lt;/a&gt;
	
	&lt;figcaption&gt;image-20211209165145519&lt;/figcaption&gt;
	
&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­:	ç™½è‰²è¡¨ç¤ºåˆå§‹éå‚ä¸è€…ï¼Œé»„è‰²è¡¨ç¤ºå‚ä¸è€…ï¼Œçº¢è‰²è¡¨ç¤ºçŸ¥é“å½“é€‰ç»“æœã€‚è“è‰²æ˜¯é€‰ä¸¾æ¶ˆæ¯ï¼Œç»¿è‰²æ˜¯å½“é€‰æ¶ˆæ¯ã€‚ä»13å·å¼€å§‹å‘èµ·é€‰ä¸¾ï¼Œæœ€ç»ˆé€‰å‡º23ä¸ºåè°ƒè€…ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç½‘ç»œå¸¦å®½ï¼šæ‰¾åˆ°æœ€å¤§æ ‡è¯†ç¬¦æœ€å¤šéœ€è¦Nä¸ªæ¶ˆæ¯ï¼Œç¡®è®¤æœ€å¤§æ ‡è¯†ç¬¦æœ€å¤šéœ€è¦2Nä¸ªæ¶ˆæ¯ï¼Œé€šçŸ¥å½“é€‰æœ€å¤šéœ€è¦N+1ä¸ªæ¶ˆæ¯ï¼Œåˆ™æœ€å¤šéœ€è¦æ¶ˆæ¯ä¸º 4N+1&lt;/li&gt;
&lt;li&gt;å›è½¬æ—¶é—´ï¼šç¬¬ä¸€è½®å¯»æ‰¾èŠ±è´¹æœ€å¤š(N/2)ä¸ªæ¶ˆæ¯ï¼Œç¬¬äºŒè½®ç¡®è®¤éœ€è¦æœ€å¤šèŠ±è´¹Nä¸ªæ¶ˆæ¯ï¼Œç¬¬ä¸‰è½®é€šçŸ¥æœ€å¤šéœ€è¦èŠ±è´¹(N/2)+1ä¸ªæ¶ˆæ¯ï¼Œæ‰€ä»¥æœ€å¤šéœ€è¦èŠ±è´¹2N+1ä¸ªæ¶ˆæ¯çš„å›è½¬æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;7-åŸºäºç”Ÿæˆæ ‘çš„é€‰ä¸¾ç®—æ³•&#34;&gt;7 åŸºäºç”Ÿæˆæ ‘çš„é€‰ä¸¾ç®—æ³•&lt;/h2&gt;
&lt;p&gt;èŠ‚ç‚¹ä¹‹é—´æŒ‰ç…§ç”Ÿæˆæ ‘æ–¹å¼è¿æ¥ï¼Œä»…æœ‰è¾¹ç›¸è¿çš„èŠ‚ç‚¹èƒ½é€šä¿¡ï¼Œè¯·åŸºäºæ­¤ç½‘ç»œæ‹“æ‰‘ï¼Œè®¾è®¡ä¸€ä¸ªé€‰ä¸¾ç®—æ³•ï¼Œç»™å‡ºå…¶ä¼ªç ã€‚å½“ä»…æœ‰ä¸€ä¸ªè¿›ç¨‹å‘èµ·é€‰ä¸¾ï¼Œä½ çš„é€‰ä¸¾ç®—æ³•æ‰€éœ€çš„æ¶ˆæ¯é‡æ˜¯å¤šå°‘ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”ï¼šå‡å®šæ˜¯æœ‰å‘ç”Ÿæˆæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰çˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å‘å­èŠ‚ç‚¹æˆ–è€…çˆ¶èŠ‚ç‚¹å‘é€æ¶ˆæ¯ã€‚ä»»ä½•ä¸€ä¸ªè¿›ç¨‹éƒ½å¯ä»¥å‘èµ·é€‰ä¸¾ã€‚ç®—æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ”¶åˆ°é€‰ä¸¾æ¶ˆæ¯ï¼Œå°†å‘é€æ¶ˆæ¯çš„æ ‡è¯†ç¬¦å’Œè‡ªå·±çš„æ ‡è¯†ç¬¦ä½œæ¯”è¾ƒï¼Œæ›´æ”¹æ¶ˆæ¯ä¸­çš„ä¿¡æ¯ä¸ºè¾ƒå¤§å€¼ï¼›å¦‚æœæœ‰å­èŠ‚ç‚¹ï¼Œåˆ™å‘å­èŠ‚ç‚¹å‘é€è¿™ä¸ªé€‰ä¸¾æ¶ˆæ¯ï¼›å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™çˆ¶äº²èŠ‚ç‚¹è¿”å›ä¸€ä¸ªå›å¤æ¶ˆæ¯ï¼ŒåŒ…å«å½“å‰çš„è¾ƒå¤§æ ‡è¯†ç¬¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç­‰åˆ°æ”¶åˆ°æ‰€æœ‰å­èŠ‚ç‚¹çš„å›å¤æ¶ˆæ¯ï¼Œé€‰å‡ºæœ€å¤§çš„æ ‡è¯†ç¬¦ï¼Œè¿”å›ç»™çˆ¶äº²èŠ‚ç‚¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“æ ¹èŠ‚ç‚¹æ”¶åˆ°æœ€å¤§çš„ æ ‡è¯†ç¬¦ï¼Œåˆ™å‘æ‰€æœ‰çš„å­èŠ‚ç‚¹å‘é€å½“é€‰ä¿¡æ¯ï¼Œç›´åˆ°å¶èŠ‚ç‚¹ã€‚å¦‚æœæœ‰å­èŠ‚ç‚¹å‘ç°è‡ªå·±çš„æ ‡è¯†ç¬¦ç­‰äºæ¶ˆæ¯ä¸­çš„çš„æ ‡è¯†ç¬¦ï¼Œåˆ™æˆä¸ºåè°ƒè€…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘çš„é€‰ä¸¾ç®—æ³•æ‰€éœ€çš„æ¶ˆæ¯é‡é€‰ä¸¾æœ‰N-1ä¸ªï¼Œå›å¤æœ‰N-1ä¸ªï¼Œå½“é€‰æœ‰N-1ä¸ªï¼Œæ‰€ä»¥æ€»å…±æœ‰3N-3ä¸ªã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-pseudocode&#34; data-lang=&#34;pseudocode&#34;&gt;Init Local.elected != âŠ¥ for process i (i = 1,2,...N)
	 Local.count =0 for process i (i = 1,2,...N)

in the process p0 which start an election:
	function startElection():
		electingMSG &amp;lt;- MSG(type = &amp;quot;electing&amp;quot;, value = Local.id)
		Local.elected = &#39;âŠ¥&#39;
		for i in son(p0):
			send(electingMSG, dest = i)
		end

in process p:
	function handleMSG(MSG msg):
		if msg.type = &amp;quot;electing&amp;quot;:
			Local.elected = &#39;âŠ¥&#39;
			if !isEmpty(son(p):
				msg.value = max(Local.id,msg.value)
				for i in son(p):
					send(msg, dest = i)
				end
			else
				replyMSG = MSG(type = &amp;quot;reply&amp;quot;, value = max(Local.id,msg.value)
				send(relpyMSG, dest = father(p))
            end
            
		if msg.type = &amp;quot;reply&amp;quot;:
			Local.count++;
			msg.value = max(Local.id, msg.value)
			if(Local.count == son(p).size()):
				if !isEmpty(father(p)):
					send(msg, dest = father(p))
				else
					electedMSG = MSG(type = &amp;quot;elected&amp;quot;,value = msg.value)
					for i in son(p):
						send(electedMSG, dest = i)
					end
					Local.elected = msg.value
					if Local.ip == msg.value:
						setCoordinator(process = p)
					end
				end
			end
		end
					
		
		if msg.type = &amp;quot;elected&amp;quot;:
			if Local.ip == msg.value:
				setCoordinator(process = p)
			end
			if !isEmpty(son(p)):
				for i in son(p):
					send(msg, dest = i)
				end
			end
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;8-æ³•å®šæ•°å…±è¯†å¤åˆ¶&#34;&gt;8 æ³•å®šæ•°å…±è¯†å¤åˆ¶&lt;/h2&gt;
&lt;p&gt;åœ¨æœåŠ¡å™¨Xã€Yå’ŒZä¸Šä½¿ç”¨æ³•å®šæ•°å…±è¯†è¿›è¡Œå¤åˆ¶ï¼Œè¿™äº›æœåŠ¡å™¨éƒ½æœ‰æ•°æ®é¡¹Aå’ŒBçš„å‰¯æœ¬ã€‚Aå’ŒBå‰¯æœ¬çš„åˆå§‹å€¼æ˜¯100ï¼Œå¹¶ä¸”åœ¨Xã€Yå’ŒZä¸ŠAå’ŒBçš„é€‰ç¥¨æ˜¯1ã€‚åŒæ ·å¯¹äºAå’ŒBï¼ŒRï¼Wï¼2ã€‚ä¸€ä¸ªå®¢æˆ·è¯»Açš„å€¼ç„¶åå°†å®ƒå†™åˆ°Bä¸Šã€‚&lt;/p&gt;
&lt;p&gt;1ï¼‰å½“å®¢æˆ·æ‰§è¡Œè¿™äº›æ“ä½œæ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªåˆ†åŒºï¼Œå°†æœåŠ¡å™¨Xå’ŒYä¸æœåŠ¡å™¨Zåˆ†éš”å¼€äº†ã€‚æè¿°å½“å®¢æˆ·èƒ½è®¿é—®æœåŠ¡å™¨Xå’ŒYæ—¶ï¼Œè·å¾—çš„æ³•å®šæ•°å’Œå‘ç”Ÿçš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;2ï¼‰æè¿°å½“å®¢æˆ·ä»…èƒ½è®¿é—®æœåŠ¡å™¨Zæ—¶ï¼Œè·å¾—çš„æ³•å®šæ•°å’Œå‘ç”Ÿçš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;3ï¼‰åˆ†åŒºä¿®å¤äº†ï¼Œç„¶åå¦ä¸€ä¸ªåˆ†åŒºå‘ç”Ÿäº†ï¼Œç»“æœXå’ŒZä¸Yåˆ†éš”å¼€äº†ã€‚æè¿°å½“å®¢æˆ·èƒ½è®¿é—®æœåŠ¡å™¨Xå’ŒZæ—¶ï¼Œè·å¾—çš„æ³•å®šæ•°å’Œå‘ç”Ÿçš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ç­”ï¼š&lt;/p&gt;
&lt;p&gt;1ï¼‰åœ¨æ•°æ®çš„v0ç‰ˆæœ¬æ—¶ï¼ŒAå’ŒBå‰¯æœ¬çš„åˆå§‹å€¼æ˜¯100ï¼Œå‡ºç°äº†ä¸€ä¸ªåˆ†åŒºï¼Œå°†æœåŠ¡å™¨Xå’ŒYä¸æœåŠ¡å™¨Zåˆ†éš”å¼€ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;X&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Y&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Z&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;A = 100ï¼ˆv0)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;A = 100ï¼ˆv0)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;A = 100ï¼ˆv0)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;B = 100ï¼ˆv0)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;B = 100ï¼ˆv0)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;B = 100ï¼ˆv0)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;â€‹	å®¢æˆ·å¯èƒ½ä»Xæˆ–è€…Yä¸Šè¯»å–Aï¼ŒR = 1+1 =2ï¼Œè¯»å–æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;â€‹	å®¢æˆ·éœ€è¦åœ¨Xå’ŒYä¸Šå†™Bï¼ŒW = 1+1 = 2ï¼Œ å†™æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;2)å®¢æˆ·åªèƒ½è®¿é—®æœåŠ¡å™¨Zï¼ŒR = 1ï¼Œå®¢æˆ·æ— æ³•è¯»å–ï¼›W = 1ï¼Œå®¢æˆ·æ— æ³•å†™ã€‚&lt;/p&gt;
&lt;p&gt;3)å½“åˆ†åŒºè¢«ä¿®å¤åï¼Œå› ä¸ºä¹‹å‰çš„åˆ†åŒºå¯¼è‡´Xå’ŒYçš„æ•°æ®è¦æ¯”Zä¸Šçš„æ•°æ®æ›´æ–°ï¼Œä¾‹å¦‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;X&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Y&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Z&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;A = 200ï¼ˆv1)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;A = 200ï¼ˆv1)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;A = 100ï¼ˆv0)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;B = 300ï¼ˆv1)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;B = 300ï¼ˆv1)&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;B = 100ï¼ˆv0)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œå¦ä¸€ä¸ªåˆ†åŒºå‡ºç°ï¼ŒXå’ŒZä¸Yåˆ†éš”å¼€ï¼Œå½“å®¢æˆ·è¯•å›¾è·å–æ³•å®šæ•°çš„æ—¶å€™ï¼Œå‘ç°Zçš„æ•°æ®ç‰ˆæœ¬è¿‡æ—¶ï¼Œäºæ˜¯Zæ ¹æ®Xä¸Šçš„æœ€æ–°æ•°æ®æ›´æ–°è‡ªå·±ã€‚ä¹‹åå®¢æˆ·è·å–è¯»æ³•å®šæ•°ï¼ŒR = 1+1 =2ï¼Œç„¶åè¯»æˆåŠŸã€‚å®¢æˆ·è·å–å†™æ³•å®šæ•°ï¼ŒW = 1+1 =2ï¼Œå†™æˆåŠŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;9-ä¸²è¡Œç­‰ä»·çš„äº¤é”™æ‰§è¡Œ&#34;&gt;9 ä¸²è¡Œç­‰ä»·çš„äº¤é”™æ‰§è¡Œ&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªæœåŠ¡å™¨ç®¡ç†å¯¹è±¡a1, a2, &amp;hellip; an ï¼Œå®ƒä¸ºå®¢æˆ·æä¾›ä¸‹é¢ä¸¤ç§æ“ä½œï¼šread (i)è¿”å›å¯¹è±¡aiçš„å€¼ã€‚write(i, Value)å°†å¯¹è±¡aiè®¾ç½®ä¸ºå€¼Valueã€‚&lt;/p&gt;
&lt;p&gt;äº‹åŠ¡Tå’ŒUå®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;em&gt;T&lt;/em&gt;: &lt;em&gt;x&lt;/em&gt; = &lt;em&gt;read&lt;/em&gt;(&lt;em&gt;j&lt;/em&gt;); &lt;em&gt;y&lt;/em&gt; = &lt;em&gt;read&lt;/em&gt; (&lt;em&gt;i&lt;/em&gt;); &lt;em&gt;write&lt;/em&gt;(&lt;em&gt;j&lt;/em&gt;, 44); &lt;em&gt;write&lt;/em&gt;(&lt;em&gt;i&lt;/em&gt;, 33)&lt;/p&gt;
&lt;p&gt;&lt;em&gt;U&lt;/em&gt;: &lt;em&gt;x&lt;/em&gt; = &lt;em&gt;read&lt;/em&gt;(&lt;em&gt;k&lt;/em&gt;); &lt;em&gt;write&lt;/em&gt;(&lt;em&gt;i&lt;/em&gt;, 55); &lt;em&gt;y&lt;/em&gt; = &lt;em&gt;read&lt;/em&gt; (&lt;em&gt;j&lt;/em&gt;); &lt;em&gt;write&lt;/em&gt;(&lt;em&gt;k&lt;/em&gt;, 66)&lt;/p&gt;
&lt;p&gt;è¯·ç»™å‡ºäº‹åŠ¡Tå’ŒUçš„3ä¸ªä¸²è¡ŒåŒ–ç­‰ä»·çš„äº¤é”™æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ç­”ï¼šæˆ‘ä»¬ç»™æ¯ä¸€æ­¥åˆ†åˆ«è¡¨ä¸Šåºå·ï¼š&lt;/p&gt;
&lt;p&gt;&lt;em&gt;T&lt;/em&gt;: â‘ &lt;em&gt;x&lt;/em&gt; = &lt;em&gt;read&lt;/em&gt;(&lt;em&gt;j&lt;/em&gt;); â‘¡&lt;em&gt;y&lt;/em&gt; = &lt;em&gt;read&lt;/em&gt; (&lt;em&gt;i&lt;/em&gt;); â‘¢&lt;em&gt;write&lt;/em&gt;(&lt;em&gt;j&lt;/em&gt;, 44); â‘£&lt;em&gt;write&lt;/em&gt;(&lt;em&gt;i&lt;/em&gt;, 33)&lt;/p&gt;
&lt;p&gt;&lt;em&gt;U&lt;/em&gt;: â‘¤&lt;em&gt;x&lt;/em&gt; = &lt;em&gt;read&lt;/em&gt;(&lt;em&gt;k&lt;/em&gt;); â‘¥&lt;em&gt;write&lt;/em&gt;(&lt;em&gt;i&lt;/em&gt;, 55); â‘¦&lt;em&gt;y&lt;/em&gt; = &lt;em&gt;read&lt;/em&gt; (&lt;em&gt;j&lt;/em&gt;); â‘§&lt;em&gt;write&lt;/em&gt;(&lt;em&gt;k&lt;/em&gt;, 66)&lt;/p&gt;
&lt;p&gt;å¦‚æœæŒ‰ç…§å…ˆTåUçš„é¡ºåºä¾æ¬¡æ‰§è¡Œä¸€ä¸ªäº‹åŠ¡çš„è¯ï¼Œæˆ‘ä»¬å‘ç°â‘ å’Œâ‘¤ï¼Œâ‘¡å’Œâ‘¦ï¼Œâ‘£å’Œâ‘¥æœ‰å†™åå†™ä¾èµ–ï¼›â‘¢å’Œâ‘¦æœ‰å†™åè¯»ä¾èµ–ï¼Œâ‘ å’Œâ‘¢ï¼Œâ‘¡å’Œâ‘£ï¼Œâ‘¡å’Œâ‘¥ï¼Œâ‘¤å’Œâ‘§æœ‰è¯»åå†™ä¾èµ–ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ä¿è¯è¿™äº›ä¾èµ–çš„é€»è¾‘é¡ºåºï¼Œä¸²è¡ŒåŒ–ç­‰ä»·çš„äº¤é”™æ‰§è¡Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;â‘ â‘¤â‘¡â‘¢â‘£â‘¥â‘¦â‘§&lt;/p&gt;
&lt;p&gt;â‘ â‘¢â‘¤â‘¡â‘£â‘¦â‘§â‘¥&lt;/p&gt;
&lt;p&gt;â‘ â‘¤â‘¢â‘¡â‘§â‘¦â‘£â‘¥&lt;/p&gt;
&lt;h2 id=&#34;10-ä¹è§‚å¹¶å‘æ§åˆ¶&#34;&gt;10 ä¹è§‚å¹¶å‘æ§åˆ¶&lt;/h2&gt;
&lt;p&gt;è€ƒè™‘å°†ä¹è§‚å¹¶å‘æ§åˆ¶åº”ç”¨äºä¸‹åˆ—äº‹åŠ¡Tå’ŒUçš„æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;â€‹    &lt;em&gt;T&lt;/em&gt;: &lt;em&gt;x&lt;/em&gt; = &lt;em&gt;read&lt;/em&gt;(&lt;em&gt;i&lt;/em&gt;); &lt;em&gt;write&lt;/em&gt;(&lt;em&gt;j&lt;/em&gt;, 44);&lt;/p&gt;
&lt;p&gt;â€‹    &lt;em&gt;U&lt;/em&gt;: &lt;em&gt;write&lt;/em&gt;(&lt;em&gt;i&lt;/em&gt;, 55); &lt;em&gt;write&lt;/em&gt;(&lt;em&gt;j&lt;/em&gt;, 66);&lt;/p&gt;
&lt;p&gt;å¦‚æœäº‹åŠ¡Tå’ŒUåŒæ—¶å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œè¯•æè¿°ä»¥ä¸‹å‡ ç§æƒ…å†µçš„ç»“æœå¦‚ä½•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æœåŠ¡å™¨é¦–å…ˆå¤„ç†Tçš„æäº¤è¯·æ±‚ï¼Œä½¿ç”¨å‘åéªŒè¯æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨é¦–å…ˆå¤„ç†Uçš„æäº¤è¯·æ±‚ï¼Œä½¿ç”¨å‘åéªŒè¯æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨é¦–å…ˆå¤„ç†Tçš„æäº¤è¯·æ±‚ï¼Œä½¿ç”¨å‘å‰éªŒè¯æ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨é¦–å…ˆå¤„ç†Uçš„æäº¤è¯·æ±‚ï¼Œä½¿ç”¨å‘å‰éªŒè¯æ–¹å¼ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹äºä¸Šé¢çš„æ¯ç§æƒ…å†µï¼Œæè¿°äº‹åŠ¡Tå’ŒUçš„æ“ä½œé¡ºåºï¼Œæ³¨æ„å†™æ“ä½œåœ¨éªŒè¯é€šè¿‡ä¹‹åæ‰çœŸæ­£èµ·ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ç­”ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡å™¨é¦–å…ˆå¤„ç†Tçš„æäº¤è¯·æ±‚ï¼Œä½¿ç”¨å‘åéªŒè¯æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;Tå…ˆå¼€å§‹æ‰€ä»¥Tçš„éªŒè¯é˜¶æ®µæ— äº‹å‘ç”Ÿï¼ŒUè¿›å…¥éªŒè¯é˜¶æ®µä¹‹åï¼ŒUæ²¡æœ‰è¯»é›†ï¼Œæ‰€ä»¥æ²¡æœ‰å†²çªï¼Œå¯ä»¥é¡ºåˆ©æäº¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡å™¨é¦–å…ˆå¤„ç†Uçš„æäº¤è¯·æ±‚ï¼Œä½¿ç”¨å‘åéªŒè¯æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;Tè¿›å…¥éªŒè¯é˜¶æ®µï¼Œå‘ç°Tçš„è¯»é›†{i}ä¸Uçš„å†™é›†{i, j}æœ‰å†²çªï¼ŒTäº‹åŠ¡è¢«æ”¾å¼ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡å™¨é¦–å…ˆå¤„ç†Tçš„æäº¤è¯·æ±‚ï¼Œä½¿ç”¨å‘å‰éªŒè¯æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;Uè¿›å…¥éªŒè¯é˜¶æ®µï¼Œå‘ç°Uçš„å†™é›†{i,j}ä¸Tçš„è¯»é›†{i}æœ‰å†²çªï¼Œæ‰€ä»¥æ¨è¿ŸéªŒè¯ï¼Œç­‰Tçš„è¯»é›†æ‰§è¡Œå®Œæ¯•ä¹‹åå†æäº¤Uã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡å™¨é¦–å…ˆå¤„ç†Uçš„æäº¤è¯·æ±‚ï¼Œä½¿ç”¨å‘å‰éªŒè¯æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;Tè¿›å…¥éªŒè¯é˜¶æ®µï¼Œå‘ç°Uæ— è¯»é›†ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡éªŒè¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>ã€å®ä¹ é¢è¯•ã€‘é˜¿é‡Œå®ä¹ äºŒé¢</title>
        <link>https://tweakzx.github.io/p/%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E9%98%BF%E9%87%8C%E5%AE%9E%E4%B9%A0%E4%BA%8C%E9%9D%A2/</link>
        <pubDate>Sat, 04 Dec 2021 18:31:16 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E9%98%BF%E9%87%8C%E5%AE%9E%E4%B9%A0%E4%BA%8C%E9%9D%A2/</guid>
        <description>&lt;img src="https://img2.baidu.com/it/u=3334504742,937198599&fm=26&fmt=auto" alt="Featured image of post ã€å®ä¹ é¢è¯•ã€‘é˜¿é‡Œå®ä¹ äºŒé¢" /&gt;&lt;blockquote&gt;
&lt;p&gt;æ—¶é—´ï¼š2021-12-2 ä¸‹åˆ5ç‚¹åŠ&lt;/p&gt;
&lt;p&gt;æ–¹å¼ï¼šé˜¿é‡Œä¼šè®®è§†é¢‘é¢è¯•&lt;/p&gt;
&lt;p&gt;å²—ä½ï¼šç ”ç©¶å‹å®ä¹ ç”Ÿ-æ™ºèƒ½å­˜å‚¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;é¢è¯•è¿‡ç¨‹&#34;&gt;é¢è¯•è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;è¿™æ¬¡é¢è¯•ä¸»è¦æ˜¯åœ¨èŠé¡¹ç›®ï¼ŒèŠå…´è¶£å•¥çš„ã€‚æ²¡æœ‰ä»€ä¹ˆç®—æ³•æˆ–è€…çŸ¥è¯†ç‚¹çš„æé—®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…ˆåšä¸€ä¸‹è‡ªæˆ‘ä»‹ç»ã€‚&lt;/li&gt;
&lt;li&gt;é—®æˆ‘è§‰å¾—è‡ªå·±åœ¨å­¦ä¹ ä¸Šçš„æœ€å¤§ä¼˜åŠ¿æ˜¯ä»€ä¹ˆã€‚&lt;/li&gt;
&lt;li&gt;é—®æˆ‘å¤§ä¸‰å®ä¹ çš„ä¸»è¦å·¥ä½œï¼Œè¿™ä¸€éƒ¨åˆ†æˆ‘è¿˜æ˜¯å¿½ç•¥çš„å¸¦è¿‡äº†ã€‚&lt;/li&gt;
&lt;li&gt;è®²äº†è‡ªå·±çš„å¤§äºŒæ—¶çš„æ¯”èµ›ã€‚&lt;/li&gt;
&lt;li&gt;é—®äº†å¯ä»¥å®ä¹ çš„æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;ç›®å‰åœ¨å­¦æ ¡é‡Œéƒ½å­¦äº†ä»€ä¹ˆè¯¾ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;é¢è¯•å®˜é—®æˆ‘å¤§å››åœ¨åšä»€ä¹ˆï¼Œæˆ‘å›ç­”è‡ªå·±ä¿ç ”ååœ¨è¯¾é¢˜ç»„é‡Œåšç»“é¡¹çš„äº‹æƒ…ã€‚é¢è¯•å®˜æ¯”è¾ƒå¥½å¥‡æˆ‘è‡ªå·±éƒ½åšäº†ä»€ä¹ˆï¼Œæˆ‘å›ç­”ä¸œè¥¿éƒ½æ˜¯åˆ«äººåšçš„ï¼Œæˆ‘å°±æ˜¯æä¾›ä¸€äº›è¾…åŠ©æ€§çš„å·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åè¯¢é—®æˆ‘è¯¾é¢˜ç»„çš„ä¸»è¦ç ”ç©¶æ˜¯ä»€ä¹ˆï¼Œæˆ‘å›ç­”äº‘è®¡ç®—ï¼Œdockerï¼Œk8sä¹‹ç±»çš„ã€‚é¢è¯•å®˜é—®é‚£ä¸ºå•¥ä½ åšçš„ä¸œè¥¿å’Œäº‘è®¡ç®—ä¸€ç‚¹å…³ç³»éƒ½æ²¡æœ‰ï¼Œåˆå»åšäº†ç®—æ³•NLPï¼Œæˆ‘å›ç­”è¿™æ˜¯è€å¸ˆå®‰æ’çš„ã€‚&lt;/li&gt;
&lt;li&gt;é—®æˆ‘å¯¹dockerï¼Œk8säº†è§£å¤šå°‘ã€‚æˆ‘å›ç­”ä»…ä»…ä¼šç®€å•çš„ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;åæ¥é¢è¯•å®˜è§£é‡ŠNLPä¹‹ç±»çš„å·¥ä½œä¸€èˆ¬æ˜¯è¾¾æ‘©é™¢å†…è¾¹æ¥åšï¼Œæ„æ€å¯èƒ½æ˜¯è¿™è¾¹è¿˜æ˜¯åé‡äºå¼€å‘ã€‚&lt;/li&gt;
&lt;li&gt;é—®æˆ‘å¯¹è¿™ä¸ªéƒ¨é—¨çš„å·¥ä½œäº†è§£å—ï¼Œä¸€é¢æœ‰ä»‹ç»å—ï¼Ÿæˆ‘å›ç­”å’Œå­˜å‚¨ï¼Œé¢„è®­ç»ƒæ¨¡å‹å¥½åƒæœ‰å…³ã€‚&lt;/li&gt;
&lt;li&gt;é¢è¯•å®˜è¯´ä½ è¦è‡ªå·±æƒ³å¥½è‡ªå·±è¦åšä»€ä¹ˆæ–¹å‘ï¼Œå…´è¶£æ˜¯æœ€å¥½çš„è€å¸ˆå•¥çš„ã€‚ï¼ˆæˆ‘ä¹Ÿæƒ³å•Šï¼‰&lt;/li&gt;
&lt;li&gt;é¢è¯•å®˜é—®æˆ‘å¯¹NLPäº†è§£å¤šå°‘ï¼Œæˆ‘è¯´ä»…ä»…æ¯•ä¸šè®¾è®¡å’Œè¿™ä¸ªæœ‰å…³ï¼ŒçŸ¥é“é¢„è®­ç»ƒå’Œè’¸é¦ã€‚&lt;/li&gt;
&lt;li&gt;ä»–è¯´æ„Ÿè§‰ä½ å¯¹è¿™äº›æ–¹é¢éƒ½æœ‰ä¸€ç‚¹äº†è§£ï¼Œä½†åˆéƒ½ä¸æ·±ï¼Œä¸çŸ¥é“ä½ å°†æ¥è¦åšä»€ä¹ˆã€‚æˆ‘å›ç­”è‡ªå·±ç›®å‰è¿˜åœ¨æ¢ç´¢ï¼Œæ‰“ç®—å…ˆå¼€å§‹åšåœ¨å»æ„Ÿå—è‡ªå·±æƒ³è¦ä»€ä¹ˆã€‚&lt;/li&gt;
&lt;li&gt;æ„Ÿè§‰èŠåˆ°è¿™é‡Œï¼Œå…¶å®å·²ç»æ— è¯å¯èŠäº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢æ˜¯åé—®ç¯èŠ‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘è¯´è‡ªå·±å¯èƒ½é—®çš„é—®é¢˜æ¯”è¾ƒå¤§ä¸å¥½å›ç­”ï¼šå¦‚æœæˆ‘æœ‰æœºä¼šå¾—åˆ°è¿™ä¸ªofferï¼Œé‚£æˆ‘éœ€è¦å¼¥è¡¥çš„å·®è·åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿ&lt;/li&gt;
&lt;li&gt;é¢è¯•å®˜ä»ä¸¤ä¸ªæ–¹é¢å»ºè®®ï¼Œä¸€ä¸ªå°±æ˜¯å¦‚æœè®¡ç®—æƒ³æç®—æ³•çš„è¯ï¼Œblablaæˆ‘å¿˜äº†ã€‚å¦‚æœæƒ³åšå¼€å‘çš„è¯ï¼Œå¯ä»¥å­¦ä¹ ä¸€ä¸‹äº‘åŸç”Ÿï¼Œäº‘è®¡ç®—ä¹‹ç±»çš„çŸ¥è¯†ã€‚&lt;/li&gt;
&lt;li&gt;é¢è¯•å®˜åˆ†æäº†ä¸€ä¸‹ä¹‹åï¼Œæˆ‘å›ç­”è‡ªå·±çš„ç†è§£ä¸çœ‹æ³• ï¼Œä¸»è¦è¯´äº†äººå·¥æ™ºèƒ½æ˜¯ä¸€ç§æ‹¿æ¥åº”ç”¨çš„æŠ€æœ¯ï¼Œåšå·¥ç¨‹çš„è¿‡ç¨‹ä¸­æ‹¿æ¥ä½¿ç”¨ï¼Œæ˜¯å·¥ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ä¸æ˜¯æ‰€æœ‰äººéƒ½è¦å»ç ”ç©¶æ¨¡å‹ï¼Œæˆ‘ä»¬èƒ½æ‹¿æ¥å³ç”¨å³å¯ï¼Œè¿˜æ˜¯è¦å»æå‡å·¥ç¨‹ä¸Šçš„å¼€å‘èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é¢è¯•æ€»ç»“&#34;&gt;é¢è¯•æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æˆ‘å…¶å®çœ‹ä¸å‡ºæ¥è¿™æ¬¡çš„ç»“æœå¥½åï¼Œé¢è¯•å®˜ä¹Ÿç¡®å®æåˆ°äº†æ¬¢è¿æ¥å»åšä¸€äº›å°è¯•ï¼Œå¯ä»¥å…ˆè¿›æ¥ï¼Œå®ä¹ çš„è¿‡ç¨‹ä¸­æ‘¸ç´¢è‡ªå·±çš„å…´è¶£ï¼Œæ„Ÿå—ä¸€ä¸‹å„ä¸ªæ–¹å‘æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä½†æ›´åƒæ˜¯ä¸€äº› &lt;del&gt;è¯´æ³•æ­£ç¡®çš„å®¢å¥—è¯&lt;/del&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰è¿˜åœ¨ç­‰ç»“æœã€‚ï¼ˆå¸Œæœ›ç»“æœæ˜¯å¥½çš„å§ï¼‰&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€å®ä¹ é¢è¯•ã€‘é˜¿é‡Œå®ä¹ ç”Ÿé¢è¯•</title>
        <link>https://tweakzx.github.io/p/%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E9%98%BF%E9%87%8C%E5%AE%9E%E4%B9%A0%E7%94%9F%E9%9D%A2%E8%AF%95/</link>
        <pubDate>Wed, 01 Dec 2021 21:49:57 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E9%98%BF%E9%87%8C%E5%AE%9E%E4%B9%A0%E7%94%9F%E9%9D%A2%E8%AF%95/</guid>
        <description>&lt;img src="https://img2.baidu.com/it/u=3334504742,937198599&fm=26&fmt=auto" alt="Featured image of post ã€å®ä¹ é¢è¯•ã€‘é˜¿é‡Œå®ä¹ ç”Ÿé¢è¯•" /&gt;&lt;blockquote&gt;
&lt;p&gt;æ—¶é—´ï¼š2021-11-30 ä¸‹åˆ2ç‚¹&lt;/p&gt;
&lt;p&gt;æ–¹å¼ï¼šé˜¿é‡Œä¼šè®®è§†é¢‘é¢è¯•&lt;/p&gt;
&lt;p&gt;å²—ä½ï¼šç ”ç©¶å‹å®ä¹ ç”Ÿ-æ™ºèƒ½å­˜å‚¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆä¼šå‚åŠ è¿™æ¬¡é¢è¯•&#34;&gt;ä¸ºä»€ä¹ˆä¼šå‚åŠ è¿™æ¬¡é¢è¯•ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å› ä¸ºæƒ³è¦äº²èº«å‚ä¸çœŸå®çš„ç§‘ç ”æ´»åŠ¨æˆ–è€…ä¸€ä¸ªçœŸå®ä¼ä¸šå†…çš„åšå·¥ç¨‹çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥æŠ•é€’äº†è¿™ä»½ç®€å†ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æƒ³åˆ°ä¼šç»™æˆ‘å®‰æ’é¢è¯•ã€‚å…¶å®é¢è¯•çš„æ—¶å€™æˆ‘å·²ç»å¿˜è®°è‡ªå·±æŠ•é€’çš„æ˜¯å“ªä¸ªè¯¾é¢˜äº†ï¼Œç°åœ¨æ¨æµ‹ä¸€ä¸‹å¯èƒ½æ˜¯å¤§è§„æ¨¡é¢„è®­ç»ƒæ¨¡å‹çš„è¿ç§»å•¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºé¢è¯•çš„å‰ä¸€å¤©å‚åŠ äº†å­—èŠ‚çš„é¢è¯•ï¼Œååˆ†æŒ«è´¥ï¼Œæ‰€ä»¥å¯¹é¢è¯•å¯ä»¥è¯´ååˆ†æ²¡æœ‰ä¿¡å¿ƒï¼ŒåŠ ä¸Šæ”¶åˆ°çš„é‚®ä»¶é‡Œæ²¡æœ‰ä¼šè®®é“¾æ¥ã€‚æ— è®ºé¢ä¸ä¸é¢ï¼Œè¿Ÿæ—©è¦æ‰“ç”µè¯å‘ŠçŸ¥ï¼Œæ‰€ä»¥ç´¢æ€§å†³å®šæ‰“ç”µè¯æ¨è¾æ‰è¿™ä¸ªé¢è¯•ã€‚æ‰“äº†ç”µè¯ï¼Œä¼°è®¡ä¸­åˆé¢è¯•è”ç³»äººå¯èƒ½åœ¨ä¼‘æ¯ï¼Œæ‰€ä»¥è¿‡äº†ä¸€ä¼šæ‰æ¥åˆ°ï¼Œé¢è¯•è”ç³»äººåŠè¯´æˆ‘é¢è¯•æ²¡æœ‰åçš„å½±å“ï¼Œå°±å½“é”»ç‚¼è‡ªå·±ï¼Œåªæœ‰å¥½å¤„æ²¡æœ‰åå¤„ï¼Œä¸å¦‚ä¸€è¯•ã€‚æ‰€ä»¥æ²¡æœ‰æ¨è„±ï¼Œåæ­£å°±ä¸€ä¸ªå°æ—¶ï¼Œä¸€ä¸ªå°æ—¶ä¹‹åæˆ‘çš„ç”Ÿæ´»è¿˜ä¼šæ¢å¤åŸæ ·ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¢è¯•è¿‡ç¨‹&#34;&gt;é¢è¯•è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;é¢è¯•çš„æ—¶å€™å‘ç°åˆšåˆšæ¥ç”µè¯çš„äººåº”è¯¥å°±æ˜¯é¢è¯•å®˜ï¼Œé¢è¯•å®˜ç»™æˆ‘è¯¦ç»†ä»‹ç»äº†ä¸€ä¸‹ä»€ä¹ˆæ˜¯ç ”ç©¶å‹å®ä¹ ç”Ÿä»¥åŠå®ƒå’Œå…¶ä»–çš„å®ä¹ ç”Ÿçš„åŒºåˆ«ï¼Œä»¥åŠå¯¹æ‹›è˜çš„å½±å“ã€‚ç„¶åå°±å¼€å§‹é¢è¯•ï¼Œå…ˆæ˜¯è‡ªæˆ‘ä»‹ç»ï¼Œè¿˜æ˜¯ä»‹ç»äº†æœ¬ç§‘ï¼Œç ”ç©¶ç”Ÿçš„å­¦æ ¡å’Œä¸“ä¸šï¼Œå®ä¹ ä¸æ¯”èµ›ã€‚é—®äº†æˆ‘å¤§æ¦‚æƒ³åšç§‘ç ”è¿˜æ˜¯åå·¥ç¨‹çš„æ–¹å‘ï¼Œæˆ‘å›ç­”å·¥ç¨‹ï¼Œä½†åæ¥æƒ³æƒ³åº”è¯¥å›ç­”æˆ‘éƒ½è¡Œçš„å…¶å®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¢è¯•äº†ä¸€é“&lt;strong&gt;ç®—æ³•é¢˜&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å°†ä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰å•è¯åè½¬ï¼Œä½†æ˜¯å¯¹ç©ºé—´çš„å¼€é”€æœ‰é™åˆ¶ï¼Œæœ€å¥½æ˜¯åœ¨åŸåœ°å€ä¸Šç›´æ¥ä¿®æ”¹ï¼Œå¦‚æœç”¨æ ˆï¼Œæˆ–è€…åˆ‡å‰²å•è¯æˆæ•°ç»„ä¹‹ç±»çš„æ–¹å¼éƒ½æ˜¯ä¸ç¬¦åˆç©ºé—´å¼€é”€è¦æ±‚çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åˆšå¼€å§‹æˆ‘æƒ³çš„æ˜¯å°†å•è¯å…ˆåˆ‡å‡ºæ¥ï¼Œé¢è¯•å®˜å‘ç°æˆ‘å¯èƒ½æ²¡æœ‰ç†è§£é¢˜ç›®å°±åˆè¯´äº†ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä¹‹åæƒ³è¯´åˆ¤æ–­ç©ºæ ¼ ç„¶ååšé¦–å°¾äº¤æ¢ï¼Œé¢è¯•å®˜æé†’æˆ‘å•è¯çš„é•¿åº¦å¯èƒ½æ˜¯ä¸ä¸€è‡´çš„ï¼Œè®©æˆ‘å†æƒ³æƒ³ã€‚&lt;/p&gt;
&lt;p&gt;é¢è¯•å®˜è¯´å¯ä»¥å…ˆè¯´ä¸€ä¸‹æ€è·¯ï¼Œå†å†™ä»£ç ã€‚ï¼ˆè¯´å®è¯è¿™ç‚¹è¿˜æŒºèµçš„ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;æœ€åæˆ‘æƒ³äº†æƒ³ï¼Œè¯´å®è¯å› ä¸ºæ²¡æœ‰ä»€ä¹ˆä¿¡å¿ƒï¼Œæˆ‘éƒ½æƒ³æ”¾å¼ƒç®—äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä½†ååè¿˜æ˜¯æƒ³åˆ°äº†&lt;strong&gt;å…ˆæŠŠæ¯ä¸ªå•è¯éƒ½å…ˆåœ¨å±€éƒ¨åè½¬ï¼Œç„¶åå…¨å±€ä¸€èµ·åè½¬&lt;/strong&gt;å°±ä¸ä¼šäº§ç”Ÿå¤§çš„ç©ºé—´å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;é¢è¯•å®˜è¯´è¿™ä¸ªæƒ³æ³•æ˜¯å¯¹çš„ï¼Œç„¶åè®©æˆ‘è‡ªå·±å®ç°ä¸€ä¸‹ï¼Œå°±å¤§æ¦‚å†™äº†å†™ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;åˆé—®äº†æˆ‘è¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Œæˆ‘è¯´æ˜¯O(n)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é—®å¹³æ—¶æ€ä¹ˆåš&lt;strong&gt;æµ‹è¯•&lt;/strong&gt;ï¼Œæˆ‘å›ç­”ç”¨è‡ªå·±è®¾è®¡æµ‹è¯•æ ·ä¾‹ï¼Œç„¶åprintçš„æ–¹æ³•å’Œç¼–è¾‘å™¨è°ƒè¯•ã€‚&lt;/p&gt;
&lt;p&gt;ä»–é—®æˆ‘æœ‰ä¹ˆæœ‰ç”¨ä»€ä¹ˆæµ‹è¯•å·¥å…·ä¹‹ç±»çš„ï¼Œæˆ‘è¯´åœ¨è¯¾ä¸Šå­¦è¿‡UnitTest4ï¼Œä½†å®é™…ä¸Šæ²¡ç”¨è¿‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çŸ¥ä¸çŸ¥é“&lt;strong&gt;å¤šçº¿ç¨‹&lt;/strong&gt;ï¼Œpthreadä¹‹ç±»çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¹‹åèŠäº†&lt;strong&gt;å®ä¹ &lt;/strong&gt;ï¼Œå®ä¹ æ—¶å†™çš„Jsonå·¥å…·ï¼Œæ—¥å¿—æ¥å£å¼€å‘ã€‚æˆ‘éƒ½å›ç­”å…¶å®æ²¡æœ‰ä»€ä¹ˆå«é‡‘é‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç„¶åæ˜¯æœºå™¨äºº&lt;strong&gt;å¤§èµ›&lt;/strong&gt;ï¼Œè·¯å¾„è§„åˆ’ç®—æ³•ç”¨çš„æ˜¯A* ,é—®æˆ‘ä¸ºä»€ä¹ˆç”¨A* è€Œä¸æ˜¯ç”¨æœºå™¨äººèµ°è¿·å®«çš„æ–¹å¼æ¥æ“æ§æœºå™¨äººã€‚å’Œè§†è§‰ç®—æ³•çš„è®¾è®¡ï¼Œä»¥åŠOpenCVå•¥çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ€åèŠäº†æœ¬ç§‘&lt;strong&gt;æ¯•è®¾&lt;/strong&gt;ï¼Œä»‹ç»äº†è‡ªå·±çš„æ¯•è®¾å†…å®¹ï¼Œé—®æˆ‘è§‰å¾—æœ€æœ‰æŒ‘æˆ˜çš„éƒ¨åˆ†æ˜¯å•¥ã€‚æˆ‘å›ç­”æ˜¯losså‡½æ•°çš„è®¾è®¡ï¼Œä¸‰æ®µè’¸é¦ï¼Œæ¯æ®µçš„ä¸åŒçš„æŸå¤±è®¡ç®—æ–¹æ³•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶åå°±æ˜¯åé—®ç¯èŠ‚ï¼Œæˆ‘æ²¡é—®ï¼Œç¡®å®ä¸çŸ¥é“é—®å•¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¢è¯•æ€»ç»“&#34;&gt;é¢è¯•æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å¤§æ¦‚å°±åªè®°å¾—è¿™äº›äº†ï¼Œå¥½åƒå¿˜è®°äº†å¾ˆå¤šå…¶ä»–çš„ç»†èŠ‚ï¼Œä½†æ˜¯é¢è¯•å®Œå¿ƒæƒ…ä¹Ÿæ¯”ä¹‹å‰å¥½äº†ä¸€äº›ã€‚&lt;/p&gt;
&lt;p&gt;é˜¿é‡Œå·´å·´çš„è¿™æ¬¡é¢è¯•ç»™æˆ‘æœ€å¤§çš„æ„Ÿå—å°±æ˜¯ï¼Œé¢è¯•å®˜ä¼šç¡®è®¤è‡ªå·±çš„æ„æ€æœ‰æ²¡æœ‰å‡†ç¡®ä¼ è¾¾ç»™æˆ‘ï¼Œè¿™ä¸ªç»†èŠ‚è¿˜æŒºä»¤æˆ‘æ„ŸåŠ¨çš„ã€‚é¢è¯•å®˜ä¼šæŠŠè‡ªå·±çš„é—®é¢˜æˆ–è€…å¾ˆå¤šè¦è€ƒè™‘çš„æƒ…å†µè®²çš„å¾ˆç»†è‡´ï¼Œç¡®è®¤æˆ‘ç†è§£ä¹‹åå†è®©æˆ‘æ€è€ƒå¹¶å›ç­”ï¼Œè¿™æ ·å…¶å®å¯¹æˆ‘è¿™æ ·ä¸å¤ªç†Ÿæ‚‰é¢è¯•çš„äººååˆ†å‹å¥½çš„ã€‚&lt;/p&gt;
&lt;p&gt;é¢è¯•çš„ç»“æœè¿˜ä¸çŸ¥é“ï¼Œä½†æ˜¯æ— è®ºå¥½ä¸åï¼Œè¿™æ¬¡é¢è¯•éƒ½ç»™äº†æˆ‘ä¸€äº›é¼“èˆï¼Œå³ä¾¿æ˜¯ç»“æœä¸å¤ªå¥½ï¼Œæˆ‘ä¹Ÿä¸ä¼šæ°”é¦ï¼Œä¸ç®¡æ€ä¹ˆæ ·éƒ½è¦ç»§ç»­åŠªåŠ›ã€‚ï¼ˆå¸Œæœ›ç»“æœæ˜¯å¥½çš„å§ï¼‰&lt;/p&gt;
&lt;p&gt;åæ¥æ¥åˆ°äº†äºŒé¢çš„ç”µè¯ï¼Œæ‰€ä»¥ä¸€é¢åº”è¯¥æ˜¯è¿‡äº†ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€å®ä¹ é¢è¯•ã€‘è“æ¹–é¢è¯•å‡‰ç»</title>
        <link>https://tweakzx.github.io/p/%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E8%93%9D%E6%B9%96%E9%9D%A2%E8%AF%95%E5%87%89%E7%BB%8F/</link>
        <pubDate>Wed, 01 Dec 2021 20:56:54 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E8%93%9D%E6%B9%96%E9%9D%A2%E8%AF%95%E5%87%89%E7%BB%8F/</guid>
        <description>&lt;img src="https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/image-20211201214555354.png" alt="Featured image of post ã€å®ä¹ é¢è¯•ã€‘è“æ¹–é¢è¯•å‡‰ç»" /&gt;&lt;blockquote&gt;
&lt;p&gt;æ—¶é—´ï¼š2021-11-26 ä¸‹åˆå…­ç‚¹&lt;/p&gt;
&lt;p&gt;æ–¹å¼ï¼šé£ä¹¦è§†é¢‘é¢è¯•&lt;/p&gt;
&lt;p&gt;å²—ä½ï¼šåç«¯å¼€å‘&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆä¼šé¢è¯•è“æ¹–&#34;&gt;ä¸ºä»€ä¹ˆä¼šé¢è¯•è“æ¹–&lt;/h2&gt;
&lt;p&gt;å¿ƒè¡€æ¥æ½®æƒ³è¦å‡ºå»å®ä¹ ï¼Œåœ¨æ ¡å‹ç¾¤å†…å‘äº†æ±‚åŠ©ã€‚24å·ä¸­åˆï¼Œæœ¬ç§‘çš„åŒç­åŒå­¦æ¶›ç¥é—®æˆ‘æƒ³ä¸æƒ³è¯•ä¸€è¯•è“æ¹–ï¼Œæˆ‘æƒ³è¦ä¸€ä»½å®ä¹ æ¥æå‡è‡ªå·±çš„ä»£ç æ°´å¹³ï¼Œæ‰€ä»¥å½“ç„¶è¦æŠ“ä½è¿™æ¬¡æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä¸­åˆæŠ“ç´§æ—¶é—´å†™äº†ä¸€ä»½ç®€å†äº¤ç»™äº†æ¶›ç¥å¸®å¿™å†…æ¨ã€‚æ¶›ç¥é—®æˆ‘è¦ä¸è¦å…ˆå‡†å¤‡ä¸€ä¸‹ï¼Œæˆ‘è¯´ä¸äº†ï¼Œæ—©è§£å†³æ—©è½»æ¾ï¼Œå¯èƒ½æ˜¯çŠ¯è ¢äº†ï¼Œä¹Ÿå¯èƒ½æ˜¯å¤ªäº†è§£è‡ªå·±ï¼Œæˆ‘ä¸æ˜¯ä¼šå¥½å¥½è§„åˆ’å¤ä¹ çš„äººï¼Œæ‰€ä»¥ä¸å¦‚è¶ç€çƒ­æƒ…ç›´æ¥ä¸Šã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¢è¯•çš„è¿‡ç¨‹&#34;&gt;é¢è¯•çš„è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;é¢è¯•å®˜è¿˜æ˜¯å¾ˆæ¸©æŸ”çš„ï¼Œä¸Šæ¥å…ˆè®©æˆ‘åšäº†ä¸€ä¸‹è‡ªæˆ‘ä»‹ç»ï¼Œæˆ‘ä»‹ç»äº†ä¸€ä¸‹æœ¬ç§‘å’Œç¡•å£«ï¼Œä»¥åŠä¸€æ®µå®ä¹ ç»å†ï¼Œä¸€æ®µæ¯”èµ›ç»å†ã€‚è®©è¯´ä¸€ä¸‹è§‰å¾—æœ€æœ‰æœ‰æŒ‘æˆ˜æ€§çš„å·¥ä½œï¼Ÿå®ä¹ å’Œæ¯”èµ›éƒ½å¾ˆæ°´ï¼Œæ‰€ä»¥å®è¯å®è¯´æ²¡å•¥äº®ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ç®—æ³•é¢˜ä¸€é“ï¼Œå†™ä¸€ä¸‹å¿«æ’ã€‚å½“æ—¶ä»£ç æ²¡æœ‰è·‘èµ·æ¥ï¼Œå› ä¸ºvscodeå¥½åƒæ›´æ–°äº†code runnerçš„é…ç½®ï¼Œæ‰€ä»¥æ²¡æœ‰è·‘èµ·æ¥ï¼Œä¸è¿‡å†™çš„ä»£ç å¤§æ¦‚ç‡å…¨æ˜¯bugï¼Œä»£ç èƒ½åŠ›ä¹Ÿæ˜¯ç¡¬ä¼¤ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Solution&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;public&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;qsort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;randNum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;randNum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;randNum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;temp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pivot&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pivot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pivot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;){&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pivot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;qsort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;qsort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sortArray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;srand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;unsigned&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;qsort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nums&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åé—®äº†ä¸€äº›åŸºç¡€é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Javaå’ŒC++çš„åŒºåˆ«æœ‰å“ªäº›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç±»çš„é‡å†™å’Œé‡è½½&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TCPé€šä¿¡çš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Œä¸ºä»€ä¹ˆä¸èƒ½å¤šä¸€æ¬¡æˆ–è€…å°‘ä¸€æ¬¡ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TCPé•¿è¿æ¥å’ŒçŸ­é“¾æ¥&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TCPå’ŒUDPçš„åŒºåˆ«&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;äº†è§£Cacheå—ï¼Ÿæˆ‘ç­”éæ‰€é—®ï¼Œå›ç­”äº†æ“ä½œç³»ç»Ÿçš„cacheã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¶å®æœ‰å¯èƒ½æ˜¯é—®httpç¼“å­˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¾“å…¥urlåœ°å€æµè§ˆå™¨çš„å˜åŒ–&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é—®æœ‰ä¹ˆæœ‰ç”¨è¿‡æ•°æ®åº“ï¼Œå¯¹æ•°æ®åº“äº†è§£å¤šå°‘ï¼Œå›ç­”ç”¨è¿‡MySQL&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¦ç”¨æ•°æ®åº“ï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç®€å•ä»‹ç»ä¸€ä¸‹äº‘è®¡ç®—æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦ç”¨äº‘è®¡ç®—&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é¢è¯•æ€»ç»“&#34;&gt;é¢è¯•æ€»ç»“&lt;/h2&gt;
&lt;p&gt;é¢å®Œå°±çŸ¥é“è‡ªå·±åº”è¯¥æ˜¯å‡‰äº†ï¼Œæœç„¶12æœˆ1å·æ”¶åˆ°äº†æ„Ÿè°¢ä¿¡ã€‚å…¶å®è¿˜æ˜¯è€é—®é¢˜ï¼Œè‡ªå·±çš„åŸºç¡€çŸ¥è¯†è¿˜æ˜¯è¦åœ¨å·©å›ºä¸€ä¸‹å¯èƒ½è¦å¤šçœ‹çœ‹é¢ç»ï¼Œå¦å¤–ç®—æ³•ä»€ä¹ˆçš„è¿˜æ˜¯è¦å¤šåŠ ç»ƒä¹ ã€‚&lt;/p&gt;
&lt;p&gt;åæ¥æ¶›ç¥å‘Šè¯‰æˆ‘æ˜¯HRè§‰å¾—åªæœ‰ä¸€ä¸ªæœˆå¤šçš„å®ä¹ æ—¶é—´å¤ªçŸ­äº†ï¼Œä¸å¥½å®‰æ’ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>ã€å®ä¹ é¢è¯•ã€‘å­—èŠ‚é¢è¯•å‡‰ç»</title>
        <link>https://tweakzx.github.io/p/%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E5%AD%97%E8%8A%82%E9%9D%A2%E8%AF%95%E5%87%89%E7%BB%8F/</link>
        <pubDate>Mon, 29 Nov 2021 16:52:26 +0800</pubDate>
        
        <guid>https://tweakzx.github.io/p/%E5%AE%9E%E4%B9%A0%E9%9D%A2%E8%AF%95%E5%AD%97%E8%8A%82%E9%9D%A2%E8%AF%95%E5%87%89%E7%BB%8F/</guid>
        <description>&lt;img src="https://cdn.jsdelivr.net/gh/Tweakzx/ImageHost@main/img/bytedance.jpg" alt="Featured image of post ã€å®ä¹ é¢è¯•ã€‘å­—èŠ‚é¢è¯•å‡‰ç»" /&gt;&lt;blockquote&gt;
&lt;p&gt;æ—¶é—´ï¼š2021-11-29ä¸‹åˆä¸‰ç‚¹&lt;/p&gt;
&lt;p&gt;æ–¹å¼ï¼šé£ä¹¦è§†é¢‘é¢è¯•&lt;/p&gt;
&lt;p&gt;å²—ä½ï¼šåç«¯å¼€å‘å®ä¹ ç”Ÿ-ä¸šåŠ¡ä¸­å°èŒä½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆä¼šæŠ•é€’å­—èŠ‚å®ä¹ &#34;&gt;ä¸ºä»€ä¹ˆä¼šæŠ•é€’å­—èŠ‚å®ä¹ &lt;/h2&gt;
&lt;p&gt;â€‹		å› ä¸ºä¸­ç§‘é™¢çš„ç ”ç©¶æ‰€å¤§å¤šä¸è®©å®ä¹ ï¼Œç ”äºŒæƒ³å»å®ä¹ æ˜¯ä¸€å®šä¸è¡Œçš„ã€‚ä½†æ˜¯ç ”ä¸€åœ¨é›æ –æ¹–ï¼Œè¯¾é¢˜ç»„åœ¨æµ·æ·€ï¼Œæˆ‘ç ”ä¸€åŸºæœ¬ä¸å‚ä¸ç§‘ç ”ï¼Œæ‰€ä»¥æƒ³è¦è¶æ²¡äººç®¡çš„æ—¶å€™å‡ºå»å®ä¹ ã€‚å› ä¸ºå°†æ¥å¤§æ¦‚ç‡æ˜¯åšè½¯å¼€ï¼Œæ‰€ä»¥æƒ³æ‰¾ä¸€ä»½åç«¯å¼€å‘çš„å·¥ä½œã€‚åœ¨æ ¡å‹ç¾¤é‡Œé—®äº†ä¸€ä¸‹ï¼Œæœ‰å­¦é•¿ç»™äº†ä¸€ä¸ªå†…æ¨çš„æœºä¼šï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™æ¬¡ä¸€é¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¢è¯•è¿‡ç¨‹&#34;&gt;é¢è¯•è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;â€‹		é¢è¯•å®˜ä¸Šæ¥è®©æˆ‘åšäº†è‡ªæˆ‘ä»‹ç»ä¹‹åå°±è®©æˆ‘å†™ä»£ç åšé¢˜ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é¢˜ç›®ä¸€ï¼šé“¾è¡¨1-&amp;gt;2-&amp;gt;3-&amp;gt;4-&amp;gt;5-&amp;gt;6 è½¬å˜æˆ é“¾è¡¨1-&amp;gt;6-&amp;gt;2-&amp;gt;5-&amp;gt;3-&amp;gt;4&lt;/p&gt;
&lt;p&gt;å¤§æ¦‚æ„æ€å°±æ˜¯å°†é“¾è¡¨å¹³åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå‰ä¸€éƒ¨åˆ†é¡ºåºä¸å˜ï¼Œåä¸€éƒ¨åˆ†åè½¬åæ’ç©ºæ’å…¥å‰ä¸€éƒ¨åˆ†é“¾è¡¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€‹		è¯´å®è¯ï¼Œè‡ªå·±çš„ä»£ç èƒ½åŠ›ç¡®å®æœ‰ç‚¹å·®ï¼ŒåŸæœ¬æ‰“ç®—ä½¿ç”¨c++æ¥å†™åæ¥æ”¹æˆäº†Javaï¼Œå› ä¸ºæˆ‘æƒ³èµ·Javaé‡Œæœ‰LinkedListè¿™ä¸ªæ•°æ®ç»“æ„ã€‚ç†ç”±æœ‰ç‚¹è’è¯å“ˆï¼Œå…¶å®æ˜¯æˆ‘æ²¡æœ‰æ„è¯†åˆ°è¦è‡ªå·±å®šä¹‰èŠ‚ç‚¹æ¥å®ç°é“¾è¡¨ï¼Œæ‰€ä»¥åœ¨æƒ³è¦å†™æŒ‡é’ˆçš„æ—¶å€™å°±å¡ä½äº†ï¼Œå®Œå…¨ä¸çŸ¥é“æ€ä¹ˆç»™LinkedListçš„é“¾è¡¨å†™æŒ‡é’ˆã€‚ç„¶åå°±å°¬ä½äº†ï¼Œé¢è¯•å®˜æ— å¥ˆè¯´é‚£å°±æ¢ä¸€é“å§ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é¢˜ç›®äºŒï¼šåˆ¤æ–­ä¸€ä¸ªäºŒå‰æ ‘æ˜¯å¦æ˜¯å¹³è¡¡æ ‘&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€‹		é¢˜ç›®ä¸æ˜¯å¾ˆéš¾ï¼Œä½†æ˜¯è‡ªå·±å¤ªä¹…ä¸å†™ä»£ç æœ‰äº›ç”Ÿç–äº†ï¼Œå†™å‡ºæ¥çš„ç¨‹åºä¸çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰ç¼–è¯‘é€šè¿‡ã€‚è¯´å®è¯ï¼Œé¢è¯•å®˜è®©æˆ‘è‡ªå·±å®ç°ä¸€ä¸ªå•ä¾‹æ¥æµ‹è¯•ç¨‹åºï¼Œå…¶ä¸­çˆ†å‡ºçš„å„ç§é”™è¯¯ï¼Œæ— ä¸€ä¸æ­ç¤ºäº†æˆ‘å®Œå…¨æ²¡æœ‰ä»€ä¹ˆå¼€å‘ç»éªŒçš„äº‹å®ï¼Œä¾‹å¦‚å†…éƒ¨ç±»æ”¾é”™äº†ä½ç½®ï¼Œstaticçš„ç¼–è¯‘é—®é¢˜ï¼Œè¿˜æœ‰ä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚æ— ç–‘æ˜¯å†æ¬¡å°¬æ­»äº†ã€‚&lt;/p&gt;
&lt;p&gt;â€‹		ä¹‹åé¢è¯•å®˜è®©æˆ‘è®²ä¸€è®²è‡ªå·±çš„é¡¹ç›®ç»å†ï¼Œä¸»è¦é—®äº†ä¸€ä¸‹å¤§ä¸‰åœ¨åä¸ºçš„å®ä¹ ã€‚å¯æƒœè‡ªå·±è™½ç„¶å®ä¹ äº†ï¼Œä½†å®é™…çš„å·¥ä½œå¾ˆå°‘ï¼Œå«é‡‘é‡ä¹Ÿä¸é«˜ï¼Œé¢è¯•å®˜å…´è¶£ä¸å¤§ã€‚&lt;/p&gt;
&lt;p&gt;â€‹		ä¹‹åå°±æ˜¯é—®æˆ‘æœ‰æ²¡æœ‰ä»€ä¹ˆæƒ³é—®ä»–çš„ï¼Œæˆ‘å·²ç»ä¸æƒ³è¯´è¯äº†ï¼Œå°±æ²¡é—®ã€‚&lt;/p&gt;
&lt;p&gt;â€‹		è‰è‰ç»“æŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;h3 id=&#34;é¦–å…ˆè¿˜æ˜¯æŠŠè¿™ä¸¤é“é¢˜çš„ä»£ç å†™å†™å§&#34;&gt;é¦–å…ˆè¿˜æ˜¯æŠŠè¿™ä¸¤é“é¢˜çš„ä»£ç å†™å†™å§&lt;/h3&gt;
&lt;h4 id=&#34;é¢˜ç›®ä¸€&#34;&gt;é¢˜ç›®ä¸€&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/**
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @author lizhixuan
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @version 1.0
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @date 2021/12/1 15:50
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; */&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ReverseList2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;createInstance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;printList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;out&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;out&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;-&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;out&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;reverse&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pre&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pre&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;pre&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;current&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
       &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pre&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;mergeList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l1Next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l2Next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;l2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;l1Next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;l2Next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;l1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;l2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l1Next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;

            &lt;span class=&#34;n&#34;&gt;l1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l1Next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;l2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;l2Next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;reverseHalf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;fast&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fast&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;slow&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slow&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;half&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reverse&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;slow&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;slow&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;next&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mergeList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;half&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ListNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;createInstance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;printList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;head&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;reverseHalf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;printList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;é¢˜ç›®äºŒ&#34;&gt;é¢˜ç›®äºŒ&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;java.util.LinkedList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;java.util.Queue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;cm&#34;&gt;/**
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @author lizhixuan
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @version 1.0
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; * @date 2021/12/1 17:24
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt; */&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;BalanceCheck&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;TreeNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;listToTree&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;src&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;substring&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;,&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;

        &lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;Queue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LinkedList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++){&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;parseInt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]));&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;isEmpty&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()){&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;poll&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;length&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;equals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;null&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)){&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;left&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;parseInt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]));&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;strList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;length&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;equals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;null&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)){&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;right&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Integer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;parseInt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]));&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;queue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getHeight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Math&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;max&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getHeight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;getHeight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))+&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;boolean&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;isBalanced&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;){&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;leftHeight&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;getHeight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rightHeight&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;getHeight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Math&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;abs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;leftHeight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rightHeight&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&amp;lt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;isBalanced&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;left&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;isBalanced&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;right&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tree&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;[3,9,20,null,null,15,7]&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;TreeNode&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;root&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;listToTree&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tree&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;out&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;println&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;isBalanced&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;root&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä¸€äº›çŸ¥è¯†ç‚¹&#34;&gt;ä¸€äº›çŸ¥è¯†ç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;javaå†…éƒ¨ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆå‘˜å†…éƒ¨ç±»ä¸­ä¸èƒ½å­˜åœ¨ä»»ä½•staticçš„å˜é‡å’Œæ–¹æ³•&lt;/li&gt;
&lt;li&gt;æˆå‘˜å†…éƒ¨ç±»æ˜¯ä¾é™„äºå¤–å›´ç±»çš„ï¼Œæ‰€ä»¥åªæœ‰å…ˆåˆ›å»ºäº†å¤–å›´ç±»æ‰èƒ½å¤Ÿåˆ›å»ºå†…éƒ¨ç±»&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;javaçš„staticå…³é”®å­—&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;staticå˜é‡ä¹Ÿç§°ä½œé™æ€å˜é‡ï¼Œé™æ€å˜é‡è¢«æ‰€æœ‰çš„å¯¹è±¡æ‰€å…±äº«ï¼Œåœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œå®ƒå½“ä¸”ä»…å½“åœ¨ç±»åˆæ¬¡åŠ è½½æ—¶ä¼šè¢«åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºä»€ä¹ˆè¯´staticå—å¯ä»¥ç”¨æ¥ä¼˜åŒ–ç¨‹åºæ€§èƒ½ï¼Œæ˜¯å› ä¸ºå®ƒçš„ç‰¹æ€§:åªä¼šåœ¨ç±»åŠ è½½çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨C/C++ä¸­staticæ˜¯å¯ä»¥ä½œç”¨åŸŸå±€éƒ¨å˜é‡çš„ï¼Œä½†æ˜¯åœ¨Javaä¸­åˆ‡è®°ï¼šstaticæ˜¯ä¸å…è®¸ç”¨æ¥ä¿®é¥°å±€éƒ¨å˜é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åæ€&#34;&gt;åæ€&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è‡ªå·±è¿˜æ˜¯ç¼ºä¹ä»£ç ç»éªŒï¼Œä»£ç å†™ä¸å‡ºæ¥ï¼Œé¢è¯•å®˜æ˜æ˜¾ååˆ†å¤±æœ›ï¼Œå¤±å»è€å¿ƒä¹‹åå¤šæ¬¡å¹æ°”æ‚è„¸ï¼Œè¯´å®è¯å‹åŠ›è¿˜æ˜¯æŒºå¤§çš„ï¼Œæ¯•ç«Ÿç¡®å®æŒºä¸¢è„¸çš„ã€‚ä»¥åä¹Ÿè¦å¤šå†™ä¸€ç‚¹ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;æ‰“ç®—æŠŠè‡ªå·±çš„å­¦ä¹ æ€»ç»“ä¸‹æ¥ï¼Œäºæ˜¯ä¹Ÿæœ‰äº†è¿™ç¯‡åšå®¢ï¼Œå¸Œæœ›è‡ªå·±å¯ä»¥åšæŒå†™åšå®¢ï¼Œè¯´å®è¯ï¼Œé¢è¯•å®Œå‹åŠ›æŒºå¤§ï¼Œæ„Ÿè§‰è‡ªå·±å°±æ˜¯ä¸€ä¸ªæ— æ•Œé“åºŸç‰©ï¼Œå†™åšå®¢å†™å‡ºæ¥æ„Ÿè§‰å¥½ä¸€äº›äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        
    </channel>
</rss>
